/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    async function ensureFolderExists(path) {
      const dirs = path.replace(/\\/g, "/").split("/");
      dirs.pop();
      if (dirs.length) {
        const dir = join(...dirs);
        if (!window.app.vault.getAbstractFileByPath(dir)) {
          await window.app.vault.createFolder(dir);
        }
      }
    }
    async function getNotePath(directory, filename) {
      if (!filename.endsWith(".md")) {
        filename += ".md";
      }
      const path = obsidian.normalizePath(join(directory, filename));
      await ensureFolderExists(path);
      return path;
    }
    async function getTemplateInfo(template) {
      const { metadataCache, vault } = window.app;
      const templatePath = obsidian.normalizePath(template);
      if (templatePath === "/") {
        return Promise.resolve(["", null]);
      }
      try {
        const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
        const contents = await vault.cachedRead(templateFile);
        const IFoldInfo = window.app.foldManager.load(templateFile);
        return [contents, IFoldInfo];
      } catch (err) {
        console.error(`Failed to read the daily note template '${templatePath}'`, err);
        new obsidian.Notice("Failed to read the daily note template");
        return ["", null];
      }
    }
    function getDateUID(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(
              filename,
              // If format contains week, remove day & month formatting
              format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""),
              false
            );
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    async function createDailyNote2(date) {
      const app = window.app;
      const { vault } = app;
      const moment2 = window.moment;
      const { template, format, folder } = getDailyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment2().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = moment2();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
        app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "day");
          if (date) {
            const dateString = getDateUID(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek() {
      const { moment: moment2 } = window;
      let weekStart = moment2.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue(dayOfWeekName) {
      return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
    }
    async function createWeeklyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getWeeklyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
          const day = getDayOfWeekNumericalValue(dayOfWeek);
          return date.weekday(day).format(momentFormat.trim());
        }));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getWeeklyNote(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "week");
          if (date) {
            const dateString = getDateUID(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    async function createMonthlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getMonthlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getMonthlyNote(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "month");
          if (date) {
            const dateString = getDateUID(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    async function createQuarterlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getQuarterlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getQuarterlyNote(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "quarter");
          if (date) {
            const dateString = getDateUID(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    async function createYearlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getYearlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getYearlyNote(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "year");
          if (date) {
            const dateString = getDateUID(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const dailyNotesPlugin = app.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      if (app.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote(granularity, date) {
      const createFn = {
        day: createDailyNote2,
        month: createMonthlyNote,
        week: createWeeklyNote
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote2;
    exports.createMonthlyNote = createMonthlyNote;
    exports.createPeriodicNote = createPeriodicNote;
    exports.createQuarterlyNote = createQuarterlyNote;
    exports.createWeeklyNote = createWeeklyNote;
    exports.createYearlyNote = createYearlyNote;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes;
    exports.getAllWeeklyNotes = getAllWeeklyNotes;
    exports.getAllYearlyNotes = getAllYearlyNotes;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID;
    exports.getMonthlyNote = getMonthlyNote;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DailyPromptPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/modal.ts
var import_obsidian = require("obsidian");

// src/types.ts
var fieldType = /* @__PURE__ */ ((fieldType2) => {
  fieldType2["Text"] = "Text";
  fieldType2["Checkbox"] = "Checkbox";
  fieldType2["Note"] = "Note";
  fieldType2["EmbeddedNoteFile"] = "Embedded Note / File";
  fieldType2["TextArea"] = "Text area";
  fieldType2["Slider"] = "Slider";
  return fieldType2;
})(fieldType || {});

// src/modal.ts
var ConfirmationModal = class extends import_obsidian.Modal {
  constructor(app, config) {
    super(app);
    this.config = config;
    const { cta, text, title, settings } = config;
    this.containerEl.addClass("mod-confirmation");
    this.titleEl.setText(title);
    const contentEl = this.contentEl.createDiv();
    for (let i = 0; i < settings.length; i++) {
      const question = settings[i][0];
      const type = settings[i][1];
      const textEl = contentEl.createEl("div", { text: question });
      const inputContainer = contentEl.createEl("div");
      switch (type) {
        case "Text" /* Text */:
          new import_obsidian.TextComponent(inputContainer).setPlaceholder(
            "Your Answer"
          );
          break;
        case "Checkbox" /* Checkbox */:
          new import_obsidian.ToggleComponent(inputContainer);
          break;
        case "Embedded Note / File" /* EmbeddedNoteFile */:
        case "Note" /* Note */:
          new import_obsidian.TextComponent(inputContainer).setPlaceholder(
            "Enter the name of the note"
          );
          break;
        case "Text area" /* TextArea */:
          new import_obsidian.TextAreaComponent(inputContainer).setPlaceholder(
            "Your answer"
          );
          break;
        case "Slider" /* Slider */: {
          const currentValueElement = document.createElement("input");
          currentValueElement.classList.add("sliderValue");
          currentValueElement.type = "number";
          currentValueElement.value = "50";
          currentValueElement.addEventListener("input", (event) => {
            const value = parseInt(event.target.value);
            slider.setValue(value);
          });
          inputContainer.appendChild(currentValueElement);
          const sliderWrapper = document.createElement("div");
          inputContainer.appendChild(sliderWrapper);
          const slider = new import_obsidian.SliderComponent(sliderWrapper).setValue(50).onChange((value) => {
            currentValueElement.value = value.toString();
          });
          const sliderInput = sliderWrapper.querySelector(
            "input[type='range']"
          );
          sliderInput.addEventListener("input", (event) => {
            const value = parseInt(event.target.value);
            currentValueElement.value = value.toString();
          });
          break;
        }
        default:
          throw new Error(`Unhandled fieldType: ${fieldType}`);
      }
      contentEl.appendChild(textEl);
      contentEl.appendChild(document.createElement("br"));
      contentEl.appendChild(inputContainer);
      if (i < settings.length - 1) {
        const hr = contentEl.createEl("hr");
        contentEl.appendChild(hr);
      }
    }
    this.addButtons(cta);
  }
  // updateAcceptButton() {
  // 	const allInputs = this.contentEl.querySelectorAll(
  // 		"input:not(.slider), input[type='checkbox'], textarea",
  // 	);
  // 	const isAllFilled = Array.from(allInputs).every(
  // 		(input: HTMLInputElement) => input.value.trim() !== "",
  // 	);
  //
  // 	const acceptBtnEl = this.modalEl.getElementsByClassName(
  // 		"mod-cta",
  // 	)[1] as HTMLButtonElement;
  //
  // 	if (isAllFilled) {
  // 		acceptBtnEl.removeAttribute("disabled");
  // 	} else {
  // 		acceptBtnEl.setAttribute("disabled", "true");
  // 	}
  // }
  addButtons(cta) {
    const buttonContainerEl = this.contentEl.createDiv(
      "modal-button-container"
    );
    const cancelBtnEl = buttonContainerEl.createEl("button", {
      text: "Cancel",
      cls: "mod-cta"
    });
    const acceptBtnEl = buttonContainerEl.createEl("button", {
      cls: "mod-cta",
      text: cta
    });
    acceptBtnEl.addEventListener("click", async (e) => {
      e.preventDefault();
      const allInputs = this.contentEl.querySelectorAll(
        "input:not(.sliderValue), textarea"
      );
      const answers = Array.from(allInputs).map((input) => {
        let value;
        if (input.type === "checkbox") {
          const parentDiv = input.closest(".checkbox-container");
          if (parentDiv && parentDiv.classList.contains("is-enabled")) {
            value = "true";
          } else {
            value = "false";
          }
        } else {
          value = input.value.trim();
        }
        return value;
      });
      this.accepted = true;
      this.close();
      this.config.onAccept(answers);
    });
    cancelBtnEl.addEventListener("click", (e) => {
      var _a, _b;
      e.preventDefault();
      this.close();
      (_b = (_a = this.config).onCancel) == null ? void 0 : _b.call(_a);
    });
  }
  onClose() {
    var _a, _b;
    if (!this.accepted) {
      (_b = (_a = this.config).onCancel) == null ? void 0 : _b.call(_a);
    }
  }
};

// src/fileEditor.ts
var import_obsidian2 = require("obsidian");
function getEditorForFile(app, file) {
  let editor = null;
  app.workspace.iterateAllLeaves((leaf) => {
    if (leaf.view instanceof import_obsidian2.MarkdownView && leaf.view.file === file) {
      editor = leaf.view.sourceMode.cmEditor;
    }
  });
  return editor;
}

// src/fileUtils.ts
function getHeadingLevel(line = "") {
  const heading = line.match(/^(#{1,6})\s+\S/);
  return heading ? heading[1].length : null;
}
async function updateSection(app, file, heading, sectionContents) {
  const headingLevel = getHeadingLevel(heading);
  const { vault } = app;
  const fileContents = await vault.read(file);
  const fileLines = fileContents.split("\n");
  let logbookSectionLineNum = -1;
  let nextSectionLineNum = -1;
  for (let i = 0; i < fileLines.length; i++) {
    if (fileLines[i].trim() === heading) {
      logbookSectionLineNum = i;
    } else if (logbookSectionLineNum !== -1) {
      const currLevel = getHeadingLevel(fileLines[i]);
      if (currLevel && currLevel <= headingLevel) {
        nextSectionLineNum = i;
        break;
      }
    }
  }
  const editor = getEditorForFile(app, file);
  if (editor) {
    if (logbookSectionLineNum !== -1) {
      const from = { line: logbookSectionLineNum + 1, ch: 0 };
      const to = nextSectionLineNum !== -1 ? { line: nextSectionLineNum - 1, ch: 0 } : { line: fileLines.length, ch: 0 };
      editor.replaceRange(`${sectionContents}
`, from, to);
      return;
    } else {
      const pos = { line: fileLines.length, ch: 0 };
      editor.replaceRange(`

${sectionContents}`, pos, pos);
      return;
    }
  }
  if (logbookSectionLineNum !== -1) {
    const prefix = fileLines.slice(0, logbookSectionLineNum + 1);
    const suffix = nextSectionLineNum !== -1 ? fileLines.slice(nextSectionLineNum) : [];
    return vault.modify(
      file,
      [...prefix, sectionContents, ...suffix].join("\n")
    );
  } else {
    return vault.modify(file, [...fileLines, "", heading, sectionContents].join("\n"));
  }
}

// src/main.ts
var import_obsidian_daily_notes_interface = __toESM(require_main());
var DEFAULT_SETTINGS = {
  questions: [["Example prompt", "Text" /* Text */]],
  dailyNotesFolder: "",
  promptSectionHeading: "## Prompts",
  linePrefix: "",
  includeQuestions: true,
  questionStyle: "Bold"
};
var DailyPromptPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
    console.log("Daily Prompt plugin loaded");
    this.addCommand({
      id: "open-prompt",
      name: "Open prompt",
      callback: () => setTimeout(() => this.openPrompt(), 20)
    });
    this.addSettingTab(new DailyPromptSettingsTab(this.app, this));
  }
  onunload() {
    console.log("Daily Prompt Plugin unloaded");
  }
  async openPrompt() {
    const questions = this.settings.questions.map(([question, _]) => question).join("\n");
    new ConfirmationModal(this.app, {
      cta: "Accept",
      onAccept: async (answers) => {
        this.fillDailyNote(answers);
      },
      onCancel: () => {
        console.log("Prompt canceled");
      },
      text: questions,
      title: "Prompt",
      settings: this.settings.questions
    }).open();
  }
  async fillDailyNote(answers) {
    const date = (0, import_obsidian3.moment)();
    const dailyNotes = (0, import_obsidian_daily_notes_interface.getAllDailyNotes)();
    let dailyNote = (0, import_obsidian_daily_notes_interface.getDailyNote)(date, dailyNotes);
    if (!dailyNote) {
      dailyNote = await (0, import_obsidian_daily_notes_interface.createDailyNote)(date);
    }
    let resultString = "";
    for (let i = 0; i < this.settings.questions.length; i++) {
      const question = this.settings.questions[i][0];
      if (this.settings.includeQuestions) {
        if (this.settings.questionStyle === "Bold") {
          resultString += "**" + question + "**\n";
        } else {
          resultString += question + "\n";
        }
      }
      switch (this.settings.questions[i][1]) {
        case "Note" /* Note */:
          resultString += "[[" + answers[i] + "]]\n\n";
          break;
        case "Embedded Note / File" /* EmbeddedNoteFile */:
          resultString += "![[" + answers[i] + "]]\n\n";
          break;
        case "Checkbox" /* Checkbox */:
          resultString += (answers[i] == "true" ? "Yes" : "No") + "\n\n";
          break;
        case "Slider" /* Slider */:
        case "Text area" /* TextArea */:
          resultString += answers[i] + "\n\n";
          break;
        default:
          resultString += this.settings.linePrefix + answers[i] + "\n\n";
          break;
      }
    }
    await updateSection(
      this.app,
      dailyNote,
      this.settings.promptSectionHeading,
      resultString
    );
  }
};
var DailyPromptSettingsTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    const plugin = this.plugin;
    containerEl.empty();
    new import_obsidian3.Setting(containerEl).setName("Prompt section heading").setDesc(
      "Define the heading to use for the prompts. NOTE: Must be unique for every daily note."
    ).addText(
      (text) => text.setPlaceholder("## Prompts").setValue(plugin.settings.promptSectionHeading).onChange((value) => {
        if (value === "") {
          plugin.settings.promptSectionHeading = "## Prompts";
        } else {
          plugin.settings.promptSectionHeading = value;
        }
        plugin.saveData(plugin.settings);
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Line prefix").setDesc(
      "Prefix for each new line, include the trailing spaces. Only works for field type text. Examples: `- ` for lists or `- [ ] ` for tasks."
    ).addText(
      (text) => text.setPlaceholder("").setValue(plugin.settings.linePrefix).onChange((value) => {
        plugin.settings.linePrefix = value;
        plugin.saveData(plugin.settings);
      })
    );
    new import_obsidian3.Setting(containerEl).setName("Include questions").setDesc("Decide if questions will be written to the daily note.").addToggle((toggle) => {
      toggle.setValue(plugin.settings.includeQuestions);
      toggle.onChange((value) => {
        plugin.settings.includeQuestions = value;
        plugin.saveData(plugin.settings);
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Questions style").setDesc("Decide in what style the questions should be displayed.").addDropdown((dropdown) => {
      dropdown.addOption("Bold", "Bold (**)");
      dropdown.addOption("No style", "No style");
      dropdown.setValue(plugin.settings.questionStyle).onChange(async (value) => {
        plugin.settings.questionStyle = value;
        plugin.saveData(plugin.settings);
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Prompts").setHeading();
    new import_obsidian3.Setting(containerEl).setName("Prompts").setDesc("Add and edit new prompts here").addButton((button) => {
      button.setButtonText("Add prompt").onClick(() => {
        plugin.settings.questions.push(["", "Text"]);
        plugin.saveData(plugin.settings);
        this.display();
      });
    });
    for (let i = 0; i < plugin.settings.questions.length; i++) {
      const [question, fieldType2] = plugin.settings.questions[i];
      const createSetting = (questionIndex) => {
        new import_obsidian3.Setting(containerEl).setName("Prompt #" + (questionIndex + 1)).addText(
          (text) => text.setValue(
            plugin.settings.questions[questionIndex][0]
          ).onChange(async (value) => {
            plugin.settings.questions[questionIndex][0] = value;
            plugin.saveData(plugin.settings);
          })
        ).addDropdown(
          (dropdown) => dropdown.addOption(fieldType2.Text, "Text").addOption(fieldType2.Note, "Note").addOption(
            fieldType2.EmbeddedNoteFile,
            "Embedded Note / File"
          ).addOption(fieldType2.Checkbox, "Checkbox").addOption(fieldType2.TextArea, "Text area").addOption(fieldType2.Slider, "Slider").setValue(fieldType2).onChange(async (value) => {
            plugin.settings.questions[questionIndex][1] = value;
            plugin.saveData(plugin.settings);
          })
        );
        const removeButton = containerEl.createEl("button", {
          text: "Remove",
          cls: "mod-cta"
        });
        removeButton.addEventListener("click", () => {
          plugin.settings.questions.splice(questionIndex, 1);
          plugin.saveData(plugin.settings);
          this.display();
        });
        containerEl.createEl("br");
        containerEl.createEl("br");
      };
      createSetting(i);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZS9kaXN0L21haW4uanMiLCAic3JjL21haW4udHMiLCAic3JjL21vZGFsLnRzIiwgInNyYy90eXBlcy50cyIsICJzcmMvZmlsZUVkaXRvci50cyIsICJzcmMvZmlsZVV0aWxzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBvYnNpZGlhbiA9IHJlcXVpcmUoJ29ic2lkaWFuJyk7XG5cbmNvbnN0IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQgPSBcIllZWVktTU0tRERcIjtcbmNvbnN0IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUID0gXCJnZ2dnLVtXXXd3XCI7XG5jb25zdCBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQgPSBcIllZWVktTU1cIjtcbmNvbnN0IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUID0gXCJZWVlZLVtRXVFcIjtcbmNvbnN0IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUID0gXCJZWVlZXCI7XG5cbmZ1bmN0aW9uIHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhwZXJpb2RpY2l0eSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IHdpbmRvdy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5bcGVyaW9kaWNpdHldPy5lbmFibGVkO1xufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYGRhaWx5LW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXREYWlseU5vdGVTZXR0aW5ncygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCB7IGludGVybmFsUGx1Z2lucywgcGx1Z2lucyB9ID0gd2luZG93LmFwcDtcbiAgICAgICAgaWYgKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcImRhaWx5XCIpKSB7XG4gICAgICAgICAgICBjb25zdCB7IGZvcm1hdCwgZm9sZGVyLCB0ZW1wbGF0ZSB9ID0gcGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LmRhaWx5IHx8IHt9O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCB8fCBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgICAgIGZvbGRlcjogZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGZvbGRlciwgZm9ybWF0LCB0ZW1wbGF0ZSB9ID0gaW50ZXJuYWxQbHVnaW5zLmdldFBsdWdpbkJ5SWQoXCJkYWlseS1ub3Rlc1wiKT8uaW5zdGFuY2U/Lm9wdGlvbnMgfHwge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCB8fCBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBmb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gZGFpbHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgd2Vla2x5LW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICAgICAgY29uc3QgY2FsZW5kYXJTZXR0aW5ncyA9IHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwiY2FsZW5kYXJcIik/Lm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHBlcmlvZGljTm90ZXNTZXR0aW5ncyA9IHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy53ZWVrbHk7XG4gICAgICAgIGlmIChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJ3ZWVrbHlcIikpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBwZXJpb2RpY05vdGVzU2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgICAgIGZvbGRlcjogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gY2FsZW5kYXJTZXR0aW5ncyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3Mud2Vla2x5Tm90ZUZvcm1hdCB8fCBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3Mud2Vla2x5Tm90ZUZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3Mud2Vla2x5Tm90ZVRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gd2Vla2x5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRNb250aGx5Tm90ZVNldHRpbmdzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJtb250aGx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ubW9udGhseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9NT05USExZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gbW9udGhseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBwZXJpb2RpYy1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJxdWFydGVybHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5xdWFydGVybHkpIHx8XG4gICAgICAgICAgICB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gcXVhcnRlcmx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcInllYXJseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LnllYXJseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSB5ZWFybHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG5cbi8vIENyZWRpdDogQGNyZWF0aW9uaXgvcGF0aC5qc1xuZnVuY3Rpb24gam9pbiguLi5wYXJ0U2VnbWVudHMpIHtcbiAgICAvLyBTcGxpdCB0aGUgaW5wdXRzIGludG8gYSBsaXN0IG9mIHBhdGggY29tbWFuZHMuXG4gICAgbGV0IHBhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0U2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHBhcnRzID0gcGFydHMuY29uY2F0KHBhcnRTZWdtZW50c1tpXS5zcGxpdChcIi9cIikpO1xuICAgIH1cbiAgICAvLyBJbnRlcnByZXQgdGhlIHBhdGggY29tbWFuZHMgdG8gZ2V0IHRoZSBuZXcgcmVzb2x2ZWQgcGF0aC5cbiAgICBjb25zdCBuZXdQYXJ0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgLy8gUmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXNcbiAgICAgICAgLy8gQWxzbyByZW1vdmUgXCIuXCIgc2VnbWVudHNcbiAgICAgICAgaWYgKCFwYXJ0IHx8IHBhcnQgPT09IFwiLlwiKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIC8vIFB1c2ggbmV3IHBhdGggc2VnbWVudHMuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG5ld1BhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICAgIC8vIFByZXNlcnZlIHRoZSBpbml0aWFsIHNsYXNoIGlmIHRoZXJlIHdhcyBvbmUuXG4gICAgaWYgKHBhcnRzWzBdID09PSBcIlwiKVxuICAgICAgICBuZXdQYXJ0cy51bnNoaWZ0KFwiXCIpO1xuICAgIC8vIFR1cm4gYmFjayBpbnRvIGEgc2luZ2xlIHN0cmluZyBwYXRoLlxuICAgIHJldHVybiBuZXdQYXJ0cy5qb2luKFwiL1wiKTtcbn1cbmZ1bmN0aW9uIGJhc2VuYW1lKGZ1bGxQYXRoKSB7XG4gICAgbGV0IGJhc2UgPSBmdWxsUGF0aC5zdWJzdHJpbmcoZnVsbFBhdGgubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgaWYgKGJhc2UubGFzdEluZGV4T2YoXCIuXCIpICE9IC0xKVxuICAgICAgICBiYXNlID0gYmFzZS5zdWJzdHJpbmcoMCwgYmFzZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgIHJldHVybiBiYXNlO1xufVxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpIHtcbiAgICBjb25zdCBkaXJzID0gcGF0aC5yZXBsYWNlKC9cXFxcL2csIFwiL1wiKS5zcGxpdChcIi9cIik7XG4gICAgZGlycy5wb3AoKTsgLy8gcmVtb3ZlIGJhc2VuYW1lXG4gICAgaWYgKGRpcnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRpciA9IGpvaW4oLi4uZGlycyk7XG4gICAgICAgIGlmICghd2luZG93LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGlyKSkge1xuICAgICAgICAgICAgYXdhaXQgd2luZG93LmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZGlyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGdldE5vdGVQYXRoKGRpcmVjdG9yeSwgZmlsZW5hbWUpIHtcbiAgICBpZiAoIWZpbGVuYW1lLmVuZHNXaXRoKFwiLm1kXCIpKSB7XG4gICAgICAgIGZpbGVuYW1lICs9IFwiLm1kXCI7XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSBvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGpvaW4oZGlyZWN0b3J5LCBmaWxlbmFtZSkpO1xuICAgIGF3YWl0IGVuc3VyZUZvbGRlckV4aXN0cyhwYXRoKTtcbiAgICByZXR1cm4gcGF0aDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSkge1xuICAgIGNvbnN0IHsgbWV0YWRhdGFDYWNoZSwgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgdGVtcGxhdGVQYXRoID0gb2JzaWRpYW4ubm9ybWFsaXplUGF0aCh0ZW1wbGF0ZSk7XG4gICAgaWYgKHRlbXBsYXRlUGF0aCA9PT0gXCIvXCIpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXCJcIiwgbnVsbF0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBtZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHRlbXBsYXRlUGF0aCwgXCJcIik7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgdmF1bHQuY2FjaGVkUmVhZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBJRm9sZEluZm8gPSB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLmxvYWQodGVtcGxhdGVGaWxlKTtcbiAgICAgICAgcmV0dXJuIFtjb250ZW50cywgSUZvbGRJbmZvXTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcmVhZCB0aGUgZGFpbHkgbm90ZSB0ZW1wbGF0ZSAnJHt0ZW1wbGF0ZVBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJGYWlsZWQgdG8gcmVhZCB0aGUgZGFpbHkgbm90ZSB0ZW1wbGF0ZVwiKTtcbiAgICAgICAgcmV0dXJuIFtcIlwiLCBudWxsXTtcbiAgICB9XG59XG5cbi8qKlxuICogZGF0ZVVJRCBpcyBhIHdheSBvZiB3ZWVrbHkgaWRlbnRpZnlpbmcgZGFpbHkvd2Vla2x5L21vbnRobHkgbm90ZXMuXG4gKiBUaGV5IGFyZSBwcmVmaXhlZCB3aXRoIHRoZSBncmFudWxhcml0eSB0byBhdm9pZCBhbWJpZ3VpdHkuXG4gKi9cbmZ1bmN0aW9uIGdldERhdGVVSUQoZGF0ZSwgZ3JhbnVsYXJpdHkgPSBcImRheVwiKSB7XG4gICAgY29uc3QgdHMgPSBkYXRlLmNsb25lKCkuc3RhcnRPZihncmFudWxhcml0eSkuZm9ybWF0KCk7XG4gICAgcmV0dXJuIGAke2dyYW51bGFyaXR5fS0ke3RzfWA7XG59XG5mdW5jdGlvbiByZW1vdmVFc2NhcGVkQ2hhcmFjdGVycyhmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xcW1teXFxdXSpcXF0vZywgXCJcIik7IC8vIHJlbW92ZSBldmVyeXRoaW5nIHdpdGhpbiBicmFja2V0c1xufVxuLyoqXG4gKiBYWFg6IFdoZW4gcGFyc2luZyBkYXRlcyB0aGF0IGNvbnRhaW4gYm90aCB3ZWVrIG51bWJlcnMgYW5kIG1vbnRocyxcbiAqIE1vbWVudCBjaG9zZXMgdG8gaWdub3JlIHRoZSB3ZWVrIG51bWJlcnMuIEZvciB0aGUgd2VlayBkYXRlVUlELCB3ZVxuICogd2FudCB0aGUgb3Bwb3NpdGUgYmVoYXZpb3IuIFN0cmlwIHRoZSBNTU0gZnJvbSB0aGUgZm9ybWF0IHRvIHBhdGNoLlxuICovXG5mdW5jdGlvbiBpc0Zvcm1hdEFtYmlndW91cyhmb3JtYXQsIGdyYW51bGFyaXR5KSB7XG4gICAgaWYgKGdyYW51bGFyaXR5ID09PSBcIndlZWtcIikge1xuICAgICAgICBjb25zdCBjbGVhbkZvcm1hdCA9IHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCk7XG4gICAgICAgIHJldHVybiAoL3d7MSwyfS9pLnRlc3QoY2xlYW5Gb3JtYXQpICYmXG4gICAgICAgICAgICAoL017MSw0fS8udGVzdChjbGVhbkZvcm1hdCkgfHwgL0R7MSw0fS8udGVzdChjbGVhbkZvcm1hdCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21GaWxlKGZpbGUsIGdyYW51bGFyaXR5KSB7XG4gICAgcmV0dXJuIGdldERhdGVGcm9tRmlsZW5hbWUoZmlsZS5iYXNlbmFtZSwgZ3JhbnVsYXJpdHkpO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21QYXRoKHBhdGgsIGdyYW51bGFyaXR5KSB7XG4gICAgcmV0dXJuIGdldERhdGVGcm9tRmlsZW5hbWUoYmFzZW5hbWUocGF0aCksIGdyYW51bGFyaXR5KTtcbn1cbmZ1bmN0aW9uIGdldERhdGVGcm9tRmlsZW5hbWUoZmlsZW5hbWUsIGdyYW51bGFyaXR5KSB7XG4gICAgY29uc3QgZ2V0U2V0dGluZ3MgPSB7XG4gICAgICAgIGRheTogZ2V0RGFpbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHdlZWs6IGdldFdlZWtseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgbW9udGg6IGdldE1vbnRobHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHF1YXJ0ZXI6IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgeWVhcjogZ2V0WWVhcmx5Tm90ZVNldHRpbmdzLFxuICAgIH07XG4gICAgY29uc3QgZm9ybWF0ID0gZ2V0U2V0dGluZ3NbZ3JhbnVsYXJpdHldKCkuZm9ybWF0LnNwbGl0KFwiL1wiKS5wb3AoKTtcbiAgICBjb25zdCBub3RlRGF0ZSA9IHdpbmRvdy5tb21lbnQoZmlsZW5hbWUsIGZvcm1hdCwgdHJ1ZSk7XG4gICAgaWYgKCFub3RlRGF0ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChpc0Zvcm1hdEFtYmlndW91cyhmb3JtYXQsIGdyYW51bGFyaXR5KSkge1xuICAgICAgICBpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbkZvcm1hdCA9IHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCk7XG4gICAgICAgICAgICBpZiAoL3d7MSwyfS9pLnRlc3QoY2xlYW5Gb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5tb21lbnQoZmlsZW5hbWUsIFxuICAgICAgICAgICAgICAgIC8vIElmIGZvcm1hdCBjb250YWlucyB3ZWVrLCByZW1vdmUgZGF5ICYgbW9udGggZm9ybWF0dGluZ1xuICAgICAgICAgICAgICAgIGZvcm1hdC5yZXBsYWNlKC9NezEsNH0vZywgXCJcIikucmVwbGFjZSgvRHsxLDR9L2csIFwiXCIpLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vdGVEYXRlO1xufVxuXG5jbGFzcyBEYWlseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVEYWlseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IGFwcCA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gYXBwO1xuICAgIGNvbnN0IG1vbWVudCA9IHdpbmRvdy5tb21lbnQ7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldERhaWx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgbW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqeWVzdGVyZGF5XFxzKn19L2dpLCBkYXRlLmNsb25lKCkuc3VidHJhY3QoMSwgXCJkYXlcIikuZm9ybWF0KGZvcm1hdCkpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdG9tb3Jyb3dcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5hZGQoMSwgXCJkXCIpLmZvcm1hdChmb3JtYXQpKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldERhaWx5Tm90ZShkYXRlLCBkYWlseU5vdGVzKSB7XG4gICAgcmV0dXJuIGRhaWx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcImRheVwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbERhaWx5Tm90ZXMoKSB7XG4gICAgLyoqXG4gICAgICogRmluZCBhbGwgZGFpbHkgbm90ZXMgaW4gdGhlIGRhaWx5IG5vdGUgZm9sZGVyXG4gICAgICovXG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBkYWlseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCFkYWlseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBEYWlseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgZGFpbHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBjb25zdCBkYWlseU5vdGVzID0ge307XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKGRhaWx5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJkYXlcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwiZGF5XCIpO1xuICAgICAgICAgICAgICAgIGRhaWx5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhaWx5Tm90ZXM7XG59XG5cbmNsYXNzIFdlZWtseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuZnVuY3Rpb24gZ2V0RGF5c09mV2VlaygpIHtcbiAgICBjb25zdCB7IG1vbWVudCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbGV0IHdlZWtTdGFydCA9IG1vbWVudC5sb2NhbGVEYXRhKCkuX3dlZWsuZG93O1xuICAgIGNvbnN0IGRheXNPZldlZWsgPSBbXG4gICAgICAgIFwic3VuZGF5XCIsXG4gICAgICAgIFwibW9uZGF5XCIsXG4gICAgICAgIFwidHVlc2RheVwiLFxuICAgICAgICBcIndlZG5lc2RheVwiLFxuICAgICAgICBcInRodXJzZGF5XCIsXG4gICAgICAgIFwiZnJpZGF5XCIsXG4gICAgICAgIFwic2F0dXJkYXlcIixcbiAgICBdO1xuICAgIHdoaWxlICh3ZWVrU3RhcnQpIHtcbiAgICAgICAgZGF5c09mV2Vlay5wdXNoKGRheXNPZldlZWsuc2hpZnQoKSk7XG4gICAgICAgIHdlZWtTdGFydC0tO1xuICAgIH1cbiAgICByZXR1cm4gZGF5c09mV2Vlaztcbn1cbmZ1bmN0aW9uIGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vla05hbWUpIHtcbiAgICByZXR1cm4gZ2V0RGF5c09mV2VlaygpLmluZGV4T2YoZGF5T2ZXZWVrTmFtZS50b0xvd2VyQ2FzZSgpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdlZWtseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldFdlZWtseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKHN1bmRheXxtb25kYXl8dHVlc2RheXx3ZWRuZXNkYXl8dGh1cnNkYXl8ZnJpZGF5fHNhdHVyZGF5KVxccyo6KC4qPyl9fS9naSwgKF8sIGRheU9mV2VlaywgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXkgPSBnZXREYXlPZldlZWtOdW1lcmljYWxWYWx1ZShkYXlPZldlZWspO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGUud2Vla2RheShkYXkpLmZvcm1hdChtb21lbnRGb3JtYXQudHJpbSgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0V2Vla2x5Tm90ZShkYXRlLCB3ZWVrbHlOb3Rlcykge1xuICAgIHJldHVybiB3ZWVrbHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwid2Vla1wiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFdlZWtseU5vdGVzKCkge1xuICAgIGNvbnN0IHdlZWtseU5vdGVzID0ge307XG4gICAgaWYgKCFhcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiB3ZWVrbHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3Qgd2Vla2x5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXdlZWtseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBXZWVrbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHdlZWtseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbih3ZWVrbHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcIndlZWtcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwid2Vla1wiKTtcbiAgICAgICAgICAgICAgICB3ZWVrbHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gd2Vla2x5Tm90ZXM7XG59XG5cbmNsYXNzIE1vbnRobHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlTW9udGhseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRNb250aGx5Tm90ZShkYXRlLCBtb250aGx5Tm90ZXMpIHtcbiAgICByZXR1cm4gbW9udGhseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJtb250aFwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbE1vbnRobHlOb3RlcygpIHtcbiAgICBjb25zdCBtb250aGx5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiBtb250aGx5Tm90ZXM7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBtb250aGx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIW1vbnRobHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgTW9udGhseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgbW9udGhseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihtb250aGx5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJtb250aFwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJtb250aFwiKTtcbiAgICAgICAgICAgICAgICBtb250aGx5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1vbnRobHlOb3Rlcztcbn1cblxuY2xhc3MgUXVhcnRlcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVF1YXJ0ZXJseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFF1YXJ0ZXJseU5vdGUoZGF0ZSwgcXVhcnRlcmx5KSB7XG4gICAgcmV0dXJuIHF1YXJ0ZXJseVtnZXREYXRlVUlEKGRhdGUsIFwicXVhcnRlclwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFF1YXJ0ZXJseU5vdGVzKCkge1xuICAgIGNvbnN0IHF1YXJ0ZXJseSA9IHt9O1xuICAgIGlmICghYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4gcXVhcnRlcmx5O1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBxdWFydGVybHlGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXF1YXJ0ZXJseUZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgUXVhcnRlcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBxdWFydGVybHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4ocXVhcnRlcmx5Rm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwicXVhcnRlclwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJxdWFydGVyXCIpO1xuICAgICAgICAgICAgICAgIHF1YXJ0ZXJseVtkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcXVhcnRlcmx5O1xufVxuXG5jbGFzcyBZZWFybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlWWVhcmx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0WWVhcmx5Tm90ZShkYXRlLCB5ZWFybHlOb3Rlcykge1xuICAgIHJldHVybiB5ZWFybHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwieWVhclwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFllYXJseU5vdGVzKCkge1xuICAgIGNvbnN0IHllYXJseU5vdGVzID0ge307XG4gICAgaWYgKCFhcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiB5ZWFybHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgeWVhcmx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXllYXJseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBZZWFybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHllYXJseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbih5ZWFybHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcInllYXJcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwieWVhclwiKTtcbiAgICAgICAgICAgICAgICB5ZWFybHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4geWVhcmx5Tm90ZXM7XG59XG5cbmZ1bmN0aW9uIGFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IGRhaWx5Tm90ZXNQbHVnaW4gPSBhcHAuaW50ZXJuYWxQbHVnaW5zLnBsdWdpbnNbXCJkYWlseS1ub3Rlc1wiXTtcbiAgICBpZiAoZGFpbHlOb3Rlc1BsdWdpbiAmJiBkYWlseU5vdGVzUGx1Z2luLmVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LmRhaWx5Py5lbmFibGVkO1xufVxuLyoqXG4gKiBYWFg6IFwiV2Vla2x5IE5vdGVzXCIgbGl2ZSBpbiBlaXRoZXIgdGhlIENhbGVuZGFyIHBsdWdpbiBvciB0aGUgcGVyaW9kaWMtbm90ZXMgcGx1Z2luLlxuICogQ2hlY2sgYm90aCB1bnRpbCB0aGUgd2Vla2x5IG5vdGVzIGZlYXR1cmUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBDYWxlbmRhciBwbHVnaW4uXG4gKi9cbmZ1bmN0aW9uIGFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwiY2FsZW5kYXJcIikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LndlZWtseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/Lm1vbnRobHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LnF1YXJ0ZXJseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ueWVhcmx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gZ2V0UGVyaW9kaWNOb3RlU2V0dGluZ3MoZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgZGF5OiBnZXREYWlseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgd2VlazogZ2V0V2Vla2x5Tm90ZVNldHRpbmdzLFxuICAgICAgICBtb250aDogZ2V0TW9udGhseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgcXVhcnRlcjogZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB5ZWFyOiBnZXRZZWFybHlOb3RlU2V0dGluZ3MsXG4gICAgfVtncmFudWxhcml0eV07XG4gICAgcmV0dXJuIGdldFNldHRpbmdzKCk7XG59XG5mdW5jdGlvbiBjcmVhdGVQZXJpb2RpY05vdGUoZ3JhbnVsYXJpdHksIGRhdGUpIHtcbiAgICBjb25zdCBjcmVhdGVGbiA9IHtcbiAgICAgICAgZGF5OiBjcmVhdGVEYWlseU5vdGUsXG4gICAgICAgIG1vbnRoOiBjcmVhdGVNb250aGx5Tm90ZSxcbiAgICAgICAgd2VlazogY3JlYXRlV2Vla2x5Tm90ZSxcbiAgICB9O1xuICAgIHJldHVybiBjcmVhdGVGbltncmFudWxhcml0eV0oZGF0ZSk7XG59XG5cbmV4cG9ydHMuREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuY3JlYXRlRGFpbHlOb3RlID0gY3JlYXRlRGFpbHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVNb250aGx5Tm90ZSA9IGNyZWF0ZU1vbnRobHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVQZXJpb2RpY05vdGUgPSBjcmVhdGVQZXJpb2RpY05vdGU7XG5leHBvcnRzLmNyZWF0ZVF1YXJ0ZXJseU5vdGUgPSBjcmVhdGVRdWFydGVybHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVXZWVrbHlOb3RlID0gY3JlYXRlV2Vla2x5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlWWVhcmx5Tm90ZSA9IGNyZWF0ZVllYXJseU5vdGU7XG5leHBvcnRzLmdldEFsbERhaWx5Tm90ZXMgPSBnZXRBbGxEYWlseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxNb250aGx5Tm90ZXMgPSBnZXRBbGxNb250aGx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFF1YXJ0ZXJseU5vdGVzID0gZ2V0QWxsUXVhcnRlcmx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFdlZWtseU5vdGVzID0gZ2V0QWxsV2Vla2x5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFllYXJseU5vdGVzID0gZ2V0QWxsWWVhcmx5Tm90ZXM7XG5leHBvcnRzLmdldERhaWx5Tm90ZSA9IGdldERhaWx5Tm90ZTtcbmV4cG9ydHMuZ2V0RGFpbHlOb3RlU2V0dGluZ3MgPSBnZXREYWlseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0RGF0ZUZyb21GaWxlID0gZ2V0RGF0ZUZyb21GaWxlO1xuZXhwb3J0cy5nZXREYXRlRnJvbVBhdGggPSBnZXREYXRlRnJvbVBhdGg7XG5leHBvcnRzLmdldERhdGVVSUQgPSBnZXREYXRlVUlEO1xuZXhwb3J0cy5nZXRNb250aGx5Tm90ZSA9IGdldE1vbnRobHlOb3RlO1xuZXhwb3J0cy5nZXRNb250aGx5Tm90ZVNldHRpbmdzID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0UGVyaW9kaWNOb3RlU2V0dGluZ3MgPSBnZXRQZXJpb2RpY05vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0UXVhcnRlcmx5Tm90ZSA9IGdldFF1YXJ0ZXJseU5vdGU7XG5leHBvcnRzLmdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncyA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0VGVtcGxhdGVJbmZvID0gZ2V0VGVtcGxhdGVJbmZvO1xuZXhwb3J0cy5nZXRXZWVrbHlOb3RlID0gZ2V0V2Vla2x5Tm90ZTtcbmV4cG9ydHMuZ2V0V2Vla2x5Tm90ZVNldHRpbmdzID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRZZWFybHlOb3RlID0gZ2V0WWVhcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0WWVhcmx5Tm90ZVNldHRpbmdzID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzO1xuIiwgImltcG9ydCB7XG5cdFBsdWdpbixcblx0bW9tZW50LFxuXHRBcHAsXG5cdFBsdWdpblNldHRpbmdUYWIsXG5cdFNldHRpbmcsXG5cdEJ1dHRvbkNvbXBvbmVudCxcblx0ZWRpdG9ySW5mb0ZpZWxkLFxufSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENvbmZpcm1hdGlvbk1vZGFsIH0gZnJvbSBcIi4vbW9kYWxcIjtcbmltcG9ydCB7IHVwZGF0ZVNlY3Rpb24gfSBmcm9tIFwiLi9maWxlVXRpbHNcIjtcbmltcG9ydCB7XG5cdGNyZWF0ZURhaWx5Tm90ZSxcblx0Z2V0QWxsRGFpbHlOb3Rlcyxcblx0Z2V0RGFpbHlOb3RlLFxufSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBmaWVsZFR5cGUgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5pbnRlcmZhY2UgSVJldmlld1NldHRpbmdzIHtcblx0cXVlc3Rpb25zOiBbc3RyaW5nLCBmaWVsZFR5cGVdW107XG5cdGRhaWx5Tm90ZXNGb2xkZXI6IHN0cmluZztcblx0cHJvbXB0U2VjdGlvbkhlYWRpbmc6IHN0cmluZztcblx0bGluZVByZWZpeDogc3RyaW5nO1xuXHRpbmNsdWRlUXVlc3Rpb25zOiBib29sZWFuO1xuXHRxdWVzdGlvblN0eWxlOiBcIkJvbGRcIiB8IFwiTm8gc3R5bGVcIjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogSVJldmlld1NldHRpbmdzID0ge1xuXHRxdWVzdGlvbnM6IFtbXCJFeGFtcGxlIHByb21wdFwiLCBmaWVsZFR5cGUuVGV4dF1dLFxuXHRkYWlseU5vdGVzRm9sZGVyOiBcIlwiLFxuXHRwcm9tcHRTZWN0aW9uSGVhZGluZzogXCIjIyBQcm9tcHRzXCIsXG5cdGxpbmVQcmVmaXg6IFwiXCIsXG5cdGluY2x1ZGVRdWVzdGlvbnM6IHRydWUsXG5cdHF1ZXN0aW9uU3R5bGU6IFwiQm9sZFwiLFxufTtcblxuZGVjbGFyZSBnbG9iYWwge1xuXHRpbnRlcmZhY2UgV2luZG93IHtcblx0XHRtb21lbnQ6IHR5cGVvZiBtb21lbnQ7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGFpbHlQcm9tcHRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogSVJldmlld1NldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKSxcblx0XHQpO1xuXHRcdGNvbnNvbGUubG9nKFwiRGFpbHkgUHJvbXB0IHBsdWdpbiBsb2FkZWRcIik7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1wcm9tcHRcIixcblx0XHRcdG5hbWU6IFwiT3BlbiBwcm9tcHRcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHRoaXMub3BlblByb21wdCgpLCAyMCksXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IERhaWx5UHJvbXB0U2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiRGFpbHkgUHJvbXB0IFBsdWdpbiB1bmxvYWRlZFwiKTtcblx0fVxuXG5cdGFzeW5jIG9wZW5Qcm9tcHQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgcXVlc3Rpb25zID0gdGhpcy5zZXR0aW5ncy5xdWVzdGlvbnNcblx0XHRcdC5tYXAoKFtxdWVzdGlvbiwgX10pID0+IHF1ZXN0aW9uKSAvLyBFeHRyYWN0IG9ubHkgdGhlIHF1ZXN0aW9uIHN0cmluZ3Ncblx0XHRcdC5qb2luKFwiXFxuXCIpO1xuXHRcdG5ldyBDb25maXJtYXRpb25Nb2RhbCh0aGlzLmFwcCwge1xuXHRcdFx0Y3RhOiBcIkFjY2VwdFwiLFxuXHRcdFx0b25BY2NlcHQ6IGFzeW5jIChhbnN3ZXJzOiBzdHJpbmdbXSkgPT4ge1xuXHRcdFx0XHR0aGlzLmZpbGxEYWlseU5vdGUoYW5zd2Vycyk7XG5cdFx0XHR9LFxuXHRcdFx0b25DYW5jZWw6ICgpID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJQcm9tcHQgY2FuY2VsZWRcIik7XG5cdFx0XHR9LFxuXHRcdFx0dGV4dDogcXVlc3Rpb25zLFxuXHRcdFx0dGl0bGU6IFwiUHJvbXB0XCIsXG5cdFx0XHRzZXR0aW5nczogdGhpcy5zZXR0aW5ncy5xdWVzdGlvbnMsXG5cdFx0fSkub3BlbigpO1xuXHR9XG5cblx0YXN5bmMgZmlsbERhaWx5Tm90ZShhbnN3ZXJzOiBzdHJpbmdbXSkge1xuXHRcdGNvbnN0IGRhdGUgPSBtb21lbnQoKTtcblx0XHRjb25zdCBkYWlseU5vdGVzID0gZ2V0QWxsRGFpbHlOb3RlcygpO1xuXHRcdGxldCBkYWlseU5vdGUgPSBnZXREYWlseU5vdGUoZGF0ZSwgZGFpbHlOb3Rlcyk7XG5cblx0XHRpZiAoIWRhaWx5Tm90ZSkge1xuXHRcdFx0ZGFpbHlOb3RlID0gYXdhaXQgY3JlYXRlRGFpbHlOb3RlKGRhdGUpO1xuXHRcdH1cblxuXHRcdGxldCByZXN1bHRTdHJpbmcgPSBcIlwiO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZXR0aW5ncy5xdWVzdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHF1ZXN0aW9uID0gdGhpcy5zZXR0aW5ncy5xdWVzdGlvbnNbaV1bMF07XG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5pbmNsdWRlUXVlc3Rpb25zKSB7XG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnF1ZXN0aW9uU3R5bGUgPT09IFwiQm9sZFwiKSB7XG5cdFx0XHRcdFx0cmVzdWx0U3RyaW5nICs9IFwiKipcIiArIHF1ZXN0aW9uICsgXCIqKlxcblwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlc3VsdFN0cmluZyArPSBxdWVzdGlvbiArIFwiXFxuXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHN3aXRjaCAodGhpcy5zZXR0aW5ncy5xdWVzdGlvbnNbaV1bMV0pIHtcblx0XHRcdFx0Y2FzZSBmaWVsZFR5cGUuTm90ZTpcblx0XHRcdFx0XHRyZXN1bHRTdHJpbmcgKz0gXCJbW1wiICsgYW5zd2Vyc1tpXSArIFwiXV1cIiArIFwiXFxuXFxuXCI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgZmllbGRUeXBlLkVtYmVkZGVkTm90ZUZpbGU6XG5cdFx0XHRcdFx0cmVzdWx0U3RyaW5nICs9IFwiIVtbXCIgKyBhbnN3ZXJzW2ldICsgXCJdXVwiICsgXCJcXG5cXG5cIjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBmaWVsZFR5cGUuQ2hlY2tib3g6XG5cdFx0XHRcdFx0cmVzdWx0U3RyaW5nICs9XG5cdFx0XHRcdFx0XHQoYW5zd2Vyc1tpXSA9PSBcInRydWVcIiA/IFwiWWVzXCIgOiBcIk5vXCIpICsgXCJcXG5cXG5cIjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBmaWVsZFR5cGUuU2xpZGVyOlxuXHRcdFx0XHRjYXNlIGZpZWxkVHlwZS5UZXh0QXJlYTpcblx0XHRcdFx0XHRyZXN1bHRTdHJpbmcgKz0gYW5zd2Vyc1tpXSArIFwiXFxuXFxuXCI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Ly8gVGhlIHJlbWFpbmluZyBmaWVsZCB0eXBlcyAodGV4dClcblx0XHRcdFx0XHRyZXN1bHRTdHJpbmcgKz1cblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MubGluZVByZWZpeCArIGFuc3dlcnNbaV0gKyBcIlxcblxcblwiO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGF3YWl0IHVwZGF0ZVNlY3Rpb24oXG5cdFx0XHR0aGlzLmFwcCxcblx0XHRcdGRhaWx5Tm90ZSxcblx0XHRcdHRoaXMuc2V0dGluZ3MucHJvbXB0U2VjdGlvbkhlYWRpbmcsXG5cdFx0XHRyZXN1bHRTdHJpbmcsXG5cdFx0KTtcblx0fVxufVxuXG5jbGFzcyBEYWlseVByb21wdFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogRGFpbHlQcm9tcHRQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRGFpbHlQcm9tcHRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29uc3QgcGx1Z2luOiBhbnkgPSAodGhpcyBhcyBhbnkpLnBsdWdpbjtcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiUHJvbXB0IHNlY3Rpb24gaGVhZGluZ1wiKVxuXHRcdFx0LnNldERlc2MoXG5cdFx0XHRcdFwiRGVmaW5lIHRoZSBoZWFkaW5nIHRvIHVzZSBmb3IgdGhlIHByb21wdHMuIE5PVEU6IE11c3QgYmUgdW5pcXVlIGZvciBldmVyeSBkYWlseSBub3RlLlwiLFxuXHRcdFx0KVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIjIyBQcm9tcHRzXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5wcm9tcHRTZWN0aW9uSGVhZGluZylcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAodmFsdWUgPT09IFwiXCIpIHtcblx0XHRcdFx0XHRcdFx0cGx1Z2luLnNldHRpbmdzLnByb21wdFNlY3Rpb25IZWFkaW5nID0gXCIjIyBQcm9tcHRzXCI7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MucHJvbXB0U2VjdGlvbkhlYWRpbmcgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuXHRcdFx0XHRcdH0pLFxuXHRcdFx0KTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiTGluZSBwcmVmaXhcIilcblx0XHRcdC5zZXREZXNjKFxuXHRcdFx0XHRcIlByZWZpeCBmb3IgZWFjaCBuZXcgbGluZSwgaW5jbHVkZSB0aGUgdHJhaWxpbmcgc3BhY2VzLiBPbmx5IHdvcmtzIGZvciBmaWVsZCB0eXBlIHRleHQuIEV4YW1wbGVzOiBgLSBgIGZvciBsaXN0cyBvciBgLSBbIF0gYCBmb3IgdGFza3MuXCIsXG5cdFx0XHQpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIlwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MubGluZVByZWZpeClcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MubGluZVByZWZpeCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0cGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0fSksXG5cdFx0XHQpO1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJJbmNsdWRlIHF1ZXN0aW9uc1wiKVxuXHRcdFx0LnNldERlc2MoXCJEZWNpZGUgaWYgcXVlc3Rpb25zIHdpbGwgYmUgd3JpdHRlbiB0byB0aGUgZGFpbHkgbm90ZS5cIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmluY2x1ZGVRdWVzdGlvbnMpO1xuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0cGx1Z2luLnNldHRpbmdzLmluY2x1ZGVRdWVzdGlvbnMgPSB2YWx1ZTtcblx0XHRcdFx0XHRwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiUXVlc3Rpb25zIHN0eWxlXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkRlY2lkZSBpbiB3aGF0IHN0eWxlIHRoZSBxdWVzdGlvbnMgc2hvdWxkIGJlIGRpc3BsYXllZC5cIilcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFwiQm9sZFwiLCBcIkJvbGQgKCoqKVwiKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFwiTm8gc3R5bGVcIiwgXCJObyBzdHlsZVwiKTtcblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnF1ZXN0aW9uU3R5bGUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0cGx1Z2luLnNldHRpbmdzLnF1ZXN0aW9uU3R5bGUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpLnNldE5hbWUoXCJQcm9tcHRzXCIpLnNldEhlYWRpbmcoKTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiUHJvbXB0c1wiKVxuXHRcdFx0LnNldERlc2MoXCJBZGQgYW5kIGVkaXQgbmV3IHByb21wdHMgaGVyZVwiKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uOiBCdXR0b25Db21wb25lbnQpID0+IHtcblx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJBZGQgcHJvbXB0XCIpLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdHBsdWdpbi5zZXR0aW5ncy5xdWVzdGlvbnMucHVzaChbXCJcIiwgXCJUZXh0XCJdKTtcblx0XHRcdFx0XHRwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBsdWdpbi5zZXR0aW5ncy5xdWVzdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IFtxdWVzdGlvbiwgZmllbGRUeXBlXSA9IHBsdWdpbi5zZXR0aW5ncy5xdWVzdGlvbnNbaV07XG5cdFx0XHRjb25zdCBjcmVhdGVTZXR0aW5nID0gKHF1ZXN0aW9uSW5kZXg6IG51bWJlcikgPT4ge1xuXHRcdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdFx0XHQuc2V0TmFtZShcIlByb21wdCAjXCIgKyAocXVlc3Rpb25JbmRleCArIDEpKVxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoXG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luLnNldHRpbmdzLnF1ZXN0aW9uc1txdWVzdGlvbkluZGV4XVswXSxcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luLnNldHRpbmdzLnF1ZXN0aW9uc1txdWVzdGlvbkluZGV4XVswXSA9XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG5cdFx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKGZpZWxkVHlwZS5UZXh0LCBcIlRleHRcIilcblx0XHRcdFx0XHRcdFx0LmFkZE9wdGlvbihmaWVsZFR5cGUuTm90ZSwgXCJOb3RlXCIpXG5cdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oXG5cdFx0XHRcdFx0XHRcdFx0ZmllbGRUeXBlLkVtYmVkZGVkTm90ZUZpbGUsXG5cdFx0XHRcdFx0XHRcdFx0XCJFbWJlZGRlZCBOb3RlIC8gRmlsZVwiLFxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oZmllbGRUeXBlLkNoZWNrYm94LCBcIkNoZWNrYm94XCIpXG5cdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oZmllbGRUeXBlLlRleHRBcmVhLCBcIlRleHQgYXJlYVwiKVxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKGZpZWxkVHlwZS5TbGlkZXIsIFwiU2xpZGVyXCIpXG5cdFx0XHRcdFx0XHRcdC8vIC5hZGRPcHRpb24oZmllbGRUeXBlLk9wdGlvblNldCwgXCJPcHRpb24gU2V0XCIpXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShmaWVsZFR5cGUpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MucXVlc3Rpb25zW3F1ZXN0aW9uSW5kZXhdWzFdID1cblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdHBsdWdpbi5zYXZlRGF0YShwbHVnaW4uc2V0dGluZ3MpO1xuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRjb25zdCByZW1vdmVCdXR0b24gPSBjb250YWluZXJFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogXCJSZW1vdmVcIixcblx0XHRcdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRyZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdFx0XHRwbHVnaW4uc2V0dGluZ3MucXVlc3Rpb25zLnNwbGljZShxdWVzdGlvbkluZGV4LCAxKTtcblx0XHRcdFx0XHRwbHVnaW4uc2F2ZURhdGEocGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiYnJcIik7XG5cdFx0XHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiYnJcIik7XG5cdFx0XHR9O1xuXG5cdFx0XHRjcmVhdGVTZXR0aW5nKGkpO1xuXHRcdH1cblx0fVxufVxuIiwgImltcG9ydCB7XG5cdEFwcCxcblx0Ly8gRHJvcGRvd25Db21wb25lbnQsXG5cdE1vZGFsLFxuXHRTbGlkZXJDb21wb25lbnQsXG5cdFRleHRDb21wb25lbnQsXG5cdFRleHRBcmVhQ29tcG9uZW50LFxuXHRUb2dnbGVDb21wb25lbnQsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgZmllbGRUeXBlIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuaW50ZXJmYWNlIElDb25maXJtYXRpb25EaWFsb2dQYXJhbXMge1xuXHRjdGE6IHN0cmluZztcblx0b25BY2NlcHQ6ICh0ZXh0OiBzdHJpbmdbXSkgPT4gUHJvbWlzZTx2b2lkPjtcblx0b25DYW5jZWw/OiAoKSA9PiB2b2lkO1xuXHR0ZXh0OiBzdHJpbmc7XG5cdHRpdGxlOiBzdHJpbmc7XG5cdHF1ZXN0aW9uczogW3N0cmluZywgZmllbGRUeXBlXVtdO1xufVxuZXhwb3J0IGNsYXNzIENvbmZpcm1hdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwcml2YXRlIGNvbmZpZzogSUNvbmZpcm1hdGlvbkRpYWxvZ1BhcmFtcztcblx0cHJpdmF0ZSBhY2NlcHRlZDogYm9vbGVhbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgY29uZmlnOiBJQ29uZmlybWF0aW9uRGlhbG9nUGFyYW1zKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmNvbmZpZyA9IGNvbmZpZztcblxuXHRcdGNvbnN0IHsgY3RhLCB0ZXh0LCB0aXRsZSwgc2V0dGluZ3MgfSA9IGNvbmZpZztcblxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoXCJtb2QtY29uZmlybWF0aW9uXCIpO1xuXHRcdHRoaXMudGl0bGVFbC5zZXRUZXh0KHRpdGxlKTtcblxuXHRcdGNvbnN0IGNvbnRlbnRFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgcXVlc3Rpb24gPSBzZXR0aW5nc1tpXVswXTtcblx0XHRcdGNvbnN0IHR5cGUgPSBzZXR0aW5nc1tpXVsxXTtcblx0XHRcdGNvbnN0IHRleHRFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IHF1ZXN0aW9uIH0pO1xuXG5cdFx0XHRjb25zdCBpbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiKTtcblx0XHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0XHRjYXNlIGZpZWxkVHlwZS5UZXh0OlxuXHRcdFx0XHRcdG5ldyBUZXh0Q29tcG9uZW50KGlucHV0Q29udGFpbmVyKS5zZXRQbGFjZWhvbGRlcihcblx0XHRcdFx0XHRcdFwiWW91ciBBbnN3ZXJcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIGZpZWxkVHlwZS5DaGVja2JveDpcblx0XHRcdFx0XHRuZXcgVG9nZ2xlQ29tcG9uZW50KGlucHV0Q29udGFpbmVyKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBmaWVsZFR5cGUuRW1iZWRkZWROb3RlRmlsZTpcblx0XHRcdFx0Y2FzZSBmaWVsZFR5cGUuTm90ZTpcblx0XHRcdFx0XHRuZXcgVGV4dENvbXBvbmVudChpbnB1dENvbnRhaW5lcikuc2V0UGxhY2Vob2xkZXIoXG5cdFx0XHRcdFx0XHRcIkVudGVyIHRoZSBuYW1lIG9mIHRoZSBub3RlXCIsXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBmaWVsZFR5cGUuVGV4dEFyZWE6XG5cdFx0XHRcdFx0bmV3IFRleHRBcmVhQ29tcG9uZW50KGlucHV0Q29udGFpbmVyKS5zZXRQbGFjZWhvbGRlcihcblx0XHRcdFx0XHRcdFwiWW91ciBhbnN3ZXJcIixcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHQvLyBjYXNlIGZpZWxkVHlwZS5PcHRpb25TZXQ6XG5cdFx0XHRcdC8vIFx0bmV3IERyb3Bkb3duQ29tcG9uZW50KGlucHV0Q29udGFpbmVyKTtcblx0XHRcdFx0Ly8gXHRicmVhaztcblx0XHRcdFx0Y2FzZSBmaWVsZFR5cGUuU2xpZGVyOiB7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRcdFx0XHRjdXJyZW50VmFsdWVFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzbGlkZXJWYWx1ZVwiKTtcblx0XHRcdFx0XHRjdXJyZW50VmFsdWVFbGVtZW50LnR5cGUgPSBcIm51bWJlclwiOyAvLyBDaGFuZ2UgaW5wdXQgdHlwZSB0byBudW1iZXJcblx0XHRcdFx0XHRjdXJyZW50VmFsdWVFbGVtZW50LnZhbHVlID0gXCI1MFwiOyAvLyBTZXQgZGVmYXVsdCB2YWx1ZVxuXHRcdFx0XHRcdGN1cnJlbnRWYWx1ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpO1xuXHRcdFx0XHRcdFx0c2xpZGVyLnNldFZhbHVlKHZhbHVlKTsgLy8gVXBkYXRlIHNsaWRlciB2YWx1ZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGN1cnJlbnRWYWx1ZUVsZW1lbnQpO1xuXG5cdFx0XHRcdFx0Y29uc3Qgc2xpZGVyV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0XHRcdFx0aW5wdXRDb250YWluZXIuYXBwZW5kQ2hpbGQoc2xpZGVyV3JhcHBlcik7XG5cblx0XHRcdFx0XHRjb25zdCBzbGlkZXIgPSBuZXcgU2xpZGVyQ29tcG9uZW50KHNsaWRlcldyYXBwZXIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoNTApXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRWYWx1ZUVsZW1lbnQudmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRjb25zdCBzbGlkZXJJbnB1dCA9IHNsaWRlcldyYXBwZXIucXVlcnlTZWxlY3Rvcihcblx0XHRcdFx0XHRcdFwiaW5wdXRbdHlwZT0ncmFuZ2UnXVwiLFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0c2xpZGVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpO1xuXHRcdFx0XHRcdFx0Y3VycmVudFZhbHVlRWxlbWVudC52YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVuaGFuZGxlZCBmaWVsZFR5cGU6ICR7ZmllbGRUeXBlfWApO1xuXHRcdFx0fVxuXG5cdFx0XHRjb250ZW50RWwuYXBwZW5kQ2hpbGQodGV4dEVsKTtcblx0XHRcdGNvbnRlbnRFbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xuXHRcdFx0Y29udGVudEVsLmFwcGVuZENoaWxkKGlucHV0Q29udGFpbmVyKTtcblxuXHRcdFx0Ly8gQWRkIGEgaG9yaXpvbnRhbCBsaW5lIGlmIGl0J3Mgbm90IHRoZSBsYXN0IHF1ZXN0aW9uXG5cdFx0XHRpZiAoaSA8IHNldHRpbmdzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0Y29uc3QgaHIgPSBjb250ZW50RWwuY3JlYXRlRWwoXCJoclwiKTtcblx0XHRcdFx0Y29udGVudEVsLmFwcGVuZENoaWxkKGhyKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLmFkZEJ1dHRvbnMoY3RhKTtcblx0fVxuXG5cdC8vIHVwZGF0ZUFjY2VwdEJ1dHRvbigpIHtcblx0Ly8gXHRjb25zdCBhbGxJbnB1dHMgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKFxuXHQvLyBcdFx0XCJpbnB1dDpub3QoLnNsaWRlciksIGlucHV0W3R5cGU9J2NoZWNrYm94J10sIHRleHRhcmVhXCIsXG5cdC8vIFx0KTtcblx0Ly8gXHRjb25zdCBpc0FsbEZpbGxlZCA9IEFycmF5LmZyb20oYWxsSW5wdXRzKS5ldmVyeShcblx0Ly8gXHRcdChpbnB1dDogSFRNTElucHV0RWxlbWVudCkgPT4gaW5wdXQudmFsdWUudHJpbSgpICE9PSBcIlwiLFxuXHQvLyBcdCk7XG5cdC8vXG5cdC8vIFx0Y29uc3QgYWNjZXB0QnRuRWwgPSB0aGlzLm1vZGFsRWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcblx0Ly8gXHRcdFwibW9kLWN0YVwiLFxuXHQvLyBcdClbMV0gYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cdC8vXG5cdC8vIFx0aWYgKGlzQWxsRmlsbGVkKSB7XG5cdC8vIFx0XHRhY2NlcHRCdG5FbC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcblx0Ly8gXHR9IGVsc2Uge1xuXHQvLyBcdFx0YWNjZXB0QnRuRWwuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuXHQvLyBcdH1cblx0Ly8gfVxuXG5cdHByaXZhdGUgYWRkQnV0dG9ucyhjdGE6IHN0cmluZykge1xuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lckVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KFxuXHRcdFx0XCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIsXG5cdFx0KTtcblx0XHRjb25zdCBjYW5jZWxCdG5FbCA9IGJ1dHRvbkNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2FuY2VsXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgYWNjZXB0QnRuRWwgPSBidXR0b25Db250YWluZXJFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdFx0dGV4dDogY3RhLFxuXHRcdH0pO1xuXG5cdFx0YWNjZXB0QnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRjb25zdCBhbGxJbnB1dHMgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0XHRcImlucHV0Om5vdCguc2xpZGVyVmFsdWUpLCB0ZXh0YXJlYVwiLFxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IGFuc3dlcnMgPSBBcnJheS5mcm9tKGFsbElucHV0cykubWFwKChpbnB1dCkgPT4ge1xuXHRcdFx0XHRsZXQgdmFsdWU7XG5cdFx0XHRcdGlmIChpbnB1dC50eXBlID09PSBcImNoZWNrYm94XCIpIHtcblx0XHRcdFx0XHRjb25zdCBwYXJlbnREaXYgPSBpbnB1dC5jbG9zZXN0KFwiLmNoZWNrYm94LWNvbnRhaW5lclwiKTtcblx0XHRcdFx0XHQvLyBNdXN0IGNoZWNrIHRoZSBwYXJlbnQgZGl2J3MgY2xhc3MsIGJlY2F1c2UgdGhlIGlucHV0IHByb3BlcnR5IGRvZXNuJ3QgdXBkYXRlIG9uIGNoYW5nZVxuXHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdHBhcmVudERpdiAmJlxuXHRcdFx0XHRcdFx0cGFyZW50RGl2LmNsYXNzTGlzdC5jb250YWlucyhcImlzLWVuYWJsZWRcIilcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdHZhbHVlID0gXCJ0cnVlXCI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhbHVlID0gXCJmYWxzZVwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGlucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5hY2NlcHRlZCA9IHRydWU7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHR0aGlzLmNvbmZpZy5vbkFjY2VwdChhbnN3ZXJzKTtcblx0XHR9KTtcblxuXHRcdGNhbmNlbEJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0dGhpcy5jb25maWcub25DYW5jZWw/LigpO1xuXHRcdH0pO1xuXHR9XG5cblx0b25DbG9zZSgpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuYWNjZXB0ZWQpIHtcblx0XHRcdHRoaXMuY29uZmlnLm9uQ2FuY2VsPy4oKTtcblx0XHR9XG5cdH1cbn1cbiIsICJleHBvcnQgZW51bSBmaWVsZFR5cGUge1xuXHRUZXh0ID0gXCJUZXh0XCIsXG5cdENoZWNrYm94ID0gXCJDaGVja2JveFwiLFxuXHROb3RlID0gXCJOb3RlXCIsXG5cdEVtYmVkZGVkTm90ZUZpbGUgPSBcIkVtYmVkZGVkIE5vdGUgLyBGaWxlXCIsXG5cdFRleHRBcmVhID0gXCJUZXh0IGFyZWFcIixcblx0U2xpZGVyID0gXCJTbGlkZXJcIixcblx0Ly8gT3B0aW9uU2V0ID0gXCJPcHRpb24gU2V0XCIsXG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSBcImNvZGVtaXJyb3JcIjtcbmltcG9ydCB7IEFwcCwgTWFya2Rvd25WaWV3LCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWRpdG9yRm9yRmlsZShhcHA6IEFwcCwgZmlsZTogVEZpbGUpOiBFZGl0b3IgfCBudWxsIHtcbiAgbGV0IGVkaXRvciA9IG51bGw7XG4gIGFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbGVhZi52aWV3LmZpbGUgPT09IGZpbGUpIHtcbiAgICAgIGVkaXRvciA9IGxlYWYudmlldy5zb3VyY2VNb2RlLmNtRWRpdG9yO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBlZGl0b3I7XG59IiwgImltcG9ydCB7IGdldEVkaXRvckZvckZpbGUgfSBmcm9tIFwiLi9maWxlRWRpdG9yXCI7XG5pbXBvcnQgdHlwZSB7IEFwcCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhlYWRpbmdMZXZlbChsaW5lID0gXCJcIik6IG51bWJlciB8IG51bGwge1xuICBjb25zdCBoZWFkaW5nID0gbGluZS5tYXRjaCgvXigjezEsNn0pXFxzK1xcUy8pO1xuICByZXR1cm4gaGVhZGluZyA/IGhlYWRpbmdbMV0ubGVuZ3RoIDogbnVsbDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNlY3Rpb24oXG4gIGFwcDogQXBwLFxuICBmaWxlOiBURmlsZSxcbiAgaGVhZGluZzogc3RyaW5nLFxuICBzZWN0aW9uQ29udGVudHM6IHN0cmluZ1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGhlYWRpbmdMZXZlbCA9IGdldEhlYWRpbmdMZXZlbChoZWFkaW5nKTtcblxuICBjb25zdCB7IHZhdWx0IH0gPSBhcHA7XG4gIGNvbnN0IGZpbGVDb250ZW50cyA9IGF3YWl0IHZhdWx0LnJlYWQoZmlsZSk7XG4gIGNvbnN0IGZpbGVMaW5lcyA9IGZpbGVDb250ZW50cy5zcGxpdChcIlxcblwiKTtcblxuICBsZXQgbG9nYm9va1NlY3Rpb25MaW5lTnVtID0gLTE7XG4gIGxldCBuZXh0U2VjdGlvbkxpbmVOdW0gPSAtMTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChmaWxlTGluZXNbaV0udHJpbSgpID09PSBoZWFkaW5nKSB7XG4gICAgICBsb2dib29rU2VjdGlvbkxpbmVOdW0gPSBpO1xuICAgIH0gZWxzZSBpZiAobG9nYm9va1NlY3Rpb25MaW5lTnVtICE9PSAtMSkge1xuICAgICAgY29uc3QgY3VyckxldmVsID0gZ2V0SGVhZGluZ0xldmVsKGZpbGVMaW5lc1tpXSk7XG4gICAgICBpZiAoY3VyckxldmVsICYmIGN1cnJMZXZlbCA8PSBoZWFkaW5nTGV2ZWwpIHtcbiAgICAgICAgbmV4dFNlY3Rpb25MaW5lTnVtID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZWRpdG9yID0gZ2V0RWRpdG9yRm9yRmlsZShhcHAsIGZpbGUpO1xuICBpZiAoZWRpdG9yKSB7XG4gICAgaWYgKGxvZ2Jvb2tTZWN0aW9uTGluZU51bSAhPT0gLTEpIHtcbiAgICAgIGNvbnN0IGZyb20gPSB7IGxpbmU6IGxvZ2Jvb2tTZWN0aW9uTGluZU51bSArIDEsIGNoOiAwIH07IC8vIFN0YXJ0IGZyb20gbmV4dCBsaW5lIGFmdGVyIGhlYWRpbmdcbiAgICAgIGNvbnN0IHRvID1cbiAgICAgICAgbmV4dFNlY3Rpb25MaW5lTnVtICE9PSAtMVxuICAgICAgICAgID8geyBsaW5lOiBuZXh0U2VjdGlvbkxpbmVOdW0gLSAxLCBjaDogMCB9XG4gICAgICAgICAgOiB7IGxpbmU6IGZpbGVMaW5lcy5sZW5ndGgsIGNoOiAwIH07IC8vIEVuZCB0aWxsIGxhc3QgbGluZSBvciBiZWZvcmUgbmV4dCBzZWN0aW9uXG4gICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGAke3NlY3Rpb25Db250ZW50c31cXG5gLCBmcm9tLCB0byk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHBvcyA9IHsgbGluZTogZmlsZUxpbmVzLmxlbmd0aCwgY2g6IDAgfTsgLy8gSW5zZXJ0IGF0IHRoZSBlbmQgb2YgZmlsZVxuICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShgXFxuXFxuJHtzZWN0aW9uQ29udGVudHN9YCwgcG9zLCBwb3MpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsb2dib29rU2VjdGlvbkxpbmVOdW0gIT09IC0xKSB7XG4gICAgY29uc3QgcHJlZml4ID0gZmlsZUxpbmVzLnNsaWNlKDAsIGxvZ2Jvb2tTZWN0aW9uTGluZU51bSArIDEpOyAvLyBJbmNsdWRlIHRoZSBoZWFkaW5nIGxpbmVcbiAgICBjb25zdCBzdWZmaXggPVxuICAgICAgbmV4dFNlY3Rpb25MaW5lTnVtICE9PSAtMSA/IGZpbGVMaW5lcy5zbGljZShuZXh0U2VjdGlvbkxpbmVOdW0pIDogW107IC8vIEluY2x1ZGUgdGhlIG5leHQgc2VjdGlvblxuICAgIHJldHVybiB2YXVsdC5tb2RpZnkoXG4gICAgICBmaWxlLFxuICAgICAgWy4uLnByZWZpeCwgc2VjdGlvbkNvbnRlbnRzLCAuLi5zdWZmaXhdLmpvaW4oXCJcXG5cIilcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIHRoZSBzZWN0aW9uIGRvZXNuJ3QgZXhpc3QsIGFkZCBpdCBhdCB0aGUgZW5kIG9mIHRoZSBmaWxlXG4gICAgcmV0dXJuIHZhdWx0Lm1vZGlmeShmaWxlLCBbLi4uZmlsZUxpbmVzLCBcIlwiLCBoZWFkaW5nLCBzZWN0aW9uQ29udGVudHNdLmpvaW4oXCJcXG5cIikpO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBRUEsV0FBTyxlQUFlLFNBQVMs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Q2QsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUNGLGFBQVMsSUFBSSxHQUFHLElBQUksT0FBTyxTQUFTLFVBQVUsUUFBUSxLQUFLO0FBQzFELFlBQU0sQ0FBQyxVQUFVQyxVQUFTLElBQUksT0FBTyxTQUFTLFVBQVUsQ0FBQztBQUN6RCxZQUFNLGdCQUFnQixDQUFDLGtCQUEwQjtBQUNoRCxZQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSxjQUFjLGdCQUFnQixFQUFFLEVBQ3hDO0FBQUEsVUFBUSxDQUFDLFNBQ1QsS0FDRTtBQUFBLFlBQ0EsT0FBTyxTQUFTLFVBQVUsYUFBYSxFQUFFLENBQUM7QUFBQSxVQUMzQyxFQUNDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLG1CQUFPLFNBQVMsVUFBVSxhQUFhLEVBQUUsQ0FBQyxJQUN6QztBQUNELG1CQUFPLFNBQVMsT0FBTyxRQUFRO0FBQUEsVUFDaEMsQ0FBQztBQUFBLFFBQ0gsRUFDQztBQUFBLFVBQVksQ0FBQyxhQUNiLFNBQ0UsVUFBVUEsV0FBVSxNQUFNLE1BQU0sRUFDaEMsVUFBVUEsV0FBVSxNQUFNLE1BQU0sRUFDaEM7QUFBQSxZQUNBQSxXQUFVO0FBQUEsWUFDVjtBQUFBLFVBQ0QsRUFDQyxVQUFVQSxXQUFVLFVBQVUsVUFBVSxFQUN4QyxVQUFVQSxXQUFVLFVBQVUsV0FBVyxFQUN6QyxVQUFVQSxXQUFVLFFBQVEsUUFBUSxFQUVwQyxTQUFTQSxVQUFTLEVBQ2xCLFNBQVMsT0FBTyxVQUFVO0FBQzFCLG1CQUFPLFNBQVMsVUFBVSxhQUFhLEVBQUUsQ0FBQyxJQUN6QztBQUNELG1CQUFPLFNBQVMsT0FBTyxRQUFRO0FBQUEsVUFDaEMsQ0FBQztBQUFBLFFBQ0g7QUFDRCxjQUFNLGVBQWUsWUFBWSxTQUFTLFVBQVU7QUFBQSxVQUNuRCxNQUFNO0FBQUEsVUFDTixLQUFLO0FBQUEsUUFDTixDQUFDO0FBRUQscUJBQWEsaUJBQWlCLFNBQVMsTUFBTTtBQUM1QyxpQkFBTyxTQUFTLFVBQVUsT0FBTyxlQUFlLENBQUM7QUFDakQsaUJBQU8sU0FBUyxPQUFPLFFBQVE7QUFDL0IsZUFBSyxRQUFRO0FBQUEsUUFDZCxDQUFDO0FBQ0Qsb0JBQVksU0FBUyxJQUFJO0FBQ3pCLG9CQUFZLFNBQVMsSUFBSTtBQUFBLE1BQzFCO0FBRUEsb0JBQWMsQ0FBQztBQUFBLElBQ2hCO0FBQUEsRUFDRDtBQUNEOyIsCiAgIm5hbWVzIjogWyJmb3JtYXQiLCAiZm9sZGVyIiwgInRlbXBsYXRlIiwgImNyZWF0ZURhaWx5Tm90ZSIsICJtb21lbnQiLCAiZ2V0RGFpbHlOb3RlIiwgImdldEFsbERhaWx5Tm90ZXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImZpZWxkVHlwZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZmllbGRUeXBlIl0KfQo=
