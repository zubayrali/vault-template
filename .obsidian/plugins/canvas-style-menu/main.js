/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  csIconList: () => csIconList,
  default: () => CanvasStyleMenuPlugin2,
  defaultSettings: () => defaultSettings,
  savedSettings: () => savedSettings
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// node_modules/monkey-around/mjs/index.js
function around(obj, factories) {
  const removers = Object.keys(factories).map((key) => around1(obj, key, factories[key]));
  return removers.length === 1 ? removers[0] : function() {
    removers.forEach((r) => r());
  };
}
function around1(obj, method, createWrapper) {
  const original = obj[method], hadOwn = obj.hasOwnProperty(method);
  let current = createWrapper(original);
  if (original)
    Object.setPrototypeOf(current, original);
  Object.setPrototypeOf(wrapper, current);
  obj[method] = wrapper;
  return remove;
  function wrapper(...args) {
    if (current === original && obj[method] === wrapper)
      remove();
    return current.apply(this, args);
  }
  function remove() {
    if (obj[method] === wrapper) {
      if (hadOwn)
        obj[method] = original;
      else
        delete obj[method];
    }
    if (current === original)
      return;
    current = original;
    Object.setPrototypeOf(wrapper, original || Function);
  }
}

// src/CanvasStyle.ts
var import_obsidian = require("obsidian");

// src/utils.ts
var import_fs = __toESM(require("fs"));
var import_path = __toESM(require("path"));
var handleMultiNodes = (canvas, allNodes, subMenuConfig, menuItemType, cssClass, onRightClick) => {
  const nodes = allNodes ? Array.from(canvas.nodes.values()) : Array.from(canvas.selection);
  const canvasData = canvas.getData();
  if (nodes && nodes.length > 0) {
    for (const node of nodes) {
      const nodeData = canvasData.nodes.find((t) => t.id === node.id);
      if (subMenuConfig === null) {
        property = menuItemType;
      } else
        property = generateClassToPropertyMap(subMenuConfig, cssClass);
      if (property && nodeData) {
        if (onRightClick) {
          delete nodeData[property];
        } else
          nodeData[property] = cssClass;
      }
    }
    canvas.setData(canvasData);
  }
  canvas.requestSave(true, true);
  canvas.requestFrame();
};
var handleMultiNodesViaNodes = (canvas, nodes, subMenuConfig, menuItemType, cssClass, onRightClick) => {
  const canvasData = canvas.getData();
  if (nodes && nodes.length > 0) {
    for (const node of nodes) {
      const nodeData = canvasData.nodes.find((t) => t.id === node.id);
      if (subMenuConfig === null) {
        property = menuItemType;
      } else
        property = generateClassToPropertyMap(subMenuConfig, cssClass);
      if (property && nodeData) {
        if (onRightClick) {
          delete nodeData[property];
        } else
          nodeData[property] = cssClass;
      }
    }
    canvas.setData(canvasData);
  }
  canvas.requestSave(true, true);
};
var handleSingleNode = (node, subMenuConfig, menuItemType, cssClass, onRightClick) => {
  const canvasData = node.canvas.getData();
  const nodeData = canvasData.nodes.find((t) => t.id === node.id);
  const edgeData = canvasData.edges.find((t) => t.id === node.id);
  if (subMenuConfig === null) {
    property = menuItemType;
  } else
    property = generateClassToPropertyMap(subMenuConfig, cssClass);
  if (property && nodeData) {
    if (onRightClick) {
      delete nodeData[property];
    } else
      nodeData[property] = cssClass;
  }
  if (property && edgeData) {
    if (onRightClick) {
      delete edgeData[property];
    } else
      edgeData[property] = cssClass;
  }
  node.canvas.setData(canvasData);
  node.canvas.requestSave(true, true);
};
var createHandleContextMenu = (section, menuConfig, subMenuConfig, toggleMenu, callback) => {
  return (menu) => {
    menuConfig.forEach((menuItem) => {
      if (toggleMenu.includes(menuItem.type) && menuItem.cat !== "edge" && menuItem.ctxmenu === true && menuItem.enable === true) {
        menu.addItem((item) => {
          item.setIcon(menuItem.icon).setTitle(menuItem.name).onClick(async () => {
            await callback(menuItem.class);
          });
        });
      }
      if (!toggleMenu.includes(menuItem.type) && menuItem.cat !== "edge" && menuItem.ctxmenu === true && menuItem.enable === true) {
        menu.addItem((item) => {
          const subMenu = item.setSection(section).setTitle(menuItem.name).setIcon(menuItem.icon).setSubmenu();
          handleMenu(subMenu, subMenuConfig, callback, menuItem.type);
        });
      }
    });
  };
};
var handleMenu = (subMenu, subMenuConfig, callback, type) => {
  const filteredMenuItems = subMenuConfig.filter((item) => item.type === type) || [];
  filteredMenuItems.forEach((menuItem) => {
    if (menuItem.enable === true) {
      subMenu.addItem((item) => {
        item.setIcon(menuItem.icon).setTitle(menuItem.name).onClick(async () => {
          await callback(menuItem.class);
        });
      });
    }
  });
};
var handleSelectionContextMenu = (plugin, menu, canvas, menuConfig, subMenuConfig, toggleMenu, menuItemType) => {
  const callback = async (cssClass) => {
    handleMultiNodes(canvas, false, subMenuConfig, menuItemType, cssClass, false);
  };
  createHandleContextMenu("action", menuConfig, subMenuConfig, toggleMenu, callback)(menu);
};
var handleNodeContextMenu = (plugin, menu, node, menuConfig, subMenuConfig, toggleMenu, menuItemType) => {
  const callback = async (cssClass) => {
    handleSingleNode(node, subMenuConfig, menuItemType, cssClass, false);
  };
  createHandleContextMenu("canvas", menuConfig, subMenuConfig, toggleMenu, callback)(menu);
};
var refreshAllCanvasView = (app) => {
  const cavasLeaves = app.workspace.getLeavesOfType("canvas");
  if (!cavasLeaves || cavasLeaves.length === 0)
    return;
  for (const leaf of cavasLeaves) {
    leaf.rebuildView();
  }
};
function parseOldSettingsItems(items) {
  if (items) {
    const formattedStrings = items.map((str) => str.replace(/'/g, '"').replace(/([\w-]+):/g, '"$1":').replace(/'/g, '"'));
    const jsonObjectArray = formattedStrings.map((str) => JSON.parse(str));
    return jsonObjectArray;
  }
}
function generateClassToPropertyMap(subMenuConfig, cssClass) {
  const classToPropertyMap = {};
  subMenuConfig.forEach((subMenuItem) => {
    if (subMenuItem.type && !classToPropertyMap[subMenuItem.class]) {
      classToPropertyMap[subMenuItem.class] = subMenuItem.type;
    }
  });
  return classToPropertyMap[cssClass];
}
var getToggleMenuItemsClass = (types, items) => {
  return types.map((type) => {
    const toggleMenuItem = items.find((item) => item.type === type);
    return toggleMenuItem ? toggleMenuItem.class : null;
  });
};
var getItemProperty = (cssClass, items, property2) => {
  const menuItem = items.find((item) => item.class === cssClass);
  return menuItem ? menuItem[property2] : null;
};
async function modifyClassOnElements(addOrRemove, contentEl, className, propertyValue) {
  await new Promise((resolve) => setTimeout(resolve, 1));
  const elements = contentEl.getElementsByClassName(className);
  for (let i = 0; i < elements.length; i++) {
    const element = elements[i];
    if (addOrRemove === "add") {
      element.classList.add(propertyValue);
    }
    if (addOrRemove === "remove") {
      element.classList.remove(propertyValue);
    }
  }
}
function sortByProperty(array, property2) {
  const grouped = {};
  for (const item of array) {
    const key = item[property2];
    if (!grouped[key]) {
      grouped[key] = [];
    }
    grouped[key].push(item);
  }
  const result = Object.values(grouped).reduce((acc, current) => acc.concat(current), []);
  return result;
}
function groupItemsByProperty(items, property2) {
  const groupedItems = {};
  items.forEach((item) => {
    const propValue = item[property2];
    if (!groupedItems[propValue]) {
      groupedItems[propValue] = [];
    }
    groupedItems[propValue].push(item);
  });
  return groupedItems;
}
function transformSubMenuItems(subMenuItems) {
  const transformedSubMenuItems = [];
  for (const type in subMenuItems) {
    if (subMenuItems.hasOwnProperty(type)) {
      const items = subMenuItems[type];
      transformedSubMenuItems.push(...items.map((item) => ({ ...item, type })));
    }
  }
  return transformedSubMenuItems;
}
function renameKey(obj, oldKey, newKey) {
  if (obj.hasOwnProperty(oldKey)) {
    obj[newKey] = obj[oldKey];
    delete obj[oldKey];
  }
}
function getFilesInDirectory(directoryPath) {
  const filesAndFolders = import_fs.default.readdirSync(directoryPath);
  const files = filesAndFolders.filter((fileOrFolder) => {
    const fullPath = import_path.default.join(directoryPath, fileOrFolder);
    return import_fs.default.statSync(fullPath).isFile();
  });
  return files;
}
function createElbowPath(from, to, x1, y1, x2, y2) {
  if (from === "left" && to === "right") {
    if (x1 > x2) {
      const control1X = x1 - (x1 - x2) / 2;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
    if (x1 < x2) {
      const control1X = x1 - 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y1 + (y2 - y1) / 2;
      const control3X = x2 + 50;
      const control3Y = control2Y;
      const control4X = control3X;
      const control4Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${control3Y} H${control4X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "right" && to === "left") {
    if (x1 < x2) {
      const control1X = x1 + (x2 - x1) / 2;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
    if (x1 > x2) {
      const control1X = x1 + 30;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y1 - (y1 - y2) / 2;
      const control3X = x2 - 30;
      const control3Y = control2Y;
      const control4X = control3X;
      const control4Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${control3Y} H${control4X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "right" && to === "right") {
    if (x1 >= x2) {
      const control1X = x1 + 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
    if (x1 < x2) {
      const control1X = x2 + 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "left" && to === "left") {
    if (x1 >= x2) {
      const control1X = x2 - 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
    if (x1 < x2) {
      const control1X = x1 - 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "top" && to === "bottom") {
    if (y1 > y2) {
      const control1X = x1;
      const control1Y = y1 - (y1 - y2) / 2;
      const control2X = x2;
      const control2Y = control1Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
    if (y1 < y2) {
      const control1X = x1;
      const control1Y = y1 - 50;
      const control2X = x1 + (x2 - x1) / 2;
      const control2Y = control1Y;
      const control3X = control2X;
      const control3Y = y2 + 50;
      const control4X = x2;
      const control4Y = control3Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${control3Y} H${control4X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "bottom" && to === "top") {
    if (y1 < y2) {
      const control1X = x1;
      const control1Y = y1 + (y2 - y1) / 2;
      const control2X = x2;
      const control2Y = control1Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
    if (y1 > y2) {
      const control1X = x1;
      const control1Y = y1 + 50;
      const control2X = x1 - (x1 - x2) / 2;
      const control2Y = control1Y;
      const control3X = control2X;
      const control3Y = y2 - 50;
      const control4X = x2;
      const control4Y = control3Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${control3Y} H${control4X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "top" && to === "top") {
    if (y1 >= y2) {
      const control1X = x1;
      const control1Y = y2 - 50;
      const control2X = x2;
      const control2Y = control1Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
    if (y1 < y2) {
      const control1X = x1;
      const control1Y = y1 - 50;
      const control2X = x2;
      const control2Y = control1Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "bottom" && to === "bottom") {
    if (y1 >= y2) {
      const control1X = x1;
      const control1Y = y1 + 50;
      const control2X = x2;
      const control2Y = control1Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
    if (y1 < y2) {
      const control1X = x1;
      const control1Y = y2 + 50;
      const control2X = x2;
      const control2Y = control1Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "left" && to === "top") {
    if (x1 > x2 && y1 < y2) {
      const controlX = x2;
      const controlY = y2;
      const pathData = `M${x1},${y1} H${controlX} V${controlY} H${x2}`;
      return pathData;
    }
    if (x1 > x2 && y1 > y2 || x1 < x2) {
      const control1X = x1 - 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2 - 50;
      const control3X = x2;
      const control3Y = control2Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "top" && to === "left") {
    if (x1 < x2 && y1 > y2) {
      const controlX = x1;
      const controlY = y2;
      const pathData = `M${x1},${y1} H${controlX} V${controlY} H${x2}`;
      return pathData;
    }
    if (x1 < x2 && y1 < y2 || x1 > x2) {
      const control1X = x1;
      const control1Y = y1 - 50;
      const control2X = x2 - 50;
      const control2Y = control1Y;
      const control3X = control2X;
      const control3Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "right" && to === "top") {
    if (x1 < x2 && y1 < y2) {
      const controlX = x2;
      const controlY = y2;
      const pathData = `M${x1},${y1} H${controlX} V${controlY} H${x2}`;
      return pathData;
    }
    if (x1 < x2 && y1 > y2 || x1 > x2) {
      const control1X = x1 + 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2 - 50;
      const control3X = x2;
      const control3Y = control2Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "top" && to === "right") {
    if (x1 > x2 && y1 > y2) {
      const controlX = x1;
      const controlY = y2;
      const pathData = `M${x1},${y1} H${controlX} V${controlY} H${x2}`;
      return pathData;
    }
    if (x1 > x2 && y1 < y2 || x1 < x2) {
      const control1X = x1;
      const control1Y = y1 - 50;
      const control2X = x2 + 50;
      const control2Y = control1Y;
      const control3X = control2X;
      const control3Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "left" && to === "bottom") {
    if (x1 > x2 && y1 > y2) {
      const controlX = x2;
      const controlY = y2;
      const pathData = `M${x1},${y1} H${controlX} V${controlY} H${x2}`;
      return pathData;
    }
    if (x1 > x2 && y1 < y2 || x1 < x2) {
      const control1X = x1 - 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2 + 50;
      const control3X = x2;
      const control3Y = control2Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "bottom" && to === "left") {
    if (x1 < x2 && y1 < y2) {
      const controlX = x1;
      const controlY = y2;
      const pathData = `M${x1},${y1} H${controlX} V${controlY} H${x2}`;
      return pathData;
    }
    if (x1 < x2 && y1 > y2 || x1 > x2) {
      const control1X = x1;
      const control1Y = y1 + 50;
      const control2X = x2 - 50;
      const control2Y = control1Y;
      const control3X = control2X;
      const control3Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "right" && to === "bottom") {
    if (x1 < x2 && y1 > y2) {
      const controlX = x2;
      const controlY = y2;
      const pathData = `M${x1},${y1} H${controlX} V${controlY} H${x2}`;
      return pathData;
    }
    if (x1 < x2 && y1 < y2 || x1 > x2) {
      const control1X = x1 + 50;
      const control1Y = y1;
      const control2X = control1X;
      const control2Y = y2 + 50;
      const control3X = x2;
      const control3Y = control2Y;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${y2} H${x2}`;
      return pathData;
    }
  }
  if (from === "bottom" && to === "right") {
    if (x1 > x2 && y1 < y2) {
      const controlX = x1;
      const controlY = y2;
      const pathData = `M${x1},${y1} H${controlX} V${controlY} H${x2}`;
      return pathData;
    }
    if (x1 > x2 && y1 > y2 || x1 < x2) {
      const control1X = x1;
      const control1Y = y1 + 50;
      const control2X = x2 + 50;
      const control2Y = control1Y;
      const control3X = control2X;
      const control3Y = y2;
      const pathData = `M${x1},${y1} H${control1X} V${control1Y} H${control2X} V${control2Y} H${control3X} V${y2} H${x2}`;
      return pathData;
    }
  }
}

// src/CanvasStyle.ts
var CanvasStyle = class extends import_obsidian.Component {
  constructor(node, menuConfig) {
    super();
    this.node = node;
    this.types = menuConfig.map((menuItem) => menuItem.type);
    this.types.forEach((type) => {
      this[type] = this.node.unknownData[type] || "";
    });
  }
  onload() {
    this.updateNode();
  }
  onunload() {
    super.onunload();
  }
  setStyle(cat, selector, type, cssClass) {
    if (this.node.canvas.readonly)
      return;
    if (this[type] === cssClass)
      return;
    if (this[type] !== "" || this[type] !== void 0) {
      this.oldType = this[type];
    }
    if (cssClass !== false || cssClass !== void 0) {
      this[type] = cssClass;
      this.node.unknownData[type] = cssClass;
    }
    this.updateNode(cat, selector, type);
  }
  async updateNode(cat, selector, type) {
    if (this.oldType) {
      if (cat === "edge") {
        this.node.lineGroupEl.removeClass(this.oldType);
        this.node.lineEndGroupEl.removeClass(this.oldType);
        this.node.render();
      } else {
        try {
          this.node.nodeEl.removeClass(this.oldType);
          modifyClassOnElements("remove", this.node.contentEl, "markdown-preview-view", this.oldType);
        } finally {
        }
      }
    }
    if (this[type]) {
      if (cat === "edge") {
        this.node.lineGroupEl.addClass(this[type]);
        this.node.lineEndGroupEl.addClass(this[type]);
        this.node.render();
      } else {
        if (selector === "cc") {
          await modifyClassOnElements("add", this.node.contentEl, "markdown-preview-view", this[type]);
        } else
          this.node.nodeEl.addClass(this[type]);
      }
    }
  }
};

// src/memuConfigs.ts
var defaultConfigs = {
  "default": {
    name: "Default",
    menuItems: [
      {
        class: "cs-border",
        type: "border",
        icon: "cs-style-border",
        name: "Border",
        cat: "",
        selector: "",
        ctxmenu: false,
        enable: true
      },
      {
        class: "cs-bg",
        type: "bg",
        icon: "cs-background",
        name: "Background",
        cat: "",
        selector: "",
        ctxmenu: false,
        enable: true
      },
      {
        class: "cs-rotate",
        type: "rotate",
        icon: "rotate-cw",
        name: "Rotate",
        cat: "",
        selector: "",
        ctxmenu: false,
        enable: true
      },
      {
        class: "cs-shape",
        type: "shape",
        icon: "diamond",
        name: "Shape",
        cat: "",
        selector: "",
        ctxmenu: false,
        enable: true
      },
      {
        class: "cs-highlight",
        type: "highlight",
        icon: "star",
        name: "Highlight",
        cat: "",
        selector: "",
        ctxmenu: false,
        enable: true
      },
      {
        class: "cs-extra",
        type: "extra",
        icon: "more-horizontal",
        name: "Extra",
        cat: "",
        selector: "",
        ctxmenu: false,
        enable: true
      },
      {
        class: "cs-line-type",
        type: "lineType",
        icon: "cs-border-corner-pill",
        name: "Line type",
        cat: "edge",
        selector: "",
        ctxmenu: false,
        enable: true
      },
      {
        class: "cs-line-style",
        type: "lineStyle",
        icon: "cs-line-style",
        name: "Line style",
        cat: "edge",
        selector: "",
        ctxmenu: false,
        enable: true
      },
      {
        class: "cs-line-thickness",
        type: "lineThickness",
        icon: "equal",
        name: "Line thickness",
        cat: "edge",
        selector: "",
        ctxmenu: false,
        enable: true
      }
    ],
    subMenuItems: {
      border: [
        {
          class: "cs-border-none",
          type: "border",
          icon: "cs-no-border",
          name: "No border",
          selector: "",
          enable: true
        },
        {
          class: "cs-border-dashed",
          type: "border",
          icon: "box-select",
          name: "Dashed",
          selector: "",
          enable: true
        }
      ],
      bg: [
        {
          class: "cs-bg-transparent",
          type: "bg",
          icon: "cs-transparent",
          name: "Transparent",
          selector: "",
          enable: true
        },
        {
          class: "cs-bg-opacity-0",
          type: "bg",
          icon: "cs-opacity",
          name: "Opacity 0",
          selector: "",
          enable: true
        }
      ],
      rotate: [
        {
          class: "cs-rotate-right-45",
          type: "rotate",
          icon: "redo",
          name: "Right 45",
          selector: "",
          enable: true
        },
        {
          class: "cs-rotate-right-90",
          type: "rotate",
          icon: "redo",
          name: "Right 90",
          selector: "",
          enable: true
        },
        {
          class: "cs-rotate-left-45",
          type: "rotate",
          icon: "undo",
          name: "Left 45",
          selector: "",
          enable: true
        },
        {
          class: "cs-rotate-left-90",
          type: "rotate",
          icon: "undo",
          name: "Left 90",
          selector: "",
          enable: true
        }
      ],
      shape: [
        {
          class: "cs-shape-circle",
          type: "shape",
          icon: "circle",
          name: "Circle",
          selector: "",
          enable: true
        },
        {
          class: "cs-shape-parallelogram-right",
          type: "shape",
          icon: "cs-parallelogram-right",
          name: "Parallelogram right",
          selector: "",
          enable: true
        },
        {
          class: "cs-shape-parallelogram-left",
          type: "shape",
          icon: "cs-parallelogram-left",
          name: "Parallelogram left",
          selector: "",
          enable: true
        }
      ],
      highlight: [],
      extra: [],
      lineType: [
        {
          class: "cs-line-straight",
          type: "lineType",
          icon: "minus",
          name: "Straight",
          selector: "",
          enable: true
        },
        {
          class: "cs-line-elbow",
          type: "lineType",
          icon: "cs-elbow",
          name: "Elbow",
          selector: "",
          enable: true
        }
      ],
      lineStyle: [
        {
          class: "cs-line-dashed",
          type: "lineStyle",
          icon: "cs-line-dashed",
          name: "Dashed",
          selector: "",
          enable: true
        },
        {
          class: "cs-line-dashed-round",
          type: "lineStyle",
          icon: "cs-line-dashed",
          name: "Dashed round",
          selector: "",
          enable: true
        },
        {
          class: "cs-line-dotted",
          type: "lineStyle",
          icon: "cs-line-dotted",
          name: "Dotted",
          selector: "",
          enable: true
        },
        {
          class: "cs-line-dotted-line",
          type: "lineStyle",
          icon: "cs-dotted-line",
          name: "Dotted line",
          selector: "",
          enable: true
        }
      ],
      lineThickness: [
        {
          class: "cs-line-thick",
          type: "lineThickness",
          icon: "cs-thicker",
          name: "Thicker",
          selector: "",
          enable: true
        },
        {
          class: "cs-line-thicker",
          type: "lineThickness",
          icon: "cs-thicker++",
          name: "Thicker++",
          selector: "",
          enable: true
        }
      ]
    },
    customIcons: []
  }
};
var csIcons = [
  {
    name: "cs-no-border",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mouse-pointer-square-dashed"><path d="M5 3a2 2 0 0 0-2 2"/><path d="M19 3a2 2 0 0 1 2 2"/><path d="m12 12 4 10 1.7-4.3L22 16Z"/><path d="M5 21a2 2 0 0 1-2-2"/><path d="M9 3h1"/><path d="M9 21h2"/><path d="M14 3h1"/><path d="M3 9v1"/><path d="M21 9v2"/><path d="M3 14v1"/></svg>`
  },
  {
    name: "cs-thicker",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tally-2"><path d="M4 4v16"/><path d="M9 4v16"/></svg>`
  },
  {
    name: "cs-thicker++",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tally-3"><path d="M4 4v16"/><path d="M9 4v16"/><path d="M14 4v16"/></svg>`
  },
  {
    name: "cs-circle-dashed",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-dashed"><path d="M10.1 2.18a9.93 9.93 0 0 1 3.8 0"/><path d="M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7"/><path d="M21.82 10.1a9.93 9.93 0 0 1 0 3.8"/><path d="M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69"/><path d="M13.9 21.82a9.94 9.94 0 0 1-3.8 0"/><path d="M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7"/><path d="M2.18 13.9a9.93 9.93 0 0 1 0-3.8"/><path d="M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69"/></svg>`
  },
  {
    name: "cs-background",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-background" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8l4 -4" /><path d="M14 4l-10 10" /><path d="M4 20l16 -16" /><path d="M20 10l-10 10" /><path d="M20 16l-4 4" /></svg>`
  },
  {
    name: "cs-transparent",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-droplet-half-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7.502 19.423c2.602 2.105 6.395 2.105 8.996 0c2.602 -2.105 3.262 -5.708 1.566 -8.546l-4.89 -7.26c-.42 -.625 -1.287 -.803 -1.936 -.397a1.376 1.376 0 0 0 -.41 .397l-4.893 7.26c-1.695 2.838 -1.035 6.441 1.567 8.546z" /><path d="M5 14h14" /></svg>`
  },
  {
    name: "cs-opacity",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-droplet" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7.502 19.423c2.602 2.105 6.395 2.105 8.996 0c2.602 -2.105 3.262 -5.708 1.566 -8.546l-4.89 -7.26c-.42 -.625 -1.287 -.803 -1.936 -.397a1.376 1.376 0 0 0 -.41 .397l-4.893 7.26c-1.695 2.838 -1.035 6.441 1.567 8.546z" /></svg>`
  },
  {
    name: "cs-border-corner-pill",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-border-corner-pill" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20v-5c0 -6.075 4.925 -11 11 -11h5" /></svg>`
  },
  {
    name: "cs-line-style",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-border-style-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 18v.01" /><path d="M8 18v.01" /><path d="M12 18v.01" /><path d="M16 18v.01" /><path d="M20 18v.01" /><path d="M18 12h2" /><path d="M11 12h2" /><path d="M4 12h2" /><path d="M4 6h16" /></svg>`
  },
  {
    name: "cs-line-dashed",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-line-dashed" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h2" /><path d="M17 12h2" /><path d="M11 12h2" /></svg>`
  },
  {
    name: "cs-line-dotted",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-line-dotted" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v.01" /><path d="M8 12v.01" /><path d="M12 12v.01" /><path d="M16 12v.01" /><path d="M20 12v.01" /></svg>`
  },
  {
    name: "cs-dotted-line",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-separator" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12l0 .01" /><path d="M7 12l10 0" /><path d="M21 12l0 .01" /></svg>`
  },
  {
    name: "cs-input-check",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-input-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 13v-4a2 2 0 0 0 -2 -2h-12a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h6" /><path d="M15 19l2 2l4 -4" /></svg>`
  },
  {
    name: "cs-style-border",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 2H8C4.68629 2 2 4.68629 2 8V16C2 19.3137 4.68629 22 8 22H16C19.3137 22 22 19.3137 22 16V8C22 4.68629 19.3137 2 16 2Z" stroke-width="1.5" stroke-dasharray="2 2"></path><path d="M16 5H8C6.34315 5 5 6.34315 5 8V16C5 17.6569 6.34315 19 8 19H16C17.6569 19 19 17.6569 19 16V8C19 6.34315 17.6569 5 16 5Z"></path></svg>`
  },
  {
    name: "cs-parallelogram-right",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4.887 20h11.868c.893 0 1.664 -.665 1.847 -1.592l2.358 -12c.212 -1.081 -.442 -2.14 -1.462 -2.366a1.784 1.784 0 0 0 -.385 -.042h-11.868c-.893 0 -1.664 .665 -1.847 1.592l-2.358 12c-.212 1.081 .442 2.14 1.462 2.366c.127 .028 .256 .042 .385 .042z" /></svg>`
  },
  {
    name: "cs-parallelogram-left",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M 19.113,20 H 7.245 C 6.352,20 5.581,19.335 5.398,18.408 L 3.04,6.408 C 2.828,5.327 3.482,4.268 4.502,4.042 A 1.784,1.784 0 0 1 4.887,4 h 11.868 c 0.893,0 1.664,0.665 1.847,1.592 l 2.358,12 c 0.212,1.081 -0.442,2.14 -1.462,2.366 C 19.371,19.986 19.242,20 19.113,20 Z" /></svg>`
  },
  {
    name: "cs-elbow",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 17l6 -6l4 4l8 -8" /></svg>`
  },
  {
    name: "cs-badge-cc",
    svgContent: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 15V9C1 5.68629 3.68629 3 7 3H17C20.3137 3 23 5.68629 23 9V15C23 18.3137 20.3137 21 17 21H7C3.68629 21 1 18.3137 1 15Z"></path><path d="M10.5 10L10.3284 9.82843C9.79799 9.29799 9.07857 9 8.32843 9V9C6.76633 9 5.5 10.2663 5.5 11.8284V12.1716C5.5 13.7337 6.76633 15 8.32843 15V15C9.07857 15 9.79799 14.702 10.3284 14.1716L10.5 14"></path><path d="M18.5 10L18.3284 9.82843C17.798 9.29799 17.0786 9 16.3284 9V9C14.7663 9 13.5 10.2663 13.5 11.8284V12.1716C13.5 13.7337 14.7663 15 16.3284 15V15C17.0786 15 17.798 14.702 18.3284 14.1716L18.5 14"></path></svg>`
  }
];

// src/setting.ts
var import_fs2 = __toESM(require("fs"));
var import_path2 = __toESM(require("path"));
var import_obsidian2 = require("obsidian");
var CanvasStyleMenuSetting = class extends import_obsidian2.Setting {
};
var CanvasStyleMenuSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.devMode = false;
    this.menuItemTypeChanged = { oldType: "", newType: "" };
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const configs = this.plugin.settings.configs;
    const currentConfig = this.plugin.settings.currentConfig;
    const config = configs[currentConfig];
    const defaultConfigs2 = JSON.parse(JSON.stringify(defaultSettings));
    const savedConfigs = JSON.parse(JSON.stringify(savedSettings));
    const vaultDir = this.app.vault.adapter.basePath;
    const pluginDir = this.plugin.manifest.dir;
    const packagesFolder = import_path2.default.join(vaultDir, pluginDir, "packages");
    this.settingsHeaderContainerEl = containerEl.createDiv({
      cls: "settings-header-container"
    });
    new import_obsidian2.Setting(this.settingsHeaderContainerEl).setName("Style Package").setDesc("Manage installed style package and browse community style packages.").addText((text) => text.setPlaceholder("New Package Name")).addExtraButton((component) => component.setIcon("save").setTooltip("Save as new package").onClick(async () => {
      this.removePreviousIcons(currentConfig, savedConfigs);
      const packageName = this.settingsHeaderContainerEl.querySelector("input").value;
      if (packageName) {
        await this.saveAsNewPackage(config, packageName);
        new import_obsidian2.Notice("Package successfully saved");
      }
    })).addExtraButton((component) => component.setIcon("rotate-ccw").setTooltip("Restore the current package defaults").onClick(async () => {
      this.removePreviousIcons(currentConfig, savedConfigs);
      if (currentConfig in savedConfigs) {
        configs[currentConfig] = savedConfigs[currentConfig];
      } else {
        configs[currentConfig] = defaultConfigs2[currentConfig];
      }
      await this.plugin.saveSettings();
      this.plugin.registerCustomIcons();
      this.plugin.patchCanvasMenu(true);
      this.display();
    })).addDropdown((dropdown) => {
      Object.keys(configs).forEach((config2) => {
        const group = configs[config2];
        dropdown.addOption(config2, group.name);
      });
      dropdown.setValue(currentConfig);
      dropdown.onChange(async (value) => {
        this.removePreviousIcons(currentConfig, savedConfigs);
        this.plugin.settings.currentConfig = value;
        await this.plugin.saveSettings();
        this.plugin.registerCustomIcons();
        this.plugin.patchCanvasMenu(true);
        this.display();
      });
    }).addExtraButton((component) => component.setIcon("folder-open").setTooltip("Open packages folder").onClick(() => {
      const { exec } = require("child_process");
      import_fs2.default.mkdir(packagesFolder, (err) => {
        if (err) {
          if (err.code === "EEXIST") {
            exec(`start explorer ${packagesFolder}`);
          } else {
            console.error("Failed to create style packages folder:", err);
          }
        } else {
          exec(`start explorer ${packagesFolder}`);
        }
      });
    })).addExtraButton((component) => component.setIcon("refresh-cw").setTooltip("Reload packages").onClick(() => {
      import_fs2.default.mkdir(packagesFolder, (err) => {
        if (err) {
          if (err.code === "EEXIST") {
          } else {
            console.error(`Failed to create style packages folder: ${err}`);
          }
        } else {
        }
      });
      const packageFiles = getFilesInDirectory(packagesFolder);
      if (packageFiles) {
        packageFiles.forEach((packageFile) => {
          const packageFilePath = import_path2.default.join(packagesFolder, packageFile);
          let importedPackage = {};
          import_fs2.default.readFile(packageFilePath, "utf-8", async (err, contentAsync) => {
            if (err) {
              console.error(err);
              return;
            }
            importedPackage = JSON.parse(contentAsync);
            const importedConfig = Object.keys(importedPackage)[0];
            if (!(importedConfig in this.plugin.settings.configs)) {
              this.plugin.settings.configs = { ...this.plugin.settings.configs, ...importedPackage };
              this.plugin.settings.savedConfigs = JSON.parse(JSON.stringify({ ...this.plugin.settings.savedConfigs, ...importedPackage }));
              await this.plugin.saveSettings();
              this.plugin.savedSettings();
              this.display();
            }
          });
        });
        new import_obsidian2.Notice("Reloaded style packages");
      }
    })).addExtraButton((component) => component.setIcon("upload").setTooltip("Export package").onClick(() => {
      import_fs2.default.mkdir(packagesFolder, (err) => {
        if (err) {
          if (err.code === "EEXIST") {
          } else {
            console.error(`Failed to create style packages folder: ${err}`);
          }
        } else {
        }
      });
      const exportedPackage = { [currentConfig]: config };
      const jsonString = JSON.stringify(exportedPackage, null, 2);
      const packageFile = `${currentConfig}.json`;
      const packageFilePath = import_path2.default.join(packagesFolder, packageFile);
      import_fs2.default.writeFile(packageFilePath, jsonString, (err) => {
        if (err) {
          new import_obsidian2.Notice(`Error writing JSON file: ${err}`);
        } else {
          new import_obsidian2.Notice("Package successfully exported");
        }
      });
    })).addExtraButton((component) => component.setIcon("trash").setTooltip("Delete package").onClick(async () => {
      this.removePreviousIcons(currentConfig, savedConfigs);
      if (currentConfig in savedConfigs) {
        delete this.plugin.settings.savedConfigs[currentConfig];
        delete configs[currentConfig];
        this.plugin.settings.currentConfig = "default";
        await this.plugin.saveSettings();
        this.plugin.registerCustomIcons();
        this.plugin.patchCanvasMenu(true);
        this.display();
      }
    }).then((cb) => {
      if (currentConfig in savedConfigs) {
        cb.extraSettingsEl.addClass("mod-warning");
      } else {
        cb.extraSettingsEl.addClass("disabled");
      }
    }));
    this.configTabContainerEl = containerEl.createDiv({
      cls: "config-tab-container"
    });
    new import_obsidian2.Setting(this.configTabContainerEl).addExtraButton((component) => component.setIcon("settings-2").onClick(() => {
      if (this.customIconsTabContainerEl.classList.contains("actived")) {
        this.customIconsTabContainerEl.removeClass("actived");
      }
      this.menuItemsTabContainerEl.addClass("actived");
      if (this.configTabContainerEl.querySelector(".custom-icons-tab.actived")) {
        this.configTabContainerEl.querySelector(".custom-icons-tab.actived").removeClass("actived");
      }
      component.extraSettingsEl.addClass("actived");
    }).then((cb) => {
      cb.extraSettingsEl.addClass("menu-items-tab");
      cb.extraSettingsEl.addClass("actived");
      cb.extraSettingsEl.setAttr("data-label", "Menu Items");
    })).addExtraButton((component) => component.setIcon("shapes").onClick(() => {
      if (this.menuItemsTabContainerEl.classList.contains("actived")) {
        this.menuItemsTabContainerEl.removeClass("actived");
      }
      this.customIconsTabContainerEl.addClass("actived");
      if (this.configTabContainerEl.querySelector(".menu-items-tab.actived")) {
        this.configTabContainerEl.querySelector(".menu-items-tab.actived").removeClass("actived");
      }
      component.extraSettingsEl.addClass("actived");
    }).then((cb) => {
      cb.extraSettingsEl.addClass("custom-icons-tab");
      cb.extraSettingsEl.setAttr("data-label", "Custom Icons");
    }));
    this.menuItemsTabContainerEl = containerEl.createDiv({
      cls: "setting-tab-container menu-items-tab-container actived"
    });
    new import_obsidian2.Setting(this.menuItemsTabContainerEl).setName("Menu Items").setDesc("Set menu items config.").addExtraButton((component) => component.setIcon("chevrons-up-down").setTooltip("Expand all").onClick(() => {
      config.menuItems.forEach((menuItem) => {
        if (!menuItem.expanded) {
          menuItem.expanded = true;
        }
      });
      this.display();
    })).addExtraButton((component) => component.setIcon("chevrons-down-up").setTooltip("Collapse All").onClick(() => {
      config.menuItems.forEach((menuItem) => {
        if (menuItem.expanded) {
          menuItem.expanded = false;
        }
      });
      this.display();
    })).addButton((component) => component.setButtonText("Add Menu Item").setClass("mod-cta").onClick(() => {
      newMenuItemSettingContainerEl.addClass("add-setting");
    }));
    this.menuItemsContainerEl = this.menuItemsTabContainerEl.createDiv({
      cls: "setting-item-container menu-items-container"
    });
    for (let menuItem of config.menuItems) {
      this.renderMenuItemsSetting(config, menuItem, config.menuItems);
    }
    const newMenuItemSettingContainerEl = this.menuItemsContainerEl.createDiv({
      cls: "setting-item-container new-menu-item-setting-container"
    });
    this.buildNewMenuItemSetting(newMenuItemSettingContainerEl, async (menuItem) => {
      config.menuItems.push(menuItem);
      config.menuItems = sortByProperty(config.menuItems, "cat");
      if (!Object.keys(config.subMenuItems).contains(menuItem.type)) {
        config.subMenuItems[menuItem.type] = [];
      }
      await this.plugin.saveSettings();
      this.plugin.patchCanvasMenu(true);
      this.display();
    });
    this.customIconsTabContainerEl = containerEl.createDiv({
      cls: "setting-tab-container custom-icons-tab-container"
    });
    new import_obsidian2.Setting(this.customIconsTabContainerEl).setName("Custom Icons").setDesc("Add custom icons.").addButton((component) => component.setButtonText("Add Custom Icon").setClass("mod-cta").onClick(() => {
      newCustomIconSettingContainerEl.addClass("add-setting");
    }));
    this.customIconsContainerEl = this.customIconsTabContainerEl.createDiv({
      cls: "setting-item-container custom-icons-container"
    });
    config.customIcons.forEach((icon) => {
      this.renderCustomIconsSetting(config, icon);
    });
    const newCustomIconSettingContainerEl = this.customIconsContainerEl.createDiv({
      cls: "setting-item-container new-custom-icon-setting-container"
    });
    this.buildNewIconSetting(newCustomIconSettingContainerEl, async (icon) => {
      config.customIcons.push(icon);
      await this.plugin.saveSettings();
      this.plugin.registerCustomIcons();
      this.display();
      this.menuItemsTabContainerEl.removeClass("actived");
      this.customIconsTabContainerEl.addClass("actived");
      this.configTabContainerEl.querySelector(".menu-items-tab.actived").removeClass("actived");
      this.configTabContainerEl.querySelector(".custom-icons-tab").addClass("actived");
    });
  }
  renderMenuItemsSetting(config, menuItem, settings) {
    const cls = menuItem.class;
    const type = menuItem.type;
    const icon = menuItem.icon;
    const name = menuItem.name;
    const cat = menuItem.cat;
    const selector = menuItem.selector;
    const index = config.menuItems.indexOf(menuItem);
    if (this.devMode) {
      if (type === this.menuItemTypeChanged.newType) {
        renameKey(config.subMenuItems, this.menuItemTypeChanged.oldType, this.menuItemTypeChanged.newType);
        this.plugin.saveSettings();
      }
    }
    const subMenuItems = config.subMenuItems[type];
    const setting = new CanvasStyleMenuSetting(this.menuItemsContainerEl).addExtraButton((component) => component.setIcon("chevron-right").onClick(async () => {
      config.menuItems[index].expanded = !config.menuItems[index].expanded;
      await this.plugin.saveSettings();
      if (config.menuItems[index].expanded) {
        component.setIcon("chevron-down");
        component.extraSettingsEl.removeClass("setting-expanded-false");
        component.extraSettingsEl.addClass("setting-expanded-true");
      } else {
        component.setIcon("chevron-right");
        component.extraSettingsEl.removeClass("setting-expanded-true");
        component.extraSettingsEl.addClass("setting-expanded-false");
      }
    }).then((cb) => {
      if (subMenuItems.length === 0)
        cb.extraSettingsEl.addClass("nosub");
      cb.extraSettingsEl.addClass("setting-expanded-true");
      if (!config.menuItems[index].expanded) {
        cb.extraSettingsEl.removeClass("setting-expanded-true");
        cb.extraSettingsEl.addClass("setting-expanded-false");
        cb.setIcon("chevron-right");
      } else
        cb.setIcon("chevron-down");
    })).addExtraButton((component) => component.setIcon(icon).onClick(() => {
      new SelectIconModal(this.app, this.plugin, component, "menuItem", config, index).open();
    })).addText((text) => text.setPlaceholder("CSS Class").setValue(cls).onChange(async (value) => {
      config.menuItems[index].class = value;
      await this.plugin.saveSettings();
    })).addText((text) => text.setPlaceholder("Type").setValue(type).onChange(async (value) => {
      config.menuItems[index].type = value;
      if (this.devMode) {
        config.subMenuItems[type].forEach((subMenuItem) => {
          subMenuItem.type = value;
        });
        await this.plugin.saveSettings();
        this.menuItemTypeChanged = { oldType: type, newType: value };
        this.plugin.patchCanvasMenu(true);
      } else {
        await this.plugin.saveSettings();
      }
    }).setDisabled(true).inputEl.addClass("disabled")).addText((text) => text.setPlaceholder("Name").setValue(name).onChange(async (value) => {
      config.menuItems[index].name = value;
      await this.plugin.saveSettings();
    })).addExtraButton((component) => {
      component.setIcon("git-commit-horizontal").setTooltip("For connection line").onClick(async () => {
        if (this.devMode) {
          const ctxmenu = setting.components.find((obj) => {
            var _a;
            return (_a = obj.extraSettingsEl) == null ? void 0 : _a.classList.contains("setting-ctxmenu-check");
          });
          if (!config.menuItems[index].cat) {
            config.menuItems[index].cat = "edge";
            component.extraSettingsEl.removeClass("setting-edge-check");
            component.extraSettingsEl.addClass("setting-edge-checked");
            ctxmenu.extraSettingsEl.addClass("disabled");
          } else {
            config.menuItems[index].cat = "";
            component.extraSettingsEl.removeClass("setting-edge-checked");
            component.extraSettingsEl.addClass("setting-edge-check");
            ctxmenu.extraSettingsEl.removeClass("disabled");
          }
          await this.plugin.saveSettings();
        }
      }).then((cb) => {
        cb.extraSettingsEl.addClass("setting-edge-check");
        if (config.menuItems[index].cat) {
          cb.extraSettingsEl.removeClass("setting-edge-check");
          cb.extraSettingsEl.addClass("setting-edge-checked");
        }
        if (config.menuItems[index].ctxmenu) {
          cb.extraSettingsEl.addClass("disabled");
        }
        cb.extraSettingsEl.addClass("disabled");
      });
    }).addExtraButton((component) => {
      component.setIcon("cs-badge-cc").setTooltip("Use cssclasses styling").onClick(async () => {
        if (this.devMode) {
          if (!config.menuItems[index].selector) {
            config.menuItems[index].selector = "cc";
            component.extraSettingsEl.removeClass("setting-cc-check");
            component.extraSettingsEl.addClass("setting-cc-checked");
          } else {
            config.menuItems[index].selector = "";
            component.extraSettingsEl.removeClass("setting-cc-checked");
            component.extraSettingsEl.addClass("setting-cc-check");
          }
          await this.plugin.saveSettings();
        }
      }).then((cb) => {
        cb.extraSettingsEl.addClass("setting-cc-check");
        if (config.menuItems[index].selector) {
          cb.extraSettingsEl.removeClass("setting-cc-check");
          cb.extraSettingsEl.addClass("setting-cc-checked");
        }
        cb.extraSettingsEl.addClass("disabled");
      });
    }).addExtraButton((component) => {
      component.setIcon("cs-input-check").setTooltip("Show in context menu").onClick(async () => {
        config.menuItems[index].ctxmenu = !config.menuItems[index].ctxmenu;
        if (config.menuItems[index].ctxmenu) {
          component.extraSettingsEl.removeClass("setting-ctxmenu-check");
          component.extraSettingsEl.addClass("setting-ctxmenu-checked");
        } else {
          component.extraSettingsEl.removeClass("setting-ctxmenu-checked");
          component.extraSettingsEl.addClass("setting-ctxmenu-check");
        }
        await this.plugin.saveSettings();
      }).then((cb) => {
        if (subMenuItems.length === 0)
          cb.extraSettingsEl.addClass("nosub");
        cb.extraSettingsEl.addClass("setting-ctxmenu-check");
        if (config.menuItems[index].ctxmenu) {
          cb.extraSettingsEl.removeClass("setting-ctxmenu-check");
          cb.extraSettingsEl.addClass("setting-ctxmenu-checked");
        }
        if (config.menuItems[index].cat === "edge") {
          cb.extraSettingsEl.addClass("disabled");
        }
      });
    }).addExtraButton((component) => component.setIcon("plus-circle").setTooltip("Add sub menu item").onClick(() => {
      if (!config.menuItems[index].expanded) {
        config.menuItems[index].expanded = true;
        setting.components[0].extraSettingsEl.removeClass("setting-expanded-false");
        setting.components[0].extraSettingsEl.addClass("setting-expanded-true");
        setting.components[0].setIcon("chevron-down");
        newSubMenuItemSettingContainerEl.addClass("add-setting");
      }
      newSubMenuItemSettingContainerEl.addClass("add-setting");
    })).addExtraButton((component) => component.setIcon("arrow-up").onClick(() => {
      this.moveSetting(setting, false);
    }).then((cb) => {
      cb.extraSettingsEl.addClass("setting-item-controller");
    })).addExtraButton((component) => component.setIcon("arrow-down").onClick(() => {
      this.moveSetting(setting, true);
    }).then((cb) => {
      cb.extraSettingsEl.addClass("setting-item-controller");
    })).addExtraButton((component) => component.setIcon("x").onClick(async () => {
      config.menuItems.splice(index, 1);
      delete config.subMenuItems[type];
      await this.plugin.saveSettings();
      this.plugin.patchCanvasMenu(true);
      this.display();
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-warning");
    })).addToggle((toggle) => {
      toggle.setValue(config.menuItems[index].enable).onChange(async (value) => {
        config.menuItems[index].enable = value;
        await this.plugin.saveSettings();
      });
    }).then((mn) => {
      mn.settings = settings;
      mn.settingEl.addClass("menu-item-setting");
    });
    this.subMenuItemsContainerEl = setting.settingEl.createDiv({
      cls: `setting-item-container submenu-items-container ${type}-items-container`
    });
    for (let subMenuItem of subMenuItems) {
      this.renderSubMenuItemsSetting(config, subMenuItem, subMenuItems);
    }
    const newSubMenuItemSettingContainerEl = this.subMenuItemsContainerEl.createDiv({
      cls: "setting-item-container new-submenu-item-setting-container"
    });
    this.buildNewSubMenuItemSetting(newSubMenuItemSettingContainerEl, type, async (subMenuItem) => {
      subMenuItems.push(subMenuItem);
      await this.plugin.saveSettings();
      this.plugin.patchCanvasMenu(true);
      this.display();
    });
    return setting;
  }
  renderSubMenuItemsSetting(config, subMenuItem, settings) {
    const cls = subMenuItem.class;
    const type = subMenuItem.type;
    const icon = subMenuItem.icon;
    const name = subMenuItem.name;
    const selector = subMenuItem.selector;
    const index = settings.indexOf(subMenuItem);
    const subMenuItems = config.subMenuItems[type];
    const setting = new CanvasStyleMenuSetting(this.subMenuItemsContainerEl).addExtraButton((component) => component.setIcon("grip-vertical")).addExtraButton((component) => component.setIcon(icon).onClick(() => {
      new SelectIconModal(this.app, this.plugin, component, "subMenuItem", subMenuItems, index).open();
    })).addText((text) => text.setPlaceholder("CSS Class").setValue(cls).onChange(async (value) => {
      subMenuItems[index].class = value;
      await this.plugin.saveSettings();
    })).addText((text) => text.setValue(type).setDisabled(true).inputEl.addClass("hidden")).addText((text) => text.setPlaceholder("Name").setValue(name).onChange(async (value) => {
      subMenuItems[index].name = value;
      await this.plugin.saveSettings();
    })).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.setIcon("cs-badge-cc").setTooltip("Use cssclasses styling").onClick(async () => {
        if (this.devMode) {
          if (!subMenuItems[index].selector) {
            subMenuItems[index].selector = "cc";
            component.extraSettingsEl.removeClass("setting-cc-check");
            component.extraSettingsEl.addClass("setting-cc-checked");
          } else {
            subMenuItems[index].selector = "";
            component.extraSettingsEl.removeClass("setting-cc-checked");
            component.extraSettingsEl.addClass("setting-cc-check");
          }
          await this.plugin.saveSettings();
        }
      }).then((cb) => {
        cb.extraSettingsEl.addClass("setting-cc-check");
        if (subMenuItems[index].selector) {
          cb.extraSettingsEl.removeClass("setting-cc-check");
          cb.extraSettingsEl.addClass("setting-cc-checked");
        }
        cb.extraSettingsEl.addClass("disabled");
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => component.setIcon("arrow-up").onClick(() => {
      this.moveSetting(setting, false);
    }).then((cb) => {
      cb.extraSettingsEl.addClass("setting-item-controller");
    })).addExtraButton((component) => component.setIcon("arrow-down").onClick(() => {
      this.moveSetting(setting, true);
    }).then((cb) => {
      cb.extraSettingsEl.addClass("setting-item-controller");
    })).addExtraButton((component) => component.setIcon("x").onClick(async () => {
      subMenuItems.splice(index, 1);
      await this.plugin.saveSettings();
      this.plugin.patchCanvasMenu(true);
      this.display();
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-warning");
    })).addToggle((toggle) => {
      toggle.setValue(subMenuItems[index].enable).onChange(async (value) => {
        subMenuItems[index].enable = value;
        await this.plugin.saveSettings();
      });
    }).then((mn) => {
      mn.settings = settings;
      mn.settingEl.addClass("submenu-item-setting");
    });
    return setting;
  }
  renderCustomIconsSetting(config, icon) {
    const name = icon.name;
    const svgContent = icon.svgContent.replace(/^`|`$/g, "");
    const index = config.customIcons.indexOf(icon);
    const setting = new CanvasStyleMenuSetting(this.customIconsContainerEl).addExtraButton((component) => component.setIcon(name)).addText((text) => text.setPlaceholder("Icon Name").setValue(name).onChange(async (value) => {
      config.customIcons[index].name = value;
      await this.plugin.saveSettings();
    })).addText((text) => text.setPlaceholder("SVG Content").setValue(svgContent).onChange(async (value) => {
      config.customIcons[index].svgContent = `${value}`;
      await this.plugin.saveSettings();
      this.plugin.registerCustomIcons();
      this.display();
    })).addExtraButton((component) => component.setIcon("x").onClick(async () => {
      config.customIcons.splice(index, 1);
      await this.plugin.saveSettings();
      (0, import_obsidian2.removeIcon)(name);
      this.display();
      this.menuItemsTabContainerEl.removeClass("actived");
      this.customIconsTabContainerEl.addClass("actived");
      this.configTabContainerEl.querySelector(".menu-items-tab.actived").removeClass("actived");
      this.configTabContainerEl.querySelector(".custom-icons-tab").addClass("actived");
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-warning");
    }));
    return setting;
  }
  buildNewMenuItemSetting(containerEl, onSubmit) {
    const menuItem = {
      class: "",
      type: "",
      icon: "",
      name: "",
      cat: "",
      selector: "",
      ctxmenu: false,
      enable: true
    };
    const setting = new import_obsidian2.Setting(containerEl).addExtraButton((component) => component.setIcon("plus").onClick(() => {
      onSubmit(menuItem);
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-cta");
    })).addExtraButton((component) => component.setIcon("cs-circle-dashed").onClick(() => {
      const callback = (iconName) => {
        menuItem.icon = iconName;
      };
      new SelectIconModal(this.app, this.plugin, component, "addNew", null, null, callback).open();
    }).then((cb) => {
      cb.extraSettingsEl.addClass("icon-selector");
    })).addText((text) => text.setPlaceholder("CSS Class").setValue("").onChange((value) => {
      menuItem.class = value;
    })).addText((text) => text.setPlaceholder("Type").setValue("").onChange((value) => {
      menuItem.type = value;
    })).addText((text) => text.setPlaceholder("Name").setValue("").onChange((value) => {
      menuItem.name = value;
    })).addExtraButton((component) => {
      component.setIcon("git-commit-horizontal").setTooltip("For connection line").onClick(() => {
        const cc = setting.components.find((obj) => {
          var _a;
          return (_a = obj.extraSettingsEl) == null ? void 0 : _a.classList.contains("setting-cc-check");
        });
        if (!menuItem.cat && cc) {
          menuItem.cat = "edge";
          component.extraSettingsEl.removeClass("setting-edge-check");
          component.extraSettingsEl.addClass("setting-edge-checked");
          cc.extraSettingsEl.addClass("disabled");
        } else {
          menuItem.cat = "";
          component.extraSettingsEl.removeClass("setting-edge-checked");
          component.extraSettingsEl.addClass("setting-edge-check");
          if (cc)
            cc.extraSettingsEl.removeClass("disabled");
        }
      }).then((cb) => {
        cb.extraSettingsEl.addClass("setting-edge-check");
        if (menuItem.cat) {
          cb.extraSettingsEl.removeClass("setting-edge-check");
          cb.extraSettingsEl.addClass("setting-edge-checked");
        }
      });
    }).addExtraButton((component) => {
      component.setIcon("cs-badge-cc").setTooltip("Use cssclasses styling").onClick(() => {
        const edge = setting.components.find((obj) => {
          var _a;
          return (_a = obj.extraSettingsEl) == null ? void 0 : _a.classList.contains("setting-edge-check");
        });
        if (!menuItem.selector && edge) {
          menuItem.selector = "cc";
          component.extraSettingsEl.removeClass("setting-cc-check");
          component.extraSettingsEl.addClass("setting-cc-checked");
          edge.extraSettingsEl.addClass("disabled");
        } else {
          menuItem.selector = "";
          component.extraSettingsEl.removeClass("setting-cc-checked");
          component.extraSettingsEl.addClass("setting-cc-check");
          if (edge)
            edge.extraSettingsEl.removeClass("disabled");
        }
      }).then((cb) => {
        cb.extraSettingsEl.addClass("setting-cc-check");
        if (menuItem.selector) {
          cb.extraSettingsEl.removeClass("setting-cc-check");
          cb.extraSettingsEl.addClass("setting-cc-checked");
        }
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => component.setIcon("x").onClick(() => {
      setting.settingEl.parentElement.removeClass("add-setting");
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-warning");
    })).addToggle((toggle) => toggle.toggleEl.addClass("hidden"));
    return setting;
  }
  buildNewSubMenuItemSetting(containerEl, type, onSubmit) {
    const subMenuItem = {
      class: "",
      type,
      icon: "",
      name: "",
      selector: "",
      enable: true
    };
    const setting = new import_obsidian2.Setting(containerEl).addExtraButton((component) => component.setIcon("plus").onClick(() => {
      onSubmit(subMenuItem);
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-cta");
    })).addExtraButton((component) => component.setIcon("cs-circle-dashed").onClick(() => {
      const callback = (iconName) => {
        subMenuItem.icon = iconName;
      };
      new SelectIconModal(this.app, this.plugin, component, "addNew", null, null, callback).open();
    }).then((cb) => {
      cb.extraSettingsEl.addClass("icon-selector");
    })).addText((text) => text.setPlaceholder("CSS Class").setValue("").onChange((value) => {
      subMenuItem.class = value;
    })).addText((text) => text.setValue(type).setDisabled(true).inputEl.addClass("hidden")).addText((text) => text.setPlaceholder("Name").setValue("").onChange((value) => {
      subMenuItem.name = value;
    })).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.setIcon("cs-badge-cc").setTooltip("Use cssclasses styling").onClick(() => {
        if (!subMenuItem.selector) {
          subMenuItem.selector = "cc";
          component.extraSettingsEl.addClass("setting-cc-checked");
        } else {
          subMenuItem.selector = "";
          component.extraSettingsEl.removeClass("setting-cc-checked");
        }
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => {
      component.then((cb) => {
        cb.extraSettingsEl.addClass("hidden");
      });
    }).addExtraButton((component) => component.setIcon("x").onClick(() => {
      setting.settingEl.parentElement.removeClass("add-setting");
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-warning");
    })).addToggle((toggle) => toggle.toggleEl.addClass("hidden"));
    return setting;
  }
  buildNewIconSetting(containerEl, onSubmit) {
    const icon = {
      name: "",
      svgContent: ``
    };
    const setting = new import_obsidian2.Setting(containerEl).addExtraButton((component) => component.setIcon("plus").onClick(() => {
      onSubmit(icon);
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-cta");
    })).addText((text) => text.setPlaceholder("Icon Name").setValue("").onChange((value) => {
      icon.name = value;
    })).addText((text) => text.setPlaceholder("SVG Content").setValue(``).onChange((value) => {
      icon.svgContent = `${value}`;
    })).addExtraButton((component) => component.setIcon("x").onClick(() => {
      setting.settingEl.parentElement.removeClass("add-setting");
    }).then((cb) => {
      cb.extraSettingsEl.addClass("mod-warning");
    }));
    return setting;
  }
  async saveAsNewPackage(config, packageName) {
    this.plugin.settings.configs[packageName] = {
      name: packageName,
      menuItems: [],
      subMenuItems: {},
      customIcons: []
    };
    this.plugin.settings.savedConfigs[packageName] = {
      name: packageName,
      menuItems: [],
      subMenuItems: {},
      customIcons: []
    };
    this.plugin.settings.configs[packageName].menuItems = config.menuItems;
    this.plugin.settings.configs[packageName].subMenuItems = config.subMenuItems;
    this.plugin.settings.configs[packageName].customIcons = config.customIcons;
    this.plugin.settings.savedConfigs[packageName].menuItems = JSON.parse(JSON.stringify(config.menuItems));
    this.plugin.settings.savedConfigs[packageName].subMenuItems = JSON.parse(JSON.stringify(config.subMenuItems));
    this.plugin.settings.savedConfigs[packageName].customIcons = JSON.parse(JSON.stringify(config.customIcons));
    this.plugin.settings.currentConfig = packageName;
    await this.plugin.saveSettings();
    this.plugin.savedSettings();
    this.plugin.registerCustomIcons();
    this.plugin.patchCanvasMenu(true);
    this.display();
  }
  async moveSetting(setting, isMoveDown) {
    const settings = setting.settings;
    if (settings instanceof Array) {
      const settingEl = setting.settingEl;
      const parentEl = settingEl.parentElement;
      if (parentEl == null)
        return;
      const index = Array.from(parentEl.children).indexOf(settingEl);
      if (isMoveDown) {
        if (index == settings.length - 1)
          return;
        parentEl.insertAfter(settingEl, settingEl.nextElementSibling);
        settings.splice(index + 1, 0, settings.splice(index, 1)[0]);
      } else {
        if (index <= 0)
          return;
        parentEl.insertBefore(settingEl, settingEl.previousElementSibling);
        settings.splice(index - 1, 0, settings.splice(index, 1)[0]);
      }
      await this.plugin.saveSettings();
      this.plugin.patchCanvasMenu();
      this.display();
    }
  }
  removePreviousIcons(currentConfig, savedConfigs) {
    const previousConfig = currentConfig.slice();
    let previousIcons = [];
    if (currentConfig in savedConfigs) {
      previousIcons = this.plugin.settings.savedConfigs[previousConfig].customIcons.map((icon) => icon.name);
    } else {
      previousIcons = this.plugin.settings.configs[previousConfig].customIcons.map((icon) => icon.name);
    }
    previousIcons.forEach((icon) => {
      (0, import_obsidian2.removeIcon)(icon);
    });
  }
};
var SelectIconModal = class extends import_obsidian2.Modal {
  constructor(app, plugin, component, container, config, index, callback) {
    super(app, plugin);
    this.plugin = plugin;
    this.component = component;
    this.container = container;
    this.config = config;
    this.index = index;
    this.callback = callback;
  }
  onOpen() {
    const { contentEl } = this;
    const iconList = contentEl.createDiv("icon-list-container", (el) => {
      el.createDiv({
        cls: "clickable-icon cs-icons actived",
        attr: {
          "data-label": "csIcons"
        }
      }, (item) => {
        (0, import_obsidian2.setIcon)(item, "shapes");
        item.onClickEvent(() => {
          if (el.querySelector(".builtin-icons.actived")) {
            el.querySelector(".builtin-icons.actived").removeClass("actived");
          }
          ;
          item.addClass("actived");
          if (this.contentEl.querySelector(".builtin-icons-container.actived")) {
            this.contentEl.querySelector(".builtin-icons-container.actived").removeClass("actived");
          }
          ;
          this.contentEl.querySelector(".cs-icons-container").addClass("actived");
        });
        item.createEl("div", { text: "Custom Icons", cls: "icon-list-name" });
      });
      el.createDiv({
        cls: "clickable-icon builtin-icons",
        attr: {
          "data-label": "built-in Icons"
        }
      }, (item) => {
        (0, import_obsidian2.setIcon)(item, "blocks");
        item.onClickEvent(() => {
          if (el.querySelector(".cs-icons.actived")) {
            el.querySelector(".cs-icons.actived").removeClass("actived");
          }
          ;
          item.addClass("actived");
          if (this.contentEl.querySelector(".cs-icons-container.actived")) {
            this.contentEl.querySelector(".cs-icons-container.actived").removeClass("actived");
          }
          ;
          this.contentEl.querySelector(".builtin-icons-container").addClass("actived");
        });
        item.createEl("div", { text: "Built-in Icons", cls: "icon-list-name" });
      });
    });
    const csIcons2 = this.createIconContainer("cs-icons-container actived", csIconList);
    const builtInIcons = this.createIconContainer("builtin-icons-container", (0, import_obsidian2.getIconIds)().filter((item) => !csIconList.includes(item)));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  createIconContainer(containerId, iconList) {
    const container = this.contentEl.createDiv(containerId, (el) => {
      iconList.forEach((icon) => {
        el.createDiv({
          cls: "clickable-icon",
          attr: {
            "data-icon": icon
          }
        }, (item) => {
          (0, import_obsidian2.setIcon)(item, icon);
          (0, import_obsidian2.setTooltip)(item, icon);
          item.onClickEvent(async () => {
            if (this.container === "menuItem") {
              this.config.menuItems[this.index].icon = icon;
              await this.plugin.saveSettings();
            }
            if (this.container === "subMenuItem") {
              this.config[this.index].icon = icon;
              await this.plugin.saveSettings();
            }
            if (this.container === "addNew") {
              await this.callback(icon);
            }
            this.component.setIcon(icon);
            this.close();
          });
        });
      });
    });
    return container;
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  currentConfig: "default",
  configs: defaultConfigs,
  savedConfigs: {}
};
var defaultSettings = JSON.parse(JSON.stringify(defaultConfigs));
var savedSettings = {};
var csIconList = [];
var CanvasStyleMenuPlugin2 = class extends import_obsidian3.Plugin {
  async checkOldSettings() {
    if (this.settings.menuItems || this.settings.subMenuItems || this.settings.customIcons) {
      this.settings.configs.custom1 = {
        name: "custom1",
        menuItems: [],
        subMenuItems: {},
        customIcons: []
      };
      this.settings.savedConfigs.custom1 = {
        name: "custom1",
        menuItems: [],
        subMenuItems: {},
        customIcons: []
      };
      const menuItemsNew = parseOldSettingsItems(this.settings.menuItems);
      if (menuItemsNew) {
        menuItemsNew.forEach((item) => {
          item.name = item.title;
          item.cat = item.cat ? item.cat : "";
          item.selector = item.selector ? item.selector : "";
          item.enable = true;
          delete item.title;
        });
        this.settings.configs.custom1.menuItems = sortByProperty(menuItemsNew, "cat");
        this.settings.savedConfigs.custom1.menuItems = JSON.parse(JSON.stringify(this.settings.configs.custom1.menuItems));
        delete this.settings.menuItems;
      }
      const subMenuItemsNew = parseOldSettingsItems(this.settings.subMenuItems);
      if (subMenuItemsNew) {
        subMenuItemsNew.forEach((item) => {
          item.name = item.title;
          item.selector = item.selector ? item.selector : "";
          item.enable = true;
          delete item.title;
        });
        this.settings.configs.custom1.subMenuItems = groupItemsByProperty(subMenuItemsNew, "type");
        this.settings.savedConfigs.custom1.subMenuItems = JSON.parse(JSON.stringify(this.settings.configs.custom1.subMenuItems));
        delete this.settings.subMenuItems;
      }
      const typeValues = this.settings.configs.custom1.menuItems.map((item) => item.type);
      typeValues.forEach((type) => {
        if (!this.settings.configs.custom1.subMenuItems[type]) {
          this.settings.configs.custom1.subMenuItems[type] = [];
          this.settings.savedConfigs.custom1.subMenuItems[type] = [];
        }
      });
      if (this.settings.customIcons) {
        this.settings.customIcons.forEach((icon) => {
          icon.name = icon.iconName;
          delete icon.iconName;
        });
        this.settings.configs.custom1.customIcons = this.settings.customIcons;
        this.settings.savedConfigs.custom1.customIcons = JSON.parse(JSON.stringify(this.settings.configs.custom1.customIcons));
        delete this.settings.customIcons;
      }
      await this.saveSettings();
    }
  }
  savedSettings() {
    savedSettings = JSON.parse(JSON.stringify(this.settings.savedConfigs));
  }
  async onload() {
    await this.loadSettings();
    await this.checkOldSettings();
    this.savedSettings();
    this.registerCanvasEvents();
    this.registerCustomIcons(csIcons);
    this.patchCanvasMenu();
    this.patchCanvasNode();
    this.addSettingTab(new CanvasStyleMenuSettingTab(this.app, this));
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  onunload() {
    console.log("unloading plugin");
    refreshAllCanvasView(this.app);
  }
  registerCanvasEvents() {
    const menuConfig = this.settings.configs[this.settings.currentConfig].menuItems;
    const subMenuConfig = transformSubMenuItems(this.settings.configs[this.settings.currentConfig].subMenuItems);
    const menuTypes = menuConfig.map((item) => item.type);
    const subMenuTypes = subMenuConfig.map((item) => item.type);
    const toggleMenu = menuTypes.filter((type) => !subMenuTypes.includes(type));
    this.registerEvent(this.app.workspace.on("canvas-style-menu:patched-canvas", () => {
      refreshAllCanvasView(this.app);
    }));
    this.registerEvent(this.app.workspace.on("canvas-style-menu:patch-canvas-node", () => {
      this.patchCanvasNode();
      refreshAllCanvasView(this.app);
    }));
    this.registerEvent(this.app.workspace.on("canvas:selection-menu", (menu, canvas) => {
      handleSelectionContextMenu(this, menu, canvas, menuConfig, subMenuConfig, toggleMenu);
    }));
    this.registerEvent(this.app.workspace.on("canvas:node-menu", (menu, node) => {
      handleNodeContextMenu(this, menu, node, menuConfig, subMenuConfig, toggleMenu);
    }));
  }
  registerCustomIcons(csIcons2) {
    let customIcons = [];
    if (csIcons2) {
      customIcons = csIcons2.concat(this.settings.configs[this.settings.currentConfig].customIcons);
    } else {
      customIcons = this.settings.configs[this.settings.currentConfig].customIcons;
    }
    const jsonIcons = JSON.stringify(customIcons);
    const parsedIcons = JSON.parse(jsonIcons);
    parsedIcons.forEach((icon) => {
      const name = icon.name;
      const svgContent = icon.svgContent.replace(/( width| height)="(\d+)"/g, '$1="100%"');
      (0, import_obsidian3.addIcon)(name, svgContent);
      csIconList.push(name);
    });
  }
  patchCanvasMenu(refreshed) {
    if (refreshed) {
      this.nodePatched = false;
      this.groupPatched = false;
      this.edgePatched = false;
    }
    let nodePatched = this.nodePatched;
    let groupPatched = this.groupPatched;
    let edgePatched = this.edgePatched;
    const patchMenu = () => {
      var _a;
      const canvasView = (_a = this.app.workspace.getLeavesOfType("canvas").first()) == null ? void 0 : _a.view;
      if (!canvasView)
        return false;
      const menu = canvasView == null ? void 0 : canvasView.canvas.menu;
      if (!menu)
        return false;
      const selection = menu.selection;
      if (!selection)
        return false;
      const menuConfig = this.settings.configs[this.settings.currentConfig].menuItems;
      const subMenuConfig = transformSubMenuItems(this.settings.configs[this.settings.currentConfig].subMenuItems);
      const menuTypes = menuConfig.map((item) => item.type);
      const subMenuTypes = subMenuConfig.map((item) => item.type);
      const toggleMenu = menuTypes.filter((type) => !subMenuTypes.includes(type));
      const menuUninstaller = around(menu.constructor.prototype, {
        render: (next) => function(...args) {
          var _a2;
          const result = next.call(this, ...args);
          const currentSelection = this.canvas.selection;
          if (!nodePatched) {
            if (this.canvas.nodes.size > 0) {
              this.canvas.app.workspace.trigger("canvas-style-menu:patch-canvas-node");
              nodePatched = true;
            }
          }
          const nodes = this.canvas.nodes.values();
          if (!groupPatched) {
            for (const node of nodes) {
              if ((node == null ? void 0 : node.unknownData.type) === "group") {
                this.canvas.app.workspace.trigger("canvas-style-menu:patch-canvas-node");
                groupPatched = true;
                break;
              }
            }
          }
          const edge = this.canvas.edges.values().next().value;
          if (!edgePatched) {
            if (this.canvas.edges.size > 0 && ((_a2 = edge == null ? void 0 : edge.unknownData) == null ? void 0 : _a2.id)) {
              this.canvas.app.workspace.trigger("canvas-style-menu:patch-canvas-node");
              edgePatched = true;
            }
          }
          const menuClasses = menuConfig.map((item) => item.class);
          const oldMenuItems = this.menuEl.querySelectorAll(".clickable-icon[class$=-menu-item]");
          oldMenuItems.forEach((item) => {
            const itemClass = item.className.match(/^(.+?)(?=-menu-item)/)[1];
            if (!menuClasses.includes(itemClass)) {
              item.remove();
            }
          });
          const createMenuButton = (category, cssClass, tooltip, icon) => {
            const currentSelectionArray = Array.from(currentSelection);
            const allFalse = currentSelectionArray.every((value) => {
              return !value.nodeEl;
            });
            if (allFalse) {
              if (category === "edge") {
                if (this.menuEl.querySelector(`.${cssClass}-menu-item`))
                  return result;
                const buttonEl = createEl("button", `clickable-icon ${cssClass}-menu-item`);
                (0, import_obsidian3.setTooltip)(buttonEl, tooltip, {
                  placement: "top"
                });
                (0, import_obsidian3.setIcon)(buttonEl, icon);
                return buttonEl;
              }
            } else {
              if (category !== "edge") {
                if (this.menuEl.querySelector(`.${cssClass}-menu-item`))
                  return result;
                const buttonEl = createEl("button", `clickable-icon ${cssClass}-menu-item`);
                (0, import_obsidian3.setTooltip)(buttonEl, tooltip, {
                  placement: "top"
                });
                (0, import_obsidian3.setIcon)(buttonEl, icon);
                return buttonEl;
              }
            }
          };
          const handleButtonClick = (buttonEl, clickHandler) => {
            const pos = buttonEl.getBoundingClientRect();
            if (!buttonEl.hasClass("has-active-menu")) {
              buttonEl.toggleClass("has-active-menu", true);
              const menu2 = new import_obsidian3.Menu();
              const containingNodes = this.canvas.getContainingNodes(this.selection.bbox);
              clickHandler(menu2, containingNodes);
              buttonEl.toggleClass("has-active-menu", false);
              menu2.setParentElement(this.menuEl).showAtPosition({
                x: pos.x,
                y: pos.bottom,
                width: pos.width,
                overlap: true
              });
            }
          };
          const createAndSetupMenuButton = (category, cssClass, toggleMenu2, tooltip, icon, clickHandler) => {
            const buttonEl = createMenuButton(category, cssClass, tooltip, icon);
            if (buttonEl) {
              const toggleMenuItemsClass = getToggleMenuItemsClass(toggleMenu2, menuConfig);
              const currentSelection2 = this.canvas.selection;
              const containingNodes = this.canvas.getContainingNodes(this.selection.bbox);
              const menuItemType = getItemProperty(cssClass, menuConfig, "type");
              if (toggleMenuItemsClass.includes(cssClass)) {
                buttonEl.addEventListener("click", () => {
                  var _a3, _b;
                  currentSelection2.size === 1 ? handleSingleNode((_a3 = Array.from(currentSelection2)) == null ? void 0 : _a3.first(), null, menuItemType, cssClass, false) : containingNodes.length > 1 ? handleMultiNodesViaNodes(this.canvas, containingNodes, null, menuItemType, cssClass, false) : currentSelection2 ? handleSingleNode((_b = Array.from(currentSelection2)) == null ? void 0 : _b.first(), null, menuItemType, cssClass, false) : "";
                });
              } else
                buttonEl.addEventListener("click", () => handleButtonClick(buttonEl, clickHandler));
              buttonEl.addEventListener("contextmenu", () => {
                var _a3, _b;
                currentSelection2.size === 1 ? handleSingleNode((_a3 = Array.from(currentSelection2)) == null ? void 0 : _a3.first(), null, menuItemType, cssClass, true) : containingNodes.length > 1 ? handleMultiNodesViaNodes(this.canvas, containingNodes, null, menuItemType, cssClass, true) : currentSelection2 ? handleSingleNode((_b = Array.from(currentSelection2)) == null ? void 0 : _b.first(), null, menuItemType, cssClass, true) : "";
              });
              this.menuEl.appendChild(buttonEl);
            }
          };
          menuConfig.forEach((memuItem) => {
            if (memuItem.enable === true) {
              createAndSetupMenuButton(memuItem.cat, memuItem.class, toggleMenu, memuItem.name, memuItem.icon, (menu2, containingNodes) => {
                handleMenu(menu2, subMenuConfig, async (cssClass) => {
                  var _a3, _b;
                  const currentSelection2 = this.canvas.selection;
                  currentSelection2.size === 1 ? handleSingleNode((_a3 = Array.from(currentSelection2)) == null ? void 0 : _a3.first(), subMenuConfig, null, cssClass, false) : containingNodes.length > 1 ? handleMultiNodesViaNodes(this.canvas, containingNodes, subMenuConfig, null, cssClass, false) : currentSelection2 ? handleSingleNode((_b = Array.from(currentSelection2)) == null ? void 0 : _b.first(), subMenuConfig, null, cssClass, false) : "";
                }, memuItem.type);
              });
            }
          });
          return result;
        }
      });
      this.register(menuUninstaller);
      this.app.workspace.trigger("canvas-style-menu:patched-canvas");
      console.log("Canvas-Style-Menu: canvas menu patched");
      return true;
    };
    this.app.workspace.onLayoutReady(() => {
      if (!patchMenu()) {
        const evt = this.app.workspace.on("layout-change", () => {
          patchMenu() && this.app.workspace.offref(evt);
        });
        this.registerEvent(evt);
      }
    });
  }
  patchCanvasNode() {
    const menuConfig = this.settings.configs[this.settings.currentConfig].menuItems;
    const subMenuConfig = transformSubMenuItems(this.settings.configs[this.settings.currentConfig].subMenuItems);
    const allMenuConfig = menuConfig.concat(subMenuConfig);
    const initCanvasStyle = (node) => {
      return new CanvasStyle(node, menuConfig);
    };
    const patchNode = () => {
      var _a, _b, _c;
      let groupPatched = false;
      if (this.nodePatched && this.groupPatched)
        return;
      const canvasView = (_a = this.app.workspace.getLeavesOfType("canvas").first()) == null ? void 0 : _a.view;
      if (!canvasView)
        return false;
      const canvas = canvasView == null ? void 0 : canvasView.canvas;
      if (!canvas)
        return false;
      let node = ((_b = this.app.workspace.getLeavesOfType("canvas").first()) == null ? void 0 : _b.view).canvas.nodes.values().next().value;
      const nodes = ((_c = this.app.workspace.getLeavesOfType("canvas").first()) == null ? void 0 : _c.view).canvas.nodes.values();
      for (const group of nodes) {
        if ((group == null ? void 0 : group.unknownData.type) === "group") {
          node = group;
          groupPatched = true;
          break;
        }
      }
      if (!node)
        return false;
      let prototypeNode = Object.getPrototypeOf(node);
      while (prototypeNode && prototypeNode !== Object.prototype) {
        prototypeNode = Object.getPrototypeOf(prototypeNode);
        if (prototypeNode.renderZIndex) {
          break;
        }
      }
      if (!prototypeNode)
        return false;
      const uninstallerNode = around(prototypeNode, {
        render: (next) => function(...args) {
          const result = next.call(this, ...args);
          this.nodeCSSclass = initCanvasStyle(this);
          const typeToPropertyMap = menuConfig.reduce((acc, item) => {
            acc[item.type] = `unknownData.${item.type}`;
            return acc;
          }, {});
          menuConfig.forEach(async (item) => {
            const propertyKey = typeToPropertyMap[item.type];
            const propertyValue = new Function(`return this.${propertyKey}`).call(this);
            if (propertyValue) {
              if (getItemProperty(propertyValue, allMenuConfig, "selector") === "cc") {
                await modifyClassOnElements("add", this.contentEl, "markdown-preview-view", propertyValue);
              } else
                this.nodeEl.classList.add(propertyValue);
            }
          });
          return result;
        },
        setData: (next) => function(data) {
          const typeToPropertyMap = menuConfig.reduce((acc, item) => {
            acc[item.type] = `${item.type}`;
            return acc;
          }, {});
          menuConfig.forEach((item) => {
            var _a2;
            const propertyKey = typeToPropertyMap[item.type];
            const propertyValue = data[propertyKey];
            const selector = getItemProperty(propertyValue, allMenuConfig, "selector");
            (_a2 = this.nodeCSSclass) == null ? void 0 : _a2.setStyle(item.cat, selector, item.type, propertyValue);
          });
          return next.call(this, data);
        }
      });
      this.register(uninstallerNode);
      if (!this.nodePatched) {
        this.nodePatched = true;
        console.log("Canvas-Style-Menu: canvas node patched");
      }
      if (groupPatched) {
        if (!this.groupPatched) {
          this.groupPatched = true;
          console.log("Canvas-Style-Menu: canvas group patched");
        }
      }
      return true;
    };
    const patchEdge = () => {
      var _a, _b;
      if (this.edgePatched)
        return;
      const canvasView = (_a = this.app.workspace.getLeavesOfType("canvas").first()) == null ? void 0 : _a.view;
      if (!canvasView)
        return false;
      const canvas = canvasView == null ? void 0 : canvasView.canvas;
      if (!canvas)
        return false;
      const edge = ((_b = this.app.workspace.getLeavesOfType("canvas").first()) == null ? void 0 : _b.view).canvas.edges.values().next().value;
      if (!edge)
        return false;
      let prototypeEdge = Object.getPrototypeOf(edge);
      if (!prototypeEdge) {
        return false;
      } else {
        const uninstallerEdge = around(prototypeEdge, {
          render: (next) => function(...args) {
            const result = next.call(this, ...args);
            this.nodeCSSclass = initCanvasStyle(this);
            let fromOffsetH = 0;
            let fromOffsetV = 0;
            let toOffsetH = 0;
            let toOffsetV = 0;
            if (this.from.side === "right")
              fromOffsetH = -8;
            if (this.from.side === "left")
              fromOffsetH = 8;
            if (this.from.side === "top")
              fromOffsetV = 8;
            if (this.from.side === "bottom")
              fromOffsetV = -8;
            if (this.to.side === "right")
              toOffsetH = -8;
            if (this.to.side === "left")
              toOffsetH = 8;
            if (this.to.side === "top")
              toOffsetV = 8;
            if (this.to.side === "bottom")
              toOffsetV = -8;
            function createLinePath(x1, y1, x2, y2) {
              const pathData = `M${x1},${y1} L${x2},${y2}`;
              return pathData;
            }
            const linePath = createLinePath(this.bezier.from.x + fromOffsetH, this.bezier.from.y + fromOffsetV, this.bezier.to.x + toOffsetH, this.bezier.to.y + toOffsetV);
            function calculateAngle(x1, y1, x2, y2) {
              const angleRad = Math.atan2(y2 - y1, x2 - x1);
              const angleDeg = angleRad * 180 / Math.PI;
              return angleDeg;
            }
            const angle = calculateAngle(this.bezier.from.x + fromOffsetH, this.bezier.from.y + fromOffsetV, this.bezier.to.x + toOffsetH, this.bezier.to.y + toOffsetV);
            const fromRotateAngle = angle - 90;
            const toRotateAngle = angle - 270;
            const elbowPath = createElbowPath(this.from.side, this.to.side, this.bezier.from.x + fromOffsetH, this.bezier.from.y + fromOffsetV, this.bezier.to.x + toOffsetH, this.bezier.to.y + toOffsetV);
            const typeToPropertyMap = menuConfig.reduce((acc, item) => {
              acc[item.type] = `unknownData.${item.type}`;
              return acc;
            }, {});
            menuConfig.forEach((item) => {
              const propertyKey = typeToPropertyMap[item.type];
              const propertyValue = new Function(`return this.${propertyKey}`).call(this);
              if (propertyValue) {
                this.lineGroupEl.classList.add(propertyValue);
                this.lineEndGroupEl.classList.add(propertyValue);
                if (propertyValue === "cs-line-straight") {
                  const displayPath = this.lineGroupEl.querySelector(".canvas-display-path");
                  const interactionPath = this.lineGroupEl.querySelector(".canvas-interaction-path");
                  displayPath.setAttribute("d", linePath);
                  interactionPath.setAttribute("d", linePath);
                  if (this.toLineEnd && !this.fromLineEnd) {
                    const toNewTransform = this.toLineEnd.el.style.transform.replace(/rotate\([-\d]+deg\)/, `rotate(${toRotateAngle}deg)`);
                    this.toLineEnd.el.style.transform = toNewTransform;
                  }
                  if (this.fromLineEnd) {
                    const fromNewTransform = this.fromLineEnd.el.style.transform.replace(/rotate\([-\d]+deg\)/, `rotate(${fromRotateAngle}deg)`);
                    const toNewTransform = this.toLineEnd.el.style.transform.replace(/rotate\([-\d]+deg\)/, `rotate(${toRotateAngle}deg)`);
                    this.fromLineEnd.el.style.transform = fromNewTransform;
                    this.toLineEnd.el.style.transform = toNewTransform;
                  }
                }
                if (propertyValue === "cs-line-elbow") {
                  const displayPath = this.lineGroupEl.querySelector(".canvas-display-path");
                  const interactionPath = this.lineGroupEl.querySelector(".canvas-interaction-path");
                  displayPath.setAttribute("d", elbowPath);
                  interactionPath.setAttribute("d", elbowPath);
                }
              }
            });
            return result;
          },
          setData: (next) => function(data) {
            const typeToPropertyMap = menuConfig.reduce((acc, item) => {
              acc[item.type] = `${item.type}`;
              return acc;
            }, {});
            menuConfig.forEach((item) => {
              var _a2;
              const propertyKey = typeToPropertyMap[item.type];
              const propertyValue = data[propertyKey];
              const selector = getItemProperty(propertyValue, allMenuConfig, "selector");
              (_a2 = this.nodeCSSclass) == null ? void 0 : _a2.setStyle(item.cat, selector, item.type, propertyValue);
            });
            return next.call(this, data);
          }
        });
        this.register(uninstallerEdge);
      }
      if (!this.edgePatched) {
        this.edgePatched = true;
        console.log("Canvas-Style-Menu: canvas edge patched");
      }
      return true;
    };
    this.app.workspace.onLayoutReady(() => {
      if (!patchNode()) {
        const evt = this.app.workspace.on("layout-change", () => {
          this.nodePatched && this.app.workspace.offref(evt);
        });
        this.registerEvent(evt);
      }
      if (!patchEdge()) {
        const evt = this.app.workspace.on("layout-change", () => {
          this.edgePatched && this.app.workspace.offref(evt);
        });
        this.registerEvent(evt);
      }
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAibm9kZV9tb2R1bGVzL21vbmtleS1hcm91bmQvbWpzL2luZGV4LmpzIiwgInNyYy9DYW52YXNTdHlsZS50cyIsICJzcmMvdXRpbHMudHMiLCAic3JjL21lbXVDb25maWdzLnRzIiwgInNyYy9zZXR0aW5nLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBhZGRJY29uLCBDYW52YXMsIENhbnZhc05vZGUsIENhbnZhc1ZpZXcsIE1lbnUsIFBsdWdpbiwgc2V0SWNvbiwgc2V0VG9vbHRpcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgYXJvdW5kIH0gZnJvbSAnbW9ua2V5LWFyb3VuZCc7XHJcbmltcG9ydCBDYW52YXNTdHlsZSBmcm9tIFwiLi9DYW52YXNTdHlsZVwiO1xyXG5pbXBvcnQgeyBkZWZhdWx0Q29uZmlncywgY3NJY29ucyB9IGZyb20gXCIuL21lbXVDb25maWdzXCJcclxuaW1wb3J0IHtcclxuICAgIGhhbmRsZU1lbnUsXHJcbiAgICBoYW5kbGVNdWx0aU5vZGVzVmlhTm9kZXMsXHJcbiAgICBoYW5kbGVOb2RlQ29udGV4dE1lbnUsXHJcbiAgICBoYW5kbGVTZWxlY3Rpb25Db250ZXh0TWVudSxcclxuICAgIGhhbmRsZVNpbmdsZU5vZGUsXHJcbiAgICByZWZyZXNoQWxsQ2FudmFzVmlldyxcclxuICAgIGdldFRvZ2dsZU1lbnVJdGVtc0NsYXNzLFxyXG4gICAgZ2V0SXRlbVByb3BlcnR5LFxyXG4gICAgbW9kaWZ5Q2xhc3NPbkVsZW1lbnRzLFxyXG4gICAgY3JlYXRlRWxib3dQYXRoLFxyXG4gICAgcGFyc2VPbGRTZXR0aW5nc0l0ZW1zLFxyXG4gICAgc29ydEJ5UHJvcGVydHksXHJcbiAgICBncm91cEl0ZW1zQnlQcm9wZXJ0eSxcclxuICAgIHRyYW5zZm9ybVN1Yk1lbnVJdGVtc1xyXG59IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCBDYW52YXNTdHlsZU1lbnVTZXR0aW5nVGFiIGZyb20gXCIuL3NldHRpbmdcIjtcclxuXHJcbmludGVyZmFjZSBNeVBsdWdpblNldHRpbmdzIHtcclxuICAgIGN1cnJlbnRDb25maWc6IHN0cmluZztcclxuICAgIGNvbmZpZ3M6IENvbmZpZztcclxuICAgIHNhdmVkQ29uZmlnczogQ29uZmlnO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xyXG4gICAgY3VycmVudENvbmZpZzogXCJkZWZhdWx0XCIsXHJcbiAgICBjb25maWdzOiBkZWZhdWx0Q29uZmlncyxcclxuICAgIHNhdmVkQ29uZmlnczoge30sXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBkZWZhdWx0U2V0dGluZ3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZmF1bHRDb25maWdzKSk7XHJcbmV4cG9ydCBsZXQgc2F2ZWRTZXR0aW5ncyA9IHt9O1xyXG5leHBvcnQgbGV0IGNzSWNvbkxpc3Q6IHN0cmluZ1tdID0gW107XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXNTdHlsZU1lbnVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XHJcbiAgICBub2RlUGF0Y2hlZDogYm9vbGVhbjtcclxuICAgIGdyb3VwUGF0Y2hlZDogYm9vbGVhbjtcclxuICAgIGVkZ2VQYXRjaGVkOiBib29sZWFuO1xyXG5cclxuICAgIGFzeW5jIGNoZWNrT2xkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgLy8gTWlncmF0aW9uIG9mIHNldHRpbmdzIGZyb20gdmVyc2lvbiAwLjAuNSBhbmQgZWFybGllci5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tZW51SXRlbXMgfHwgdGhpcy5zZXR0aW5ncy5zdWJNZW51SXRlbXMgfHwgdGhpcy5zZXR0aW5ncy5jdXN0b21JY29ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmNvbmZpZ3MuY3VzdG9tMSA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY3VzdG9tMVwiLFxyXG4gICAgICAgICAgICAgICAgbWVudUl0ZW1zOiBbXSxcclxuICAgICAgICAgICAgICAgIHN1Yk1lbnVJdGVtczoge30sXHJcbiAgICAgICAgICAgICAgICBjdXN0b21JY29uczogW10sXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnNhdmVkQ29uZmlncy5jdXN0b20xID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjdXN0b20xXCIsXHJcbiAgICAgICAgICAgICAgICBtZW51SXRlbXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgc3ViTWVudUl0ZW1zOiB7fSxcclxuICAgICAgICAgICAgICAgIGN1c3RvbUljb25zOiBbXSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnVJdGVtc05ldyA9IHBhcnNlT2xkU2V0dGluZ3NJdGVtcyh0aGlzLnNldHRpbmdzLm1lbnVJdGVtcyk7XHJcbiAgICAgICAgICAgIGlmIChtZW51SXRlbXNOZXcpIHtcclxuICAgICAgICAgICAgICAgIG1lbnVJdGVtc05ldy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ubmFtZSA9IGl0ZW0udGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jYXQgPSBpdGVtLmNhdCA/IGl0ZW0uY2F0IDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zZWxlY3RvciA9IGl0ZW0uc2VsZWN0b3IgPyBpdGVtLnNlbGVjdG9yIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5lbmFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpdGVtLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmNvbmZpZ3MuY3VzdG9tMS5tZW51SXRlbXMgPSBzb3J0QnlQcm9wZXJ0eShtZW51SXRlbXNOZXcsICdjYXQnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2F2ZWRDb25maWdzLmN1c3RvbTEubWVudUl0ZW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmdzLmNvbmZpZ3MuY3VzdG9tMS5tZW51SXRlbXMpKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNldHRpbmdzLm1lbnVJdGVtcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3ViTWVudUl0ZW1zTmV3ID0gcGFyc2VPbGRTZXR0aW5nc0l0ZW1zKHRoaXMuc2V0dGluZ3Muc3ViTWVudUl0ZW1zKTtcclxuICAgICAgICAgICAgaWYgKHN1Yk1lbnVJdGVtc05ldykge1xyXG4gICAgICAgICAgICAgICAgc3ViTWVudUl0ZW1zTmV3LmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gaXRlbS50aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNlbGVjdG9yID0gaXRlbS5zZWxlY3RvciA/IGl0ZW0uc2VsZWN0b3IgOiAnJztcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmVuYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGl0ZW0udGl0bGU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY29uZmlncy5jdXN0b20xLnN1Yk1lbnVJdGVtcyA9IGdyb3VwSXRlbXNCeVByb3BlcnR5KHN1Yk1lbnVJdGVtc05ldywgJ3R5cGUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2F2ZWRDb25maWdzLmN1c3RvbTEuc3ViTWVudUl0ZW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmdzLmNvbmZpZ3MuY3VzdG9tMS5zdWJNZW51SXRlbXMpKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNldHRpbmdzLnN1Yk1lbnVJdGVtcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgdHlwZVZhbHVlcyA9IHRoaXMuc2V0dGluZ3MuY29uZmlncy5jdXN0b20xLm1lbnVJdGVtcy5tYXAoaXRlbSA9PiBpdGVtLnR5cGUpO1xyXG4gICAgICAgICAgICB0eXBlVmFsdWVzLmZvckVhY2godHlwZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuY29uZmlncy5jdXN0b20xLnN1Yk1lbnVJdGVtc1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY29uZmlncy5jdXN0b20xLnN1Yk1lbnVJdGVtc1t0eXBlXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2F2ZWRDb25maWdzLmN1c3RvbTEuc3ViTWVudUl0ZW1zW3R5cGVdID0gW107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbnMuZm9yRWFjaChpY29uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uLm5hbWUgPSBpY29uLmljb25OYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpY29uLmljb25OYW1lO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmNvbmZpZ3MuY3VzdG9tMS5jdXN0b21JY29ucyA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbnM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnNhdmVkQ29uZmlncy5jdXN0b20xLmN1c3RvbUljb25zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmdzLmNvbmZpZ3MuY3VzdG9tMS5jdXN0b21JY29ucykpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2V0dGluZ3MuY3VzdG9tSWNvbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNhdmVkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgc2F2ZWRTZXR0aW5ncyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZXR0aW5ncy5zYXZlZENvbmZpZ3MpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbmxvYWQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmNoZWNrT2xkU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnNhdmVkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNhbnZhc0V2ZW50cygpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDdXN0b21JY29ucyhjc0ljb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5wYXRjaENhbnZhc01lbnUoKTtcclxuICAgICAgICB0aGlzLnBhdGNoQ2FudmFzTm9kZSgpO1xyXG5cclxuICAgICAgICAvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQ2FudmFzU3R5bGVNZW51U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbnVubG9hZCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndW5sb2FkaW5nIHBsdWdpbicpO1xyXG4gICAgICAgIHJlZnJlc2hBbGxDYW52YXNWaWV3KHRoaXMuYXBwKTtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3RlckNhbnZhc0V2ZW50cygpIHtcclxuICAgICAgICBjb25zdCBtZW51Q29uZmlnID0gdGhpcy5zZXR0aW5ncy5jb25maWdzW3RoaXMuc2V0dGluZ3MuY3VycmVudENvbmZpZ10ubWVudUl0ZW1zO1xyXG4gICAgICAgIGNvbnN0IHN1Yk1lbnVDb25maWcgPSB0cmFuc2Zvcm1TdWJNZW51SXRlbXModGhpcy5zZXR0aW5ncy5jb25maWdzW3RoaXMuc2V0dGluZ3MuY3VycmVudENvbmZpZ10uc3ViTWVudUl0ZW1zKTtcclxuICAgICAgICBjb25zdCBtZW51VHlwZXMgPSBtZW51Q29uZmlnLm1hcChpdGVtID0+IGl0ZW0udHlwZSk7XHJcbiAgICAgICAgY29uc3Qgc3ViTWVudVR5cGVzID0gc3ViTWVudUNvbmZpZy5tYXAoaXRlbSA9PiBpdGVtLnR5cGUpO1xyXG4gICAgICAgIGNvbnN0IHRvZ2dsZU1lbnUgPSBtZW51VHlwZXMuZmlsdGVyKHR5cGUgPT4gIXN1Yk1lbnVUeXBlcy5pbmNsdWRlcyh0eXBlKSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJjYW52YXMtc3R5bGUtbWVudTpwYXRjaGVkLWNhbnZhc1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlZnJlc2hBbGxDYW52YXNWaWV3KHRoaXMuYXBwKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImNhbnZhcy1zdHlsZS1tZW51OnBhdGNoLWNhbnZhcy1ub2RlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wYXRjaENhbnZhc05vZGUoKTtcclxuICAgICAgICAgICAgcmVmcmVzaEFsbENhbnZhc1ZpZXcodGhpcy5hcHApO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwiY2FudmFzOnNlbGVjdGlvbi1tZW51XCIsIChtZW51LCBjYW52YXMpID0+IHtcclxuICAgICAgICAgICAgaGFuZGxlU2VsZWN0aW9uQ29udGV4dE1lbnUodGhpcywgbWVudSwgY2FudmFzLCBtZW51Q29uZmlnLCBzdWJNZW51Q29uZmlnLCB0b2dnbGVNZW51KTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImNhbnZhczpub2RlLW1lbnVcIiwgKG1lbnUsIG5vZGUpID0+IHtcclxuICAgICAgICAgICAgaGFuZGxlTm9kZUNvbnRleHRNZW51KHRoaXMsIG1lbnUsIG5vZGUsIG1lbnVDb25maWcsIHN1Yk1lbnVDb25maWcsIHRvZ2dsZU1lbnUpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3RlckN1c3RvbUljb25zKGNzSWNvbnM6IEN1c3RvbUljb25bXSkge1xyXG4gICAgICAgIGxldCBjdXN0b21JY29uczogQ3VzdG9tSWNvbltdID0gW107XHJcbiAgICAgICAgaWYgKGNzSWNvbnMpIHtcclxuICAgICAgICAgICAgY3VzdG9tSWNvbnMgPSBjc0ljb25zLmNvbmNhdCh0aGlzLnNldHRpbmdzLmNvbmZpZ3NbdGhpcy5zZXR0aW5ncy5jdXJyZW50Q29uZmlnXS5jdXN0b21JY29ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VzdG9tSWNvbnMgPSB0aGlzLnNldHRpbmdzLmNvbmZpZ3NbdGhpcy5zZXR0aW5ncy5jdXJyZW50Q29uZmlnXS5jdXN0b21JY29ucztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QganNvbkljb25zID0gSlNPTi5zdHJpbmdpZnkoY3VzdG9tSWNvbnMpO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZEljb25zOiBDdXN0b21JY29uW10gPSBKU09OLnBhcnNlKGpzb25JY29ucyk7XHJcbiAgICAgICAgcGFyc2VkSWNvbnMuZm9yRWFjaCgoaWNvbjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpY29uLm5hbWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHN2Z0NvbnRlbnQgPSBpY29uLnN2Z0NvbnRlbnQucmVwbGFjZSgvKCB3aWR0aHwgaGVpZ2h0KT1cIihcXGQrKVwiL2csICckMT1cIjEwMCVcIicpO1xyXG4gICAgICAgICAgICBhZGRJY29uKG5hbWUsIHN2Z0NvbnRlbnQpO1xyXG4gICAgICAgICAgICBjc0ljb25MaXN0LnB1c2gobmFtZSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwYXRjaENhbnZhc01lbnUocmVmcmVzaGVkOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKHJlZnJlc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVQYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBQYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuZWRnZVBhdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBub2RlUGF0Y2hlZCA9IHRoaXMubm9kZVBhdGNoZWQ7XHJcbiAgICAgICAgbGV0IGdyb3VwUGF0Y2hlZCA9IHRoaXMuZ3JvdXBQYXRjaGVkO1xyXG4gICAgICAgIGxldCBlZGdlUGF0Y2hlZCA9IHRoaXMuZWRnZVBhdGNoZWQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTWVudSA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2FudmFzVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJjYW52YXNcIikuZmlyc3QoKT8udmlldztcclxuICAgICAgICAgICAgaWYgKCFjYW52YXNWaWV3KSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gKGNhbnZhc1ZpZXcgYXMgQ2FudmFzVmlldyk/LmNhbnZhcy5tZW51O1xyXG4gICAgICAgICAgICBpZiAoIW1lbnUpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IG1lbnUuc2VsZWN0aW9uO1xyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGlvbikgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWVudUNvbmZpZyA9IHRoaXMuc2V0dGluZ3MuY29uZmlnc1t0aGlzLnNldHRpbmdzLmN1cnJlbnRDb25maWddLm1lbnVJdGVtc1xyXG4gICAgICAgICAgICBjb25zdCBzdWJNZW51Q29uZmlnID0gdHJhbnNmb3JtU3ViTWVudUl0ZW1zKHRoaXMuc2V0dGluZ3MuY29uZmlnc1t0aGlzLnNldHRpbmdzLmN1cnJlbnRDb25maWddLnN1Yk1lbnVJdGVtcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnVUeXBlcyA9IG1lbnVDb25maWcubWFwKGl0ZW0gPT4gaXRlbS50eXBlKTtcclxuICAgICAgICAgICAgY29uc3Qgc3ViTWVudVR5cGVzID0gc3ViTWVudUNvbmZpZy5tYXAoaXRlbSA9PiBpdGVtLnR5cGUpO1xyXG4gICAgICAgICAgICBjb25zdCB0b2dnbGVNZW51ID0gbWVudVR5cGVzLmZpbHRlcih0eXBlID0+ICFzdWJNZW51VHlwZXMuaW5jbHVkZXModHlwZSkpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWVudVVuaW5zdGFsbGVyID0gYXJvdW5kKG1lbnUuY29uc3RydWN0b3IucHJvdG90eXBlLCB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IChuZXh0OiBhbnkpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3Rpb24gPSB0aGlzLmNhbnZhcy5zZWxlY3Rpb247XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGVQYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW52YXMubm9kZXMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJjYW52YXMtc3R5bGUtbWVudTpwYXRjaC1jYW52YXMtbm9kZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlUGF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5jYW52YXMubm9kZXMudmFsdWVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZ3JvdXBQYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZT8udW5rbm93bkRhdGEudHlwZSA9PT0gXCJncm91cFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihcImNhbnZhcy1zdHlsZS1tZW51OnBhdGNoLWNhbnZhcy1ub2RlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cFBhdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2UgPSB0aGlzLmNhbnZhcy5lZGdlcy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWRnZVBhdGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbnZhcy5lZGdlcy5zaXplID4gMCAmJiBlZGdlPy51bmtub3duRGF0YT8uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJjYW52YXMtc3R5bGUtbWVudTpwYXRjaC1jYW52YXMtbm9kZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGdlUGF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbnVDbGFzc2VzID0gbWVudUNvbmZpZy5tYXAoaXRlbSA9PiBpdGVtLmNsYXNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRNZW51SXRlbXMgPSB0aGlzLm1lbnVFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpY2thYmxlLWljb25bY2xhc3MkPS1tZW51LWl0ZW1dJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZE1lbnVJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbUNsYXNzID0gaXRlbS5jbGFzc05hbWUubWF0Y2goL14oLis/KSg/PS1tZW51LWl0ZW0pLylbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbnVDbGFzc2VzLmluY2x1ZGVzKGl0ZW1DbGFzcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVNZW51QnV0dG9uID0gKGNhdGVnb3J5OiBzdHJpbmcsIGNzc0NsYXNzOiBzdHJpbmcsIHRvb2x0aXA6IHN0cmluZywgaWNvbjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2VsZWN0aW9uQXJyYXkgPSBBcnJheS5mcm9tKGN1cnJlbnRTZWxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsRmFsc2UgPSBjdXJyZW50U2VsZWN0aW9uQXJyYXkuZXZlcnkoKHZhbHVlOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXZhbHVlLm5vZGVFbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbEZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09PSAnZWRnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVudUVsLnF1ZXJ5U2VsZWN0b3IoYC4ke2Nzc0NsYXNzfS1tZW51LWl0ZW1gKSkgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uRWwgPSBjcmVhdGVFbChcImJ1dHRvblwiLCBgY2xpY2thYmxlLWljb24gJHtjc3NDbGFzc30tbWVudS1pdGVtYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRvb2x0aXAoYnV0dG9uRWwsIHRvb2x0aXAsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogXCJ0b3BcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24oYnV0dG9uRWwsIGljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uRWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2F0ZWdvcnkgIT09ICdlZGdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZW51RWwucXVlcnlTZWxlY3RvcihgLiR7Y3NzQ2xhc3N9LW1lbnUtaXRlbWApKSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBidXR0b25FbCA9IGNyZWF0ZUVsKFwiYnV0dG9uXCIsIGBjbGlja2FibGUtaWNvbiAke2Nzc0NsYXNzfS1tZW51LWl0ZW1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VG9vbHRpcChidXR0b25FbCwgdG9vbHRpcCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50OiBcInRvcFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihidXR0b25FbCwgaWNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidXR0b25FbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVCdXR0b25DbGljayA9IChidXR0b25FbDogSFRNTEVsZW1lbnQsIGNsaWNrSGFuZGxlcjogKCkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zID0gYnV0dG9uRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJ1dHRvbkVsLmhhc0NsYXNzKFwiaGFzLWFjdGl2ZS1tZW51XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWwudG9nZ2xlQ2xhc3MoXCJoYXMtYWN0aXZlLW1lbnVcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmluZ05vZGVzID0gdGhpcy5jYW52YXMuZ2V0Q29udGFpbmluZ05vZGVzKHRoaXMuc2VsZWN0aW9uLmJib3gpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlja0hhbmRsZXIobWVudSwgY29udGFpbmluZ05vZGVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uRWwudG9nZ2xlQ2xhc3MoXCJoYXMtYWN0aXZlLW1lbnVcIiwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuc2V0UGFyZW50RWxlbWVudCh0aGlzLm1lbnVFbCkuc2hvd0F0UG9zaXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBwb3MueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogcG9zLmJvdHRvbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHBvcy53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxhcDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlQW5kU2V0dXBNZW51QnV0dG9uID0gKGNhdGVnb3J5OiBzdHJpbmcsIGNzc0NsYXNzOiBzdHJpbmcsIHRvZ2dsZU1lbnU6IHN0cmluZ1tdLCB0b29sdGlwOiBzdHJpbmcsIGljb246IHN0cmluZywgY2xpY2tIYW5kbGVyOiAobWVudTogTWVudSwgY29udGFpbmluZ05vZGVzOiBhbnlbXSkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uRWwgPSBjcmVhdGVNZW51QnV0dG9uKGNhdGVnb3J5LCBjc3NDbGFzcywgdG9vbHRpcCwgaWNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uRWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVNZW51SXRlbXNDbGFzcyA9IGdldFRvZ2dsZU1lbnVJdGVtc0NsYXNzKHRvZ2dsZU1lbnUsIG1lbnVDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3Rpb24gPSB0aGlzLmNhbnZhcy5zZWxlY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmluZ05vZGVzID0gdGhpcy5jYW52YXMuZ2V0Q29udGFpbmluZ05vZGVzKHRoaXMuc2VsZWN0aW9uLmJib3gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbnVJdGVtVHlwZSA9IGdldEl0ZW1Qcm9wZXJ0eShjc3NDbGFzcywgbWVudUNvbmZpZywgJ3R5cGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9nZ2xlTWVudUl0ZW1zQ2xhc3MuaW5jbHVkZXMoY3NzQ2xhc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0aW9uLnNpemUgPT09IDEgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGhhbmRsZVNpbmdsZU5vZGUoPENhbnZhc05vZGU+QXJyYXkuZnJvbShjdXJyZW50U2VsZWN0aW9uKT8uZmlyc3QoKSwgbnVsbCwgbWVudUl0ZW1UeXBlLCBjc3NDbGFzcywgZmFsc2UpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoY29udGFpbmluZ05vZGVzLmxlbmd0aCA+IDEgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBoYW5kbGVNdWx0aU5vZGVzVmlhTm9kZXModGhpcy5jYW52YXMsIGNvbnRhaW5pbmdOb2RlcywgbnVsbCwgbWVudUl0ZW1UeXBlLCBjc3NDbGFzcywgZmFsc2UpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGN1cnJlbnRTZWxlY3Rpb24gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaGFuZGxlU2luZ2xlTm9kZSg8Q2FudmFzTm9kZT5BcnJheS5mcm9tKGN1cnJlbnRTZWxlY3Rpb24pPy5maXJzdCgpLCBudWxsLCBtZW51SXRlbVR5cGUsIGNzc0NsYXNzLCBmYWxzZSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGhhbmRsZUJ1dHRvbkNsaWNrKGJ1dHRvbkVsLCBjbGlja0hhbmRsZXIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25FbC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0aW9uLnNpemUgPT09IDEgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaGFuZGxlU2luZ2xlTm9kZSg8Q2FudmFzTm9kZT5BcnJheS5mcm9tKGN1cnJlbnRTZWxlY3Rpb24pPy5maXJzdCgpLCBudWxsLCBtZW51SXRlbVR5cGUsIGNzc0NsYXNzLCB0cnVlKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoY29udGFpbmluZ05vZGVzLmxlbmd0aCA+IDEgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGhhbmRsZU11bHRpTm9kZXNWaWFOb2Rlcyh0aGlzLmNhbnZhcywgY29udGFpbmluZ05vZGVzLCBudWxsLCBtZW51SXRlbVR5cGUsIGNzc0NsYXNzLCB0cnVlKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGN1cnJlbnRTZWxlY3Rpb24gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBoYW5kbGVTaW5nbGVOb2RlKDxDYW52YXNOb2RlPkFycmF5LmZyb20oY3VycmVudFNlbGVjdGlvbik/LmZpcnN0KCksIG51bGwsIG1lbnVJdGVtVHlwZSwgY3NzQ2xhc3MsIHRydWUpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVudUVsLmFwcGVuZENoaWxkKGJ1dHRvbkVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVDb25maWcuZm9yRWFjaCgobWVtdUl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZW11SXRlbS5lbmFibGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVBbmRTZXR1cE1lbnVCdXR0b24obWVtdUl0ZW0uY2F0LCBtZW11SXRlbS5jbGFzcywgdG9nZ2xlTWVudSwgbWVtdUl0ZW0ubmFtZSwgbWVtdUl0ZW0uaWNvbiwgKG1lbnUsIGNvbnRhaW5pbmdOb2RlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVNZW51KG1lbnUsIHN1Yk1lbnVDb25maWcsIGFzeW5jIChjc3NDbGFzczogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2VsZWN0aW9uID0gdGhpcy5jYW52YXMuc2VsZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlbGVjdGlvbi5zaXplID09PSAxIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBoYW5kbGVTaW5nbGVOb2RlKDxDYW52YXNOb2RlPkFycmF5LmZyb20oY3VycmVudFNlbGVjdGlvbik/LmZpcnN0KCksIHN1Yk1lbnVDb25maWcsIG51bGwsIGNzc0NsYXNzLCBmYWxzZSkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChjb250YWluaW5nTm9kZXMubGVuZ3RoID4gMSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGhhbmRsZU11bHRpTm9kZXNWaWFOb2Rlcyh0aGlzLmNhbnZhcywgY29udGFpbmluZ05vZGVzLCBzdWJNZW51Q29uZmlnLCBudWxsLCBjc3NDbGFzcywgZmFsc2UpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGN1cnJlbnRTZWxlY3Rpb24gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaGFuZGxlU2luZ2xlTm9kZSg8Q2FudmFzTm9kZT5BcnJheS5mcm9tKGN1cnJlbnRTZWxlY3Rpb24pPy5maXJzdCgpLCBzdWJNZW51Q29uZmlnLCBudWxsLCBjc3NDbGFzcywgZmFsc2UpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgbWVtdUl0ZW0udHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIobWVudVVuaW5zdGFsbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJjYW52YXMtc3R5bGUtbWVudTpwYXRjaGVkLWNhbnZhc1wiKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FudmFzLVN0eWxlLU1lbnU6IGNhbnZhcyBtZW51IHBhdGNoZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghcGF0Y2hNZW51KCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV2dCA9IHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoTWVudSgpICYmIHRoaXMuYXBwLndvcmtzcGFjZS5vZmZyZWYoZXZ0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KGV2dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwYXRjaENhbnZhc05vZGUoKSB7XHJcbiAgICAgICAgY29uc3QgbWVudUNvbmZpZyA9IHRoaXMuc2V0dGluZ3MuY29uZmlnc1t0aGlzLnNldHRpbmdzLmN1cnJlbnRDb25maWddLm1lbnVJdGVtc1xyXG4gICAgICAgIGNvbnN0IHN1Yk1lbnVDb25maWcgPSB0cmFuc2Zvcm1TdWJNZW51SXRlbXModGhpcy5zZXR0aW5ncy5jb25maWdzW3RoaXMuc2V0dGluZ3MuY3VycmVudENvbmZpZ10uc3ViTWVudUl0ZW1zKTtcclxuICAgICAgICBjb25zdCBhbGxNZW51Q29uZmlnID0gbWVudUNvbmZpZy5jb25jYXQoc3ViTWVudUNvbmZpZylcclxuXHJcbiAgICAgICAgY29uc3QgaW5pdENhbnZhc1N0eWxlID0gKG5vZGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENhbnZhc1N0eWxlKG5vZGUsIG1lbnVDb25maWcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHBhdGNoTm9kZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwUGF0Y2hlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlUGF0Y2hlZCAmJiB0aGlzLmdyb3VwUGF0Y2hlZCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FudmFzVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJjYW52YXNcIikuZmlyc3QoKT8udmlldztcclxuICAgICAgICAgICAgaWYgKCFjYW52YXNWaWV3KSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYW52YXM6IENhbnZhcyA9IChjYW52YXNWaWV3IGFzIENhbnZhc1ZpZXcpPy5jYW52YXM7XHJcbiAgICAgICAgICAgIGlmICghY2FudmFzKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBsZXQgbm9kZSA9ICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwiY2FudmFzXCIpLmZpcnN0KCk/LnZpZXcgYXMgYW55KS5jYW52YXMubm9kZXMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBub2RlcyA9ICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwiY2FudmFzXCIpLmZpcnN0KCk/LnZpZXcgYXMgYW55KS5jYW52YXMubm9kZXMudmFsdWVzKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIG5vZGVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXA/LnVua25vd25EYXRhLnR5cGUgPT09IFwiZ3JvdXBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBncm91cDtcclxuICAgICAgICAgICAgICAgICAgICBncm91cFBhdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IHByb3RvdHlwZU5vZGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobm9kZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB3aGlsZSAocHJvdG90eXBlTm9kZSAmJiBwcm90b3R5cGVOb2RlICE9PSBPYmplY3QucHJvdG90eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBwcm90b3R5cGVOb2RlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvdHlwZU5vZGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdGVkLWVycm9yIEZpbmQgdGhlIHBhcmVudCBwcm90b3R5cGVcclxuICAgICAgICAgICAgICAgIGlmIChwcm90b3R5cGVOb2RlLnJlbmRlclpJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXByb3RvdHlwZU5vZGUpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVuaW5zdGFsbGVyTm9kZSA9IGFyb3VuZChwcm90b3R5cGVOb2RlLCB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXI6IChuZXh0OiBhbnkpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKC4uLmFyZ3M6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVDU1NjbGFzcyA9IGluaXRDYW52YXNTdHlsZSh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVUb1Byb3BlcnR5TWFwID0gbWVudUNvbmZpZy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjW2l0ZW0udHlwZV0gPSBgdW5rbm93bkRhdGEuJHtpdGVtLnR5cGV9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9IGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51Q29uZmlnLmZvckVhY2goYXN5bmMgKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5S2V5ID0gdHlwZVRvUHJvcGVydHlNYXBbaXRlbS50eXBlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5VmFsdWUgPSBuZXcgRnVuY3Rpb24oYHJldHVybiB0aGlzLiR7cHJvcGVydHlLZXl9YCkuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eVZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldEl0ZW1Qcm9wZXJ0eShwcm9wZXJ0eVZhbHVlLCBhbGxNZW51Q29uZmlnLCAnc2VsZWN0b3InKSA9PT0gJ2NjJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBtb2RpZnlDbGFzc09uRWxlbWVudHMoJ2FkZCcsIHRoaXMuY29udGVudEVsLCAnbWFya2Rvd24tcHJldmlldy12aWV3JywgcHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMubm9kZUVsLmNsYXNzTGlzdC5hZGQocHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0RGF0YTogKG5leHQ6IGFueSkgPT5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVUb1Byb3BlcnR5TWFwID0gbWVudUNvbmZpZy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjW2l0ZW0udHlwZV0gPSBgJHtpdGVtLnR5cGV9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9IGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51Q29uZmlnLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5S2V5ID0gdHlwZVRvUHJvcGVydHlNYXBbaXRlbS50eXBlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5VmFsdWUgPSBkYXRhW3Byb3BlcnR5S2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gZ2V0SXRlbVByb3BlcnR5KHByb3BlcnR5VmFsdWUsIGFsbE1lbnVDb25maWcsICdzZWxlY3RvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlQ1NTY2xhc3M/LnNldFN0eWxlKGl0ZW0uY2F0LCBzZWxlY3RvciwgaXRlbS50eXBlLCBwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dC5jYWxsKHRoaXMsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHVuaW5zdGFsbGVyTm9kZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMubm9kZVBhdGNoZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVBhdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW52YXMtU3R5bGUtTWVudTogY2FudmFzIG5vZGUgcGF0Y2hlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGdyb3VwUGF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmdyb3VwUGF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBQYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbnZhcy1TdHlsZS1NZW51OiBjYW52YXMgZ3JvdXAgcGF0Y2hlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBwYXRjaEVkZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVkZ2VQYXRjaGVkKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhc1ZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwiY2FudmFzXCIpLmZpcnN0KCk/LnZpZXc7XHJcbiAgICAgICAgICAgIGlmICghY2FudmFzVmlldykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FudmFzOiBDYW52YXMgPSAoY2FudmFzVmlldyBhcyBDYW52YXNWaWV3KT8uY2FudmFzO1xyXG4gICAgICAgICAgICBpZiAoIWNhbnZhcykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZWRnZSA9ICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwiY2FudmFzXCIpLmZpcnN0KCk/LnZpZXcgYXMgYW55KS5jYW52YXMuZWRnZXMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFlZGdlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBwcm90b3R5cGVFZGdlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGVkZ2UpO1xyXG4gICAgICAgICAgICBpZiAoIXByb3RvdHlwZUVkZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVuaW5zdGFsbGVyRWRnZSA9IGFyb3VuZChwcm90b3R5cGVFZGdlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiAobmV4dDogYW55KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoLi4uYXJnczogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXh0LmNhbGwodGhpcywgLi4uYXJncyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlQ1NTY2xhc3MgPSBpbml0Q2FudmFzU3R5bGUodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyb21PZmZzZXRIOiBudW1iZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyb21PZmZzZXRWOiBudW1iZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvT2Zmc2V0SDogbnVtYmVyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b09mZnNldFY6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJvbS5zaWRlID09PSAncmlnaHQnKSBmcm9tT2Zmc2V0SCA9IC04O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJvbS5zaWRlID09PSAnbGVmdCcpIGZyb21PZmZzZXRIID0gODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyb20uc2lkZSA9PT0gJ3RvcCcpIGZyb21PZmZzZXRWID0gODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyb20uc2lkZSA9PT0gJ2JvdHRvbScpIGZyb21PZmZzZXRWID0gLTg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50by5zaWRlID09PSAncmlnaHQnKSB0b09mZnNldEggPSAtODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvLnNpZGUgPT09ICdsZWZ0JykgdG9PZmZzZXRIID0gODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvLnNpZGUgPT09ICd0b3AnKSB0b09mZnNldFYgPSA4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG8uc2lkZSA9PT0gJ2JvdHRvbScpIHRvT2Zmc2V0ViA9IC04O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUxpbmVQYXRoKHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBMJHt4Mn0sJHt5Mn1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVQYXRoID0gY3JlYXRlTGluZVBhdGgodGhpcy5iZXppZXIuZnJvbS54ICsgZnJvbU9mZnNldEgsIHRoaXMuYmV6aWVyLmZyb20ueSArIGZyb21PZmZzZXRWLCB0aGlzLmJlemllci50by54ICsgdG9PZmZzZXRILCB0aGlzLmJlemllci50by55ICsgdG9PZmZzZXRWKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVBbmdsZSh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZVJhZCA9IE1hdGguYXRhbjIoeTIgLSB5MSwgeDIgLSB4MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGVEZWcgPSAoYW5nbGVSYWQgKiAxODApIC8gTWF0aC5QSTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5nbGVEZWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IGNhbGN1bGF0ZUFuZ2xlKHRoaXMuYmV6aWVyLmZyb20ueCArIGZyb21PZmZzZXRILCB0aGlzLmJlemllci5mcm9tLnkgKyBmcm9tT2Zmc2V0ViwgdGhpcy5iZXppZXIudG8ueCArIHRvT2Zmc2V0SCwgdGhpcy5iZXppZXIudG8ueSArIHRvT2Zmc2V0Vik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9tUm90YXRlQW5nbGUgPSBhbmdsZSAtIDkwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9Sb3RhdGVBbmdsZSA9IGFuZ2xlIC0gMjcwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsYm93UGF0aCA9IGNyZWF0ZUVsYm93UGF0aCh0aGlzLmZyb20uc2lkZSwgdGhpcy50by5zaWRlLCB0aGlzLmJlemllci5mcm9tLnggKyBmcm9tT2Zmc2V0SCwgdGhpcy5iZXppZXIuZnJvbS55ICsgZnJvbU9mZnNldFYsIHRoaXMuYmV6aWVyLnRvLnggKyB0b09mZnNldEgsIHRoaXMuYmV6aWVyLnRvLnkgKyB0b09mZnNldFYpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVUb1Byb3BlcnR5TWFwID0gbWVudUNvbmZpZy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY1tpdGVtLnR5cGVdID0gYHVua25vd25EYXRhLiR7aXRlbS50eXBlfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9IGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUNvbmZpZy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlLZXkgPSB0eXBlVG9Qcm9wZXJ0eU1hcFtpdGVtLnR5cGVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5VmFsdWUgPSBuZXcgRnVuY3Rpb24oYHJldHVybiB0aGlzLiR7cHJvcGVydHlLZXl9YCkuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydHlWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVHcm91cEVsLmNsYXNzTGlzdC5hZGQocHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGluZUVuZEdyb3VwRWwuY2xhc3NMaXN0LmFkZChwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUgPT09ICdjcy1saW5lLXN0cmFpZ2h0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVBhdGggPSB0aGlzLmxpbmVHcm91cEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMtZGlzcGxheS1wYXRoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvblBhdGggPSB0aGlzLmxpbmVHcm91cEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMtaW50ZXJhY3Rpb24tcGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVBhdGguc2V0QXR0cmlidXRlKCdkJywgbGluZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3Rpb25QYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGxpbmVQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvTGluZUVuZCAmJiAhdGhpcy5mcm9tTGluZUVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvTmV3VHJhbnNmb3JtID0gdGhpcy50b0xpbmVFbmQuZWwuc3R5bGUudHJhbnNmb3JtLnJlcGxhY2UoL3JvdGF0ZVxcKFstXFxkXStkZWdcXCkvLCBgcm90YXRlKCR7dG9Sb3RhdGVBbmdsZX1kZWcpYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b0xpbmVFbmQuZWwuc3R5bGUudHJhbnNmb3JtID0gdG9OZXdUcmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mcm9tTGluZUVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb21OZXdUcmFuc2Zvcm0gPSB0aGlzLmZyb21MaW5lRW5kLmVsLnN0eWxlLnRyYW5zZm9ybS5yZXBsYWNlKC9yb3RhdGVcXChbLVxcZF0rZGVnXFwpLywgYHJvdGF0ZSgke2Zyb21Sb3RhdGVBbmdsZX1kZWcpYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9OZXdUcmFuc2Zvcm0gPSB0aGlzLnRvTGluZUVuZC5lbC5zdHlsZS50cmFuc2Zvcm0ucmVwbGFjZSgvcm90YXRlXFwoWy1cXGRdK2RlZ1xcKS8sIGByb3RhdGUoJHt0b1JvdGF0ZUFuZ2xlfWRlZylgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb21MaW5lRW5kLmVsLnN0eWxlLnRyYW5zZm9ybSA9IGZyb21OZXdUcmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b0xpbmVFbmQuZWwuc3R5bGUudHJhbnNmb3JtID0gdG9OZXdUcmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eVZhbHVlID09PSAnY3MtbGluZS1lbGJvdycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlQYXRoID0gdGhpcy5saW5lR3JvdXBFbC5xdWVyeVNlbGVjdG9yKCcuY2FudmFzLWRpc3BsYXktcGF0aCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25QYXRoID0gdGhpcy5saW5lR3JvdXBFbC5xdWVyeVNlbGVjdG9yKCcuY2FudmFzLWludGVyYWN0aW9uLXBhdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlQYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGVsYm93UGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGlvblBhdGguc2V0QXR0cmlidXRlKCdkJywgZWxib3dQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RGF0YTogKG5leHQ6IGFueSkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGE6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZVRvUHJvcGVydHlNYXAgPSBtZW51Q29uZmlnLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjW2l0ZW0udHlwZV0gPSBgJHtpdGVtLnR5cGV9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge30gYXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51Q29uZmlnLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eUtleSA9IHR5cGVUb1Byb3BlcnR5TWFwW2l0ZW0udHlwZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlWYWx1ZSA9IGRhdGFbcHJvcGVydHlLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gZ2V0SXRlbVByb3BlcnR5KHByb3BlcnR5VmFsdWUsIGFsbE1lbnVDb25maWcsICdzZWxlY3RvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZUNTU2NsYXNzPy5zZXRTdHlsZShpdGVtLmNhdCwgc2VsZWN0b3IsIGl0ZW0udHlwZSwgcHJvcGVydHlWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dC5jYWxsKHRoaXMsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHVuaW5zdGFsbGVyRWRnZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5lZGdlUGF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lZGdlUGF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbnZhcy1TdHlsZS1NZW51OiBjYW52YXMgZWRnZSBwYXRjaGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFwYXRjaE5vZGUoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXZ0ID0gdGhpcy5hcHAud29ya3NwYWNlLm9uKFwibGF5b3V0LWNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlUGF0Y2hlZCAmJiB0aGlzLmFwcC53b3Jrc3BhY2Uub2ZmcmVmKGV2dCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChldnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghcGF0Y2hFZGdlKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV2dCA9IHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWRnZVBhdGNoZWQgJiYgdGhpcy5hcHAud29ya3NwYWNlLm9mZnJlZihldnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoZXZ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGFyb3VuZChvYmosIGZhY3Rvcmllcykge1xuICAgIGNvbnN0IHJlbW92ZXJzID0gT2JqZWN0LmtleXMoZmFjdG9yaWVzKS5tYXAoa2V5ID0+IGFyb3VuZDEob2JqLCBrZXksIGZhY3Rvcmllc1trZXldKSk7XG4gICAgcmV0dXJuIHJlbW92ZXJzLmxlbmd0aCA9PT0gMSA/IHJlbW92ZXJzWzBdIDogZnVuY3Rpb24gKCkgeyByZW1vdmVycy5mb3JFYWNoKHIgPT4gcigpKTsgfTtcbn1cbmZ1bmN0aW9uIGFyb3VuZDEob2JqLCBtZXRob2QsIGNyZWF0ZVdyYXBwZXIpIHtcbiAgICBjb25zdCBvcmlnaW5hbCA9IG9ialttZXRob2RdLCBoYWRPd24gPSBvYmouaGFzT3duUHJvcGVydHkobWV0aG9kKTtcbiAgICBsZXQgY3VycmVudCA9IGNyZWF0ZVdyYXBwZXIob3JpZ2luYWwpO1xuICAgIC8vIExldCBvdXIgd3JhcHBlciBpbmhlcml0IHN0YXRpYyBwcm9wcyBmcm9tIHRoZSB3cmFwcGluZyBtZXRob2QsXG4gICAgLy8gYW5kIHRoZSB3cmFwcGluZyBtZXRob2QsIHByb3BzIGZyb20gdGhlIG9yaWdpbmFsIG1ldGhvZFxuICAgIGlmIChvcmlnaW5hbClcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGN1cnJlbnQsIG9yaWdpbmFsKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yod3JhcHBlciwgY3VycmVudCk7XG4gICAgb2JqW21ldGhvZF0gPSB3cmFwcGVyO1xuICAgIC8vIFJldHVybiBhIGNhbGxiYWNrIHRvIGFsbG93IHNhZmUgcmVtb3ZhbFxuICAgIHJldHVybiByZW1vdmU7XG4gICAgZnVuY3Rpb24gd3JhcHBlciguLi5hcmdzKSB7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYmVlbiBkZWFjdGl2YXRlZCBhbmQgYXJlIG5vIGxvbmdlciB3cmFwcGVkLCByZW1vdmUgb3Vyc2VsdmVzXG4gICAgICAgIGlmIChjdXJyZW50ID09PSBvcmlnaW5hbCAmJiBvYmpbbWV0aG9kXSA9PT0gd3JhcHBlcilcbiAgICAgICAgICAgIHJlbW92ZSgpO1xuICAgICAgICByZXR1cm4gY3VycmVudC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgICAvLyBJZiBubyBvdGhlciBwYXRjaGVzLCBqdXN0IGRvIGEgZGlyZWN0IHJlbW92YWxcbiAgICAgICAgaWYgKG9ialttZXRob2RdID09PSB3cmFwcGVyKSB7XG4gICAgICAgICAgICBpZiAoaGFkT3duKVxuICAgICAgICAgICAgICAgIG9ialttZXRob2RdID0gb3JpZ2luYWw7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9ialttZXRob2RdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50ID09PSBvcmlnaW5hbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gRWxzZSBwYXNzIGZ1dHVyZSBjYWxscyB0aHJvdWdoLCBhbmQgcmVtb3ZlIHdyYXBwZXIgZnJvbSB0aGUgcHJvdG90eXBlIGNoYWluXG4gICAgICAgIGN1cnJlbnQgPSBvcmlnaW5hbDtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHdyYXBwZXIsIG9yaWdpbmFsIHx8IEZ1bmN0aW9uKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZGVkdXBlKGtleSwgb2xkRm4sIG5ld0ZuKSB7XG4gICAgY2hlY2tba2V5XSA9IGtleTtcbiAgICByZXR1cm4gY2hlY2s7XG4gICAgZnVuY3Rpb24gY2hlY2soLi4uYXJncykge1xuICAgICAgICByZXR1cm4gKG9sZEZuW2tleV0gPT09IGtleSA/IG9sZEZuIDogbmV3Rm4pLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhZnRlcihwcm9taXNlLCBjYikge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4oY2IsIGNiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemUoYXN5bmNGdW5jdGlvbikge1xuICAgIGxldCBsYXN0UnVuID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgZnVuY3Rpb24gd3JhcHBlciguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiBsYXN0UnVuID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgICAgICBhZnRlcihsYXN0UnVuLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXN5bmNGdW5jdGlvbi5hcHBseSh0aGlzLCBhcmdzKS50aGVuKHJlcywgcmVqKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgd3JhcHBlci5hZnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxhc3RSdW4gPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHsgYWZ0ZXIobGFzdFJ1biwgcmVzKTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gd3JhcHBlcjtcbn1cbiIsICJpbXBvcnQgeyBDYW52YXNOb2RlLCBDb21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgbW9kaWZ5Q2xhc3NPbkVsZW1lbnRzIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhc1N0eWxlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHByaXZhdGUgbm9kZTogQ2FudmFzTm9kZTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihub2RlOiBDYW52YXNOb2RlLCBtZW51Q29uZmlnOiBNZW51SXRlbVtdKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcclxuICAgICAgICB0aGlzLnR5cGVzID0gbWVudUNvbmZpZy5tYXAoKG1lbnVJdGVtKSA9PiBtZW51SXRlbS50eXBlKTtcclxuXHJcbiAgICAgICAgdGhpcy50eXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXNbdHlwZV0gPSB0aGlzLm5vZGUudW5rbm93bkRhdGFbdHlwZV0gfHwgJyc7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBvbmxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVOb2RlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb251bmxvYWQoKSB7XHJcbiAgICAgICAgc3VwZXIub251bmxvYWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTdHlsZShjYXQ6IHN0cmluZywgc2VsZWN0b3I6IHN0cmluZywgdHlwZTogc3RyaW5nLCBjc3NDbGFzczogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubm9kZS5jYW52YXMucmVhZG9ubHkpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpc1t0eXBlXSA9PT0gY3NzQ2xhc3MpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXNbdHlwZV0gIT09ICcnIHx8IHRoaXNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9sZFR5cGUgPSB0aGlzW3R5cGVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3NzQ2xhc3MgIT09IGZhbHNlIHx8IGNzc0NsYXNzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpc1t0eXBlXSA9IGNzc0NsYXNzO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUudW5rbm93bkRhdGFbdHlwZV0gPSBjc3NDbGFzcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlTm9kZShjYXQsIHNlbGVjdG9yLCB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB1cGRhdGVOb2RlKGNhdDogc3RyaW5nLCBzZWxlY3Rvcjogc3RyaW5nLCB0eXBlOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5vbGRUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmIChjYXQgPT09ICdlZGdlJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLmxpbmVHcm91cEVsLnJlbW92ZUNsYXNzKHRoaXMub2xkVHlwZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUubGluZUVuZEdyb3VwRWwucmVtb3ZlQ2xhc3ModGhpcy5vbGRUeXBlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5yZW5kZXIoKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGUubm9kZUVsLnJlbW92ZUNsYXNzKHRoaXMub2xkVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZ5Q2xhc3NPbkVsZW1lbnRzKCdyZW1vdmUnLCB0aGlzLm5vZGUuY29udGVudEVsLCAnbWFya2Rvd24tcHJldmlldy12aWV3JywgdGhpcy5vbGRUeXBlKTtcclxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7fVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgIGlmIChjYXQgPT09ICdlZGdlJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLmxpbmVHcm91cEVsLmFkZENsYXNzKHRoaXNbdHlwZV0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLmxpbmVFbmRHcm91cEVsLmFkZENsYXNzKHRoaXNbdHlwZV0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLnJlbmRlcigpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICdjYycpIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBtb2RpZnlDbGFzc09uRWxlbWVudHMoJ2FkZCcsIHRoaXMubm9kZS5jb250ZW50RWwsICdtYXJrZG93bi1wcmV2aWV3LXZpZXcnLCB0aGlzW3R5cGVdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLm5vZGUubm9kZUVsLmFkZENsYXNzKHRoaXNbdHlwZV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgZnMgZnJvbSAnZnMnO1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgQXBwLCBDYW52YXMsIENhbnZhc05vZGUsIE1lbnUsIE1lbnVJdGVtIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBDYW52YXNTdHlsZU1lbnVQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xyXG5cclxuY29uc3QgaGFuZGxlTXVsdGlOb2RlcyA9IChjYW52YXM6IENhbnZhcywgYWxsTm9kZXM6IGJvb2xlYW4sIHN1Yk1lbnVDb25maWc6IFN1Yk1lbnVJdGVtW10sIG1lbnVJdGVtVHlwZTogc3RyaW5nLCBjc3NDbGFzczogc3RyaW5nLCBvblJpZ2h0Q2xpY2s6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnN0IG5vZGVzID0gYWxsTm9kZXMgPyBBcnJheS5mcm9tKGNhbnZhcy5ub2Rlcy52YWx1ZXMoKSkgOiBBcnJheS5mcm9tKGNhbnZhcy5zZWxlY3Rpb24pIGFzIGFueVtdO1xyXG4gICAgY29uc3QgY2FudmFzRGF0YSA9IGNhbnZhcy5nZXREYXRhKCk7XHJcbiAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlRGF0YSA9IGNhbnZhc0RhdGEubm9kZXMuZmluZCgodDogYW55KSA9PiB0LmlkID09PSBub2RlLmlkKTtcclxuICAgICAgICAgICAgaWYgKHN1Yk1lbnVDb25maWcgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gbWVudUl0ZW1UeXBlO1xyXG4gICAgICAgICAgICB9IGVsc2UgcHJvcGVydHkgPSBnZW5lcmF0ZUNsYXNzVG9Qcm9wZXJ0eU1hcChzdWJNZW51Q29uZmlnLCBjc3NDbGFzcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvcGVydHkgJiYgbm9kZURhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvblJpZ2h0Q2xpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub2RlRGF0YVtwcm9wZXJ0eV0gPSBmYWxzZTsgLy9LZWVwIHRoZSBwcm9wZXJ0aWVzIGluIHRoZSBjYW52YXMgZmlsZVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YVtwcm9wZXJ0eV07IC8vUmVtb3ZlIHRoZSBjb3JyZXNwb25kaW5nIHByb3BlcnR5IGZyb20gdGhlIGNhbnZhcyBmaWxlXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbm9kZURhdGFbcHJvcGVydHldID0gY3NzQ2xhc3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2FudmFzLnNldERhdGEoY2FudmFzRGF0YSk7XHJcbiAgICB9XHJcbiAgICBjYW52YXMucmVxdWVzdFNhdmUodHJ1ZSwgdHJ1ZSk7XHJcbiAgICBjYW52YXMucmVxdWVzdEZyYW1lKCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaGFuZGxlTXVsdGlOb2Rlc1ZpYU5vZGVzID0gKGNhbnZhczogQ2FudmFzLCBub2RlczogQ2FudmFzTm9kZVtdLCBzdWJNZW51Q29uZmlnOiBTdWJNZW51SXRlbVtdLCBtZW51SXRlbVR5cGU6IHN0cmluZywgY3NzQ2xhc3M6IHN0cmluZywgb25SaWdodENsaWNrOiBib29sZWFuKSA9PiB7XHJcbiAgICBjb25zdCBjYW52YXNEYXRhID0gY2FudmFzLmdldERhdGEoKTtcclxuICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGVEYXRhID0gY2FudmFzRGF0YS5ub2Rlcy5maW5kKCh0OiBhbnkpID0+IHQuaWQgPT09IG5vZGUuaWQpO1xyXG4gICAgICAgICAgICBpZiAoc3ViTWVudUNvbmZpZyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHkgPSBtZW51SXRlbVR5cGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBwcm9wZXJ0eSA9IGdlbmVyYXRlQ2xhc3NUb1Byb3BlcnR5TWFwKHN1Yk1lbnVDb25maWcsIGNzc0NsYXNzKTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZiAocHJvcGVydHkgJiYgbm9kZURhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvblJpZ2h0Q2xpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub2RlRGF0YVtwcm9wZXJ0eV0gPSBmYWxzZTsgLy9LZWVwIHRoZSBwcm9wZXJ0aWVzIGluIHRoZSBjYW52YXMgZmlsZVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBub2RlRGF0YVtwcm9wZXJ0eV07IC8vUmVtb3ZlIHRoZSBjb3JyZXNwb25kaW5nIHByb3BlcnR5IGZyb20gdGhlIGNhbnZhcyBmaWxlXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbm9kZURhdGFbcHJvcGVydHldID0gY3NzQ2xhc3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2FudmFzLnNldERhdGEoY2FudmFzRGF0YSk7XHJcbiAgICB9XHJcbiAgICBjYW52YXMucmVxdWVzdFNhdmUodHJ1ZSwgdHJ1ZSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaGFuZGxlU2luZ2xlTm9kZSA9IChub2RlOiBDYW52YXNOb2RlLCBzdWJNZW51Q29uZmlnOiBTdWJNZW51SXRlbVtdLCBtZW51SXRlbVR5cGU6IHN0cmluZywgY3NzQ2xhc3M6IHN0cmluZywgb25SaWdodENsaWNrOiBib29sZWFuKSA9PiB7XHJcbiAgICBjb25zdCBjYW52YXNEYXRhID0gbm9kZS5jYW52YXMuZ2V0RGF0YSgpO1xyXG4gICAgY29uc3Qgbm9kZURhdGEgPSBjYW52YXNEYXRhLm5vZGVzLmZpbmQoKHQ6IGFueSkgPT4gdC5pZCA9PT0gbm9kZS5pZCk7XHJcbiAgICBjb25zdCBlZGdlRGF0YSA9IGNhbnZhc0RhdGEuZWRnZXMuZmluZCgodDogYW55KSA9PiB0LmlkID09PSBub2RlLmlkKTtcclxuICAgIGlmIChzdWJNZW51Q29uZmlnID09PSBudWxsKSB7XHJcbiAgICAgICAgcHJvcGVydHkgPSBtZW51SXRlbVR5cGU7XHJcbiAgICB9IGVsc2UgcHJvcGVydHkgPSBnZW5lcmF0ZUNsYXNzVG9Qcm9wZXJ0eU1hcChzdWJNZW51Q29uZmlnLCBjc3NDbGFzcyk7XHJcblxyXG4gICAgaWYgKHByb3BlcnR5ICYmIG5vZGVEYXRhKSB7XHJcbiAgICAgICAgaWYgKG9uUmlnaHRDbGljaykge1xyXG4gICAgICAgICAgICAvLyBub2RlRGF0YVtwcm9wZXJ0eV0gPSBmYWxzZTsgLy9LZWVwIHRoZSBwcm9wZXJ0aWVzIGluIHRoZSBjYW52YXMgZmlsZVxyXG4gICAgICAgICAgICBkZWxldGUgbm9kZURhdGFbcHJvcGVydHldOyAvL1JlbW92ZSB0aGUgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSBmcm9tIHRoZSBjYW52YXMgZmlsZVxyXG4gICAgICAgIH0gZWxzZSBub2RlRGF0YVtwcm9wZXJ0eV0gPSBjc3NDbGFzcztcclxuICAgIH1cclxuICAgIGlmIChwcm9wZXJ0eSAmJiBlZGdlRGF0YSkge1xyXG4gICAgICAgIGlmIChvblJpZ2h0Q2xpY2spIHtcclxuICAgICAgICAgICAgLy8gZWRnZURhdGFbcHJvcGVydHldID0gZmFsc2U7IC8vS2VlcCB0aGUgcHJvcGVydGllcyBpbiB0aGUgY2FudmFzIGZpbGVcclxuICAgICAgICAgICAgZGVsZXRlIGVkZ2VEYXRhW3Byb3BlcnR5XTsgLy9SZW1vdmUgdGhlIGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgZnJvbSB0aGUgY2FudmFzIGZpbGVcclxuICAgICAgICB9IGVsc2UgZWRnZURhdGFbcHJvcGVydHldID0gY3NzQ2xhc3M7XHJcbiAgICB9XHJcbiAgICBub2RlLmNhbnZhcy5zZXREYXRhKGNhbnZhc0RhdGEpO1xyXG4gICAgbm9kZS5jYW52YXMucmVxdWVzdFNhdmUodHJ1ZSwgdHJ1ZSk7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVIYW5kbGVDb250ZXh0TWVudSA9IChzZWN0aW9uOiBzdHJpbmcsIG1lbnVDb25maWc6IE1lbnVJdGVtW10sIHN1Yk1lbnVDb25maWc6IFN1Yk1lbnVJdGVtW10sIHRvZ2dsZU1lbnU6IHN0cmluZ1tdLCBjYWxsYmFjazogKGNzc0NsYXNzOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pID0+IHtcclxuICAgIHJldHVybiAobWVudTogTWVudSkgPT4ge1xyXG4gICAgICAgIG1lbnVDb25maWcuZm9yRWFjaCgobWVudUl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKHRvZ2dsZU1lbnUuaW5jbHVkZXMobWVudUl0ZW0udHlwZSkgJiYgbWVudUl0ZW0uY2F0ICE9PSAnZWRnZScgJiYgbWVudUl0ZW0uY3R4bWVudSA9PT0gdHJ1ZSAmJiBtZW51SXRlbS5lbmFibGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKG1lbnVJdGVtLmljb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShtZW51SXRlbS5uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjayhtZW51SXRlbS5jbGFzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0b2dnbGVNZW51LmluY2x1ZGVzKG1lbnVJdGVtLnR5cGUpICYmIG1lbnVJdGVtLmNhdCAhPT0gJ2VkZ2UnICYmIG1lbnVJdGVtLmN0eG1lbnUgPT09IHRydWUgJiYgbWVudUl0ZW0uZW5hYmxlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViTWVudSA9IGl0ZW0uc2V0U2VjdGlvbihzZWN0aW9uKS5zZXRUaXRsZShtZW51SXRlbS5uYW1lKS5zZXRJY29uKG1lbnVJdGVtLmljb24pLnNldFN1Ym1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVNZW51KHN1Yk1lbnUsIHN1Yk1lbnVDb25maWcsIGNhbGxiYWNrLCBtZW51SXRlbS50eXBlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGhhbmRsZU1lbnUgPSAoc3ViTWVudTogTWVudSwgc3ViTWVudUNvbmZpZzogU3ViTWVudUl0ZW1bXSwgY2FsbGJhY2s6IChjc3NDbGFzczogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+LCB0eXBlOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IGZpbHRlcmVkTWVudUl0ZW1zID0gc3ViTWVudUNvbmZpZy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gdHlwZSkgfHwgW107XHJcbiAgICBmaWx0ZXJlZE1lbnVJdGVtcy5mb3JFYWNoKChtZW51SXRlbSkgPT4ge1xyXG4gICAgICAgIGlmIChtZW51SXRlbS5lbmFibGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgc3ViTWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKG1lbnVJdGVtLmljb24pXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKG1lbnVJdGVtLm5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjayhtZW51SXRlbS5jbGFzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGhhbmRsZVNlbGVjdGlvbkNvbnRleHRNZW51ID0gKHBsdWdpbjogQ2FudmFzU3R5bGVNZW51UGx1Z2luLCBtZW51OiBNZW51LCBjYW52YXM6IENhbnZhcywgbWVudUNvbmZpZzogTWVudUl0ZW1bXSwgc3ViTWVudUNvbmZpZzogU3ViTWVudUl0ZW1bXSwgdG9nZ2xlTWVudTogc3RyaW5nW10sIG1lbnVJdGVtVHlwZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBjYWxsYmFjayA9IGFzeW5jIChjc3NDbGFzczogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgaGFuZGxlTXVsdGlOb2RlcyhjYW52YXMsIGZhbHNlLCBzdWJNZW51Q29uZmlnLCBtZW51SXRlbVR5cGUsIGNzc0NsYXNzLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgY3JlYXRlSGFuZGxlQ29udGV4dE1lbnUoJ2FjdGlvbicsIG1lbnVDb25maWcsIHN1Yk1lbnVDb25maWcsIHRvZ2dsZU1lbnUsIGNhbGxiYWNrKShtZW51KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVOb2RlQ29udGV4dE1lbnUgPSAocGx1Z2luOiBDYW52YXNTdHlsZU1lbnVQbHVnaW4sIG1lbnU6IE1lbnUsIG5vZGU6IENhbnZhc05vZGUsIG1lbnVDb25maWc6IE1lbnVJdGVtW10sIHN1Yk1lbnVDb25maWc6IFN1Yk1lbnVJdGVtW10sIHRvZ2dsZU1lbnU6IHN0cmluZ1tdLCBtZW51SXRlbVR5cGU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgY2FsbGJhY2sgPSBhc3luYyAoY3NzQ2xhc3M6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGhhbmRsZVNpbmdsZU5vZGUobm9kZSwgc3ViTWVudUNvbmZpZywgbWVudUl0ZW1UeXBlLCBjc3NDbGFzcywgZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIGNyZWF0ZUhhbmRsZUNvbnRleHRNZW51KCdjYW52YXMnLCBtZW51Q29uZmlnLCBzdWJNZW51Q29uZmlnLCB0b2dnbGVNZW51LCBjYWxsYmFjaykobWVudSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcmVmcmVzaEFsbENhbnZhc1ZpZXcgPSAoYXBwOiBBcHApID0+IHtcclxuICAgIGNvbnN0IGNhdmFzTGVhdmVzID0gYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJjYW52YXNcIik7XHJcbiAgICBpZiAoIWNhdmFzTGVhdmVzIHx8IGNhdmFzTGVhdmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgZm9yIChjb25zdCBsZWFmIG9mIGNhdmFzTGVhdmVzKSB7XHJcbiAgICAgICAgbGVhZi5yZWJ1aWxkVmlldygpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlT2xkU2V0dGluZ3NJdGVtcyhpdGVtczogc3RyaW5nW10gfCB1bmRlZmluZWQpOiB2b2lkIHtcclxuICAgIGlmIChpdGVtcykge1xyXG4gICAgICAgIC8vIFJlcGxhY2Ugc2luZ2xlIHF1b3RlcyB3aXRoIGRvdWJsZSBxdW90ZXMsIGFuZCByZW1vdmUgZXh0cmEgc3BhY2VzXHJcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkU3RyaW5ncyA9IGl0ZW1zLm1hcChzdHIgPT5cclxuICAgICAgICAgICAgc3RyLnJlcGxhY2UoLycvZywgJ1wiJykucmVwbGFjZSgvKFtcXHctXSspOi9nLCAnXCIkMVwiOicpLnJlcGxhY2UoLycvZywgJ1wiJylcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIENvbnZlcnQgYSBzdHJpbmcgdG8gYSBKU09OIG9iamVjdFxyXG4gICAgICAgIGNvbnN0IGpzb25PYmplY3RBcnJheSA9IGZvcm1hdHRlZFN0cmluZ3MubWFwKHN0ciA9PiBKU09OLnBhcnNlKHN0cikpO1xyXG4gICAgICAgIHJldHVybiBqc29uT2JqZWN0QXJyYXk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGVsZW1lbnQ6IGFueSwgYXR0cmlidXRlczogYW55KSB7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gYXR0cmlidXRlcykge1xyXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvT2JqZWN0QXJyYXkoYXJyYXk6IE1lbnVJdGVtW10pIHtcclxuICAgIHJldHVybiBhcnJheS5tYXAoKHN0cikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBzdHIubWF0Y2goL1xceyguKz8pXFx9Lyk7XHJcbiAgICAgICAgY29uc3Qgb2JqU3RyID0gYHske21hdGNoZXNbMV19fWA7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihgcmV0dXJuICR7b2JqU3RyfWApKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ2xhc3NUb1Byb3BlcnR5TWFwKHN1Yk1lbnVDb25maWc6IFN1Yk1lbnVJdGVtW10sIGNzc0NsYXNzOiBzdHJpbmcpOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9IHtcclxuICAgIGNvbnN0IGNsYXNzVG9Qcm9wZXJ0eU1hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xyXG4gICAgc3ViTWVudUNvbmZpZy5mb3JFYWNoKChzdWJNZW51SXRlbSkgPT4ge1xyXG4gICAgICAgIGlmIChzdWJNZW51SXRlbS50eXBlICYmICFjbGFzc1RvUHJvcGVydHlNYXBbc3ViTWVudUl0ZW0uY2xhc3NdKSB7XHJcbiAgICAgICAgICAgIGNsYXNzVG9Qcm9wZXJ0eU1hcFtzdWJNZW51SXRlbS5jbGFzc10gPSBzdWJNZW51SXRlbS50eXBlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBjbGFzc1RvUHJvcGVydHlNYXBbY3NzQ2xhc3NdO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0VG9nZ2xlTWVudUl0ZW1zQ2xhc3MgPSAodHlwZXM6IHN0cmluZ1tdLCBpdGVtczogTWVudUl0ZW1bXSk6IChzdHJpbmcgfCBudWxsKVtdID0+IHtcclxuICAgIHJldHVybiB0eXBlcy5tYXAoKHR5cGUpID0+IHtcclxuICAgICAgICBjb25zdCB0b2dnbGVNZW51SXRlbSA9IGl0ZW1zLmZpbmQoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gdHlwZSk7XHJcbiAgICAgICAgcmV0dXJuIHRvZ2dsZU1lbnVJdGVtID8gdG9nZ2xlTWVudUl0ZW0uY2xhc3MgOiBudWxsO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0SXRlbVByb3BlcnR5ID0gKGNzc0NsYXNzOiBzdHJpbmcsIGl0ZW1zOiBNZW51SXRlbVtdLCBwcm9wZXJ0eTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCA9PiB7XHJcbiAgY29uc3QgbWVudUl0ZW0gPSBpdGVtcy5maW5kKChpdGVtKSA9PiBpdGVtLmNsYXNzID09PSBjc3NDbGFzcyk7XHJcbiAgcmV0dXJuIG1lbnVJdGVtID8gbWVudUl0ZW1bcHJvcGVydHldIDogbnVsbDtcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtb2RpZnlDbGFzc09uRWxlbWVudHMoYWRkT3JSZW1vdmU6IHN0cmluZywgY29udGVudEVsOiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcsIHByb3BlcnR5VmFsdWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEpKTtcclxuICAgIGNvbnN0IGVsZW1lbnRzID0gY29udGVudEVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKSBhcyBIVE1MQ29sbGVjdGlvbk9mPEhUTUxFbGVtZW50PjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xyXG4gICAgICAgIGlmIChhZGRPclJlbW92ZSA9PT0gJ2FkZCcpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHByb3BlcnR5VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWRkT3JSZW1vdmUgPT09ICdyZW1vdmUnKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShwcm9wZXJ0eVZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlQcm9wZXJ0eTxUPihhcnJheTogVFtdLCBwcm9wZXJ0eToga2V5b2YgVCk6IFRbXSB7XHJcbiAgICBjb25zdCBncm91cGVkOiB7IFtrZXk6IHN0cmluZ106IFRbXSB9ID0ge307XHJcblxyXG4gICAgLy8gR3JvdXBpbmcgYmFzZWQgb24gaW5jb21pbmcgYXR0cmlidXRlc1xyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gaXRlbVtwcm9wZXJ0eV07XHJcbiAgICAgICAgaWYgKCFncm91cGVkW2tleV0pIHtcclxuICAgICAgICAgICAgZ3JvdXBlZFtrZXldID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdyb3VwZWRba2V5XS5wdXNoKGl0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1lcmdlIHRoZSBzb3J0ZWQgYXJyYXlzIGluIHRoZSBvcmRlciBvZiB0aGUgb3JpZ2luYWwgYXJyYXlzXHJcbiAgICBjb25zdCByZXN1bHQgPSBPYmplY3QudmFsdWVzKGdyb3VwZWQpLnJlZHVjZSgoYWNjLCBjdXJyZW50KSA9PiBhY2MuY29uY2F0KGN1cnJlbnQpLCBbXSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwSXRlbXNCeVByb3BlcnR5KGl0ZW1zOiBJdGVtW10sIHByb3BlcnR5OiBzdHJpbmcpOiB7IFtrZXk6IHN0cmluZ106IEl0ZW1bXSB9IHtcclxuICAgIGNvbnN0IGdyb3VwZWRJdGVtczogeyBba2V5OiBzdHJpbmddOiBJdGVtW10gfSA9IHt9O1xyXG5cclxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBpdGVtW3Byb3BlcnR5XTtcclxuXHJcbiAgICAgICAgaWYgKCFncm91cGVkSXRlbXNbcHJvcFZhbHVlXSkge1xyXG4gICAgICAgICAgICBncm91cGVkSXRlbXNbcHJvcFZhbHVlXSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ3JvdXBlZEl0ZW1zW3Byb3BWYWx1ZV0ucHVzaChpdGVtKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBncm91cGVkSXRlbXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1TdWJNZW51SXRlbXMoc3ViTWVudUl0ZW1zOiBTdWJNZW51SXRlbXMpOiBUcmFuc2Zvcm1lZFN1Yk1lbnVJdGVtc1tdIHtcclxuICAgIGNvbnN0IHRyYW5zZm9ybWVkU3ViTWVudUl0ZW1zOiBUcmFuc2Zvcm1lZFN1Yk1lbnVJdGVtc1tdID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCB0eXBlIGluIHN1Yk1lbnVJdGVtcykge1xyXG4gICAgICAgIGlmIChzdWJNZW51SXRlbXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBzdWJNZW51SXRlbXNbdHlwZV07XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkU3ViTWVudUl0ZW1zLnB1c2goLi4uaXRlbXMubWFwKGl0ZW0gPT4gKHsgLi4uaXRlbSwgdHlwZSB9KSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJhbnNmb3JtZWRTdWJNZW51SXRlbXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5hbWVLZXkob2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvbGRLZXk6IHN0cmluZywgbmV3S2V5OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIC8vIENoZWNrIGlmIHRoZSBrZXkgdG8gYmUgbW9kaWZpZWQgZXhpc3RzXHJcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KG9sZEtleSkpIHtcclxuICAgICAgICAvLyBDcmVhdGVzIGEgbmV3IG9iamVjdCwga2VlcGluZyB0aGUgcmVmZXJlbmNlIHRvIHRoZSBvcmlnaW5hbCBvYmplY3QsIGJ1dCBjaGFuZ2luZyB0aGUga2V5IG5hbWUgdG8gbmV3S2V5LlxyXG4gICAgICAgIG9ialtuZXdLZXldID0gb2JqW29sZEtleV07XHJcblxyXG4gICAgICAgIC8vIERlbGV0ZSBvbGQga2V5LXZhbHVlIHBhaXJzXHJcbiAgICAgICAgZGVsZXRlIG9ialtvbGRLZXldO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZXNJbkRpcmVjdG9yeShkaXJlY3RvcnlQYXRoOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBmaWxlc0FuZEZvbGRlcnMgPSBmcy5yZWFkZGlyU3luYyhkaXJlY3RvcnlQYXRoKTtcclxuICAgIGNvbnN0IGZpbGVzID0gZmlsZXNBbmRGb2xkZXJzLmZpbHRlcihmaWxlT3JGb2xkZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aC5qb2luKGRpcmVjdG9yeVBhdGgsIGZpbGVPckZvbGRlcik7XHJcbiAgICAgICAgcmV0dXJuIGZzLnN0YXRTeW5jKGZ1bGxQYXRoKS5pc0ZpbGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBmaWxlcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsYm93UGF0aChmcm9tOiBzdHJpbmcsIHRvOiBzdHJpbmcsIHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgaWYgKGZyb20gPT09ICdsZWZ0JyAmJiB0byA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgIGlmICh4MSA+IHgyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgxIC0gKHgxIC0geDIpIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IGNvbnRyb2wxWDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0geTI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoeDEgPCB4Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MSAtIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJYID0gY29udHJvbDFYO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSB5MSArICh5MiAtIHkxKSAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWCA9IHgyICsgNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWSA9IGNvbnRyb2wyWTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDRYID0gY29udHJvbDNYO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sNFkgPSB5MjtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke2NvbnRyb2wyWX0gSCR7Y29udHJvbDNYfSBWJHtjb250cm9sM1l9IEgke2NvbnRyb2w0WH0gViR7eTJ9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIC8vY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke2NvbnRyb2wyWX0gSCR7Y29udHJvbDNYfSBWJHtjb250cm9sM1l9IEgke2NvbnRyb2w0WH0gViR7Y29udHJvbDRZfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZyb20gPT09ICdyaWdodCcgJiYgdG8gPT09ICdsZWZ0Jykge1xyXG4gICAgICAgIGlmICh4MSA8IHgyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgxICsgKHgyIC0geDEpIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IGNvbnRyb2wxWDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0geTI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoeDEgPiB4Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MSArIDMwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJYID0gY29udHJvbDFYO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSB5MSAtICh5MSAtIHkyKSAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWCA9IHgyIC0gMzA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWSA9IGNvbnRyb2wyWTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDRYID0gY29udHJvbDNYO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sNFkgPSB5MjtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke2NvbnRyb2wyWX0gSCR7Y29udHJvbDNYfSBWJHtjb250cm9sM1l9IEgke2NvbnRyb2w0WH0gViR7eTJ9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZnJvbSA9PT0gJ3JpZ2h0JyAmJiB0byA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgIGlmICh4MSA+PSB4Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MSArIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJYID0gY29udHJvbDFYO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSB5MjtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke3kyfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh4MSA8IHgyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgyICsgNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWSA9IHkxO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlggPSBjb250cm9sMVg7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWSA9IHkyO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbDFYfSBWJHtjb250cm9sMVl9IEgke2NvbnRyb2wyWH0gViR7eTJ9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZnJvbSA9PT0gJ2xlZnQnICYmIHRvID09PSAnbGVmdCcpIHtcclxuICAgICAgICBpZiAoeDEgPj0geDIpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFYID0geDIgLSA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IGNvbnRyb2wxWDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0geTI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoeDEgPCB4Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MSAtIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJYID0gY29udHJvbDFYO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSB5MjtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke3kyfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZyb20gPT09ICd0b3AnICYmIHRvID09PSAnYm90dG9tJykge1xyXG4gICAgICAgIGlmICh5MSA+IHkyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgxO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MSAtICh5MSAtIHkyKSAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IHgyO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSBjb250cm9sMVk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoeTEgPCB5Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTEgLSA1MCA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IHgxICsgKHgyIC0geDEpIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0gY29udHJvbDFZO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sM1ggPSBjb250cm9sMlg7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWSA9IHkyICsgNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2w0WCA9IHgyO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sNFkgPSBjb250cm9sM1k7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHtjb250cm9sMll9IEgke2NvbnRyb2wzWH0gViR7Y29udHJvbDNZfSBIJHtjb250cm9sNFh9IFYke3kyfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZyb20gPT09ICdib3R0b20nICYmIHRvID09PSAndG9wJykge1xyXG4gICAgICAgIGlmICh5MSA8IHkyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgxO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MSArICh5MiAtIHkxKSAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IHgyO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSBjb250cm9sMVk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoeTEgPiB5Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTEgKyA1MCA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IHgxIC0gKHgxIC0geDIpIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0gY29udHJvbDFZO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sM1ggPSBjb250cm9sMlg7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWSA9IHkyIC0gNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2w0WCA9IHgyO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sNFkgPSBjb250cm9sM1k7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHtjb250cm9sMll9IEgke2NvbnRyb2wzWH0gViR7Y29udHJvbDNZfSBIJHtjb250cm9sNFh9IFYke3kyfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZyb20gPT09ICd0b3AnICYmIHRvID09PSAndG9wJykge1xyXG4gICAgICAgIGlmICh5MSA+PSB5Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTIgLSA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJYID0geDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWSA9IGNvbnRyb2wxWTtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke3kyfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh5MSA8IHkyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgxO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MSAtIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlggPSB4MjtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0gY29udHJvbDFZO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbDFYfSBWJHtjb250cm9sMVl9IEgke2NvbnRyb2wyWH0gViR7eTJ9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZnJvbSA9PT0gJ2JvdHRvbScgJiYgdG8gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgaWYgKHkxID49IHkyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgxO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MSArIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlggPSB4MjtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0gY29udHJvbDFZO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbDFYfSBWJHtjb250cm9sMVl9IEgke2NvbnRyb2wyWH0gViR7eTJ9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHkxIDwgeTIpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFYID0geDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWSA9IHkyICsgNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IHgyO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSBjb250cm9sMVk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChmcm9tID09PSAnbGVmdCcgJiYgdG8gPT09ICd0b3AnKSB7XHJcbiAgICAgICAgaWYgKHgxID4geDIgJiYgeTEgPCB5Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sWCA9IHgyO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sWSA9IHkyO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbFh9IFYke2NvbnRyb2xZfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoeDEgPiB4MiAmJiB5MSA+IHkyKSB8fCAoeDEgPCB4MikpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFYID0geDEgLSA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IGNvbnRyb2wxWDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0geTIgLSA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDNYID0geDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWSA9IGNvbnRyb2wyWTtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke2NvbnRyb2wyWX0gSCR7Y29udHJvbDNYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChmcm9tID09PSAndG9wJyAmJiB0byA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgaWYgKHgxIDwgeDIgJiYgeTEgPiB5Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sWCA9IHgxO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sWSA9IHkyO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbFh9IFYke2NvbnRyb2xZfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoeDEgPCB4MiAmJiB5MSA8IHkyKSB8fCAoeDEgPiB4MikpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFYID0geDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWSA9IHkxIC0gNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IHgyIC0gNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWSA9IGNvbnRyb2wxWTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDNYID0gY29udHJvbDJYO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sM1kgPSB5MjtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke2NvbnRyb2wyWX0gSCR7Y29udHJvbDNYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChmcm9tID09PSAncmlnaHQnICYmIHRvID09PSAndG9wJykge1xyXG4gICAgICAgIGlmICh4MSA8IHgyICYmIHkxIDwgeTIpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbFggPSB4MjtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbFkgPSB5MjtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2xYfSBWJHtjb250cm9sWX0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHgxIDwgeDIgJiYgeTEgPiB5MikgfHwgKHgxID4geDIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgxICsgNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWSA9IHkxO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlggPSBjb250cm9sMVg7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWSA9IHkyIC0gNTA7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWCA9IHgyO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sM1kgPSBjb250cm9sMlk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHtjb250cm9sMll9IEgke2NvbnRyb2wzWH0gViR7eTJ9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZnJvbSA9PT0gJ3RvcCcgJiYgdG8gPT09ICdyaWdodCcpIHtcclxuICAgICAgICBpZiAoeDEgPiB4MiAmJiB5MSA+IHkyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xYID0geDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xZID0geTI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sWH0gViR7Y29udHJvbFl9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCh4MSA+IHgyICYmIHkxIDwgeTIpIHx8ICh4MSA8IHgyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTEgLSA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJYID0geDIgKyA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0gY29udHJvbDFZO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sM1ggPSBjb250cm9sMlg7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWSA9IHkyO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbDFYfSBWJHtjb250cm9sMVl9IEgke2NvbnRyb2wyWH0gViR7Y29udHJvbDJZfSBIJHtjb250cm9sM1h9IFYke3kyfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZyb20gPT09ICdsZWZ0JyAmJiB0byA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICBpZiAoeDEgPiB4MiAmJiB5MSA+IHkyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xYID0geDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xZID0geTI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sWH0gViR7Y29udHJvbFl9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCh4MSA+IHgyICYmIHkxIDwgeTIpIHx8ICh4MSA8IHgyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MSAtIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJYID0gY29udHJvbDFYO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSB5MiArIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sM1ggPSB4MjtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDNZID0gY29udHJvbDJZO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbDFYfSBWJHtjb250cm9sMVl9IEgke2NvbnRyb2wyWH0gViR7Y29udHJvbDJZfSBIJHtjb250cm9sM1h9IFYke3kyfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZyb20gPT09ICdib3R0b20nICYmIHRvID09PSAnbGVmdCcpIHtcclxuICAgICAgICBpZiAoeDEgPCB4MiAmJiB5MSA8IHkyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xYID0geDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xZID0geTI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sWH0gViR7Y29udHJvbFl9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCh4MSA8IHgyICYmIHkxID4geTIpIHx8ICh4MSA+IHgyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVggPSB4MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTEgKyA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJYID0geDIgLSA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0gY29udHJvbDFZO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sM1ggPSBjb250cm9sMlg7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWSA9IHkyO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbDFYfSBWJHtjb250cm9sMVl9IEgke2NvbnRyb2wyWH0gViR7Y29udHJvbDJZfSBIJHtjb250cm9sM1h9IFYke3kyfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGZyb20gPT09ICdyaWdodCcgJiYgdG8gPT09ICdib3R0b20nKSB7XHJcbiAgICAgICAgaWYgKHgxIDwgeDIgJiYgeTEgPiB5Mikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sWCA9IHgyO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sWSA9IHkyO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGBNJHt4MX0sJHt5MX0gSCR7Y29udHJvbFh9IFYke2NvbnRyb2xZfSBIJHt4Mn1gO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoeDEgPCB4MiAmJiB5MSA8IHkyKSB8fCAoeDEgPiB4MikpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFYID0geDEgKyA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDFZID0geTE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wyWCA9IGNvbnRyb2wxWDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDJZID0geTIgKyA1MDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDNYID0geDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWSA9IGNvbnRyb2wyWTtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2wxWH0gViR7Y29udHJvbDFZfSBIJHtjb250cm9sMlh9IFYke2NvbnRyb2wyWX0gSCR7Y29udHJvbDNYfSBWJHt5Mn0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChmcm9tID09PSAnYm90dG9tJyAmJiB0byA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgIGlmICh4MSA+IHgyICYmIHkxIDwgeTIpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbFggPSB4MTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbFkgPSB5MjtcclxuICAgICAgICAgICAgY29uc3QgcGF0aERhdGEgPSBgTSR7eDF9LCR7eTF9IEgke2NvbnRyb2xYfSBWJHtjb250cm9sWX0gSCR7eDJ9YDtcclxuICAgICAgICAgICAgcmV0dXJuIHBhdGhEYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHgxID4geDIgJiYgeTEgPiB5MikgfHwgKHgxIDwgeDIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wxWCA9IHgxO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMVkgPSB5MSArIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlggPSB4MiArIDUwO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sMlkgPSBjb250cm9sMVk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2wzWCA9IGNvbnRyb2wyWDtcclxuICAgICAgICAgICAgY29uc3QgY29udHJvbDNZID0geTI7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhEYXRhID0gYE0ke3gxfSwke3kxfSBIJHtjb250cm9sMVh9IFYke2NvbnRyb2wxWX0gSCR7Y29udHJvbDJYfSBWJHtjb250cm9sMll9IEgke2NvbnRyb2wzWH0gViR7eTJ9IEgke3gyfWA7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXRoRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgImludGVyZmFjZSBNZW51SXRlbSB7XHJcbiAgICBjbGFzczogc3RyaW5nO1xyXG4gICAgdHlwZTogc3RyaW5nO1xyXG4gICAgaWNvbjogc3RyaW5nO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgY2F0OiBzdHJpbmc7XHJcbiAgICBzZWxlY3Rvcjogc3RyaW5nO1xyXG4gICAgY3R4bWVudTogYm9vbGVhbjtcclxuICAgIGVuYWJsZTogYm9vbGVhbjtcclxuICAgIGV4cGFuZGVkOiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3ViTWVudUl0ZW0ge1xyXG4gICAgY2xhc3M6IHN0cmluZztcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIGljb246IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHNlbGVjdG9yOiBzdHJpbmc7XHJcbiAgICBlbmFibGU6IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBDdXN0b21JY29uIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHN2Z0NvbnRlbnQ6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIENvbmZpZyB7XHJcbiAgICBba2V5OiBzdHJpbmddOiB7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICAgIG1lbnVJdGVtczogTWVudUl0ZW1bXTtcclxuICAgICAgICBzdWJNZW51SXRlbXM6IHtcclxuICAgICAgICAgICAgW2tleTogc3RyaW5nXTogU3ViTWVudUl0ZW1bXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGN1c3RvbUljb25zOiBDdXN0b21JY29uW107XHJcbiAgICB9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVHJhbnNmb3JtZWRTdWJNZW51SXRlbXMgZXh0ZW5kcyBTdWJNZW51SXRlbSB7XHJcbiAgdHlwZTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdENvbmZpZ3M6IENvbmZpZyA9IHtcclxuICAgIFwiZGVmYXVsdFwiOiB7XHJcbiAgICAgICAgbmFtZTogXCJEZWZhdWx0XCIsXHJcbiAgICAgICAgbWVudUl0ZW1zOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzOiBcImNzLWJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJib3JkZXJcIixcclxuICAgICAgICAgICAgICAgIGljb246IFwiY3Mtc3R5bGUtYm9yZGVyXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgY2F0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBjdHhtZW51OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbGFzczogXCJjcy1iZ1wiLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJiZ1wiLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogXCJjcy1iYWNrZ3JvdW5kXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkJhY2tncm91bmRcIixcclxuICAgICAgICAgICAgICAgIGNhdDogXCJcIixcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY3R4bWVudTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiY3Mtcm90YXRlXCIsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJvdGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogXCJyb3RhdGUtY3dcIixcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUm90YXRlXCIsXHJcbiAgICAgICAgICAgICAgICBjYXQ6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgIGN0eG1lbnU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzOiBcImNzLXNoYXBlXCIsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcInNoYXBlXCIsXHJcbiAgICAgICAgICAgICAgICBpY29uOiBcImRpYW1vbmRcIixcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiU2hhcGVcIixcclxuICAgICAgICAgICAgICAgIGNhdDogXCJcIixcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY3R4bWVudTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiY3MtaGlnaGxpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImhpZ2hsaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogXCJzdGFyXCIsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkhpZ2hsaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgY2F0OiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBjdHhtZW51OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbGFzczogXCJjcy1leHRyYVwiLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJleHRyYVwiLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogXCJtb3JlLWhvcml6b250YWxcIixcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiRXh0cmFcIixcclxuICAgICAgICAgICAgICAgIGNhdDogXCJcIixcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY3R4bWVudTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiY3MtbGluZS10eXBlXCIsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImxpbmVUeXBlXCIsXHJcbiAgICAgICAgICAgICAgICBpY29uOiBcImNzLWJvcmRlci1jb3JuZXItcGlsbFwiLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJMaW5lIHR5cGVcIixcclxuICAgICAgICAgICAgICAgIGNhdDogXCJlZGdlXCIsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgIGN0eG1lbnU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzOiBcImNzLWxpbmUtc3R5bGVcIixcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwibGluZVN0eWxlXCIsXHJcbiAgICAgICAgICAgICAgICBpY29uOiBcImNzLWxpbmUtc3R5bGVcIixcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiTGluZSBzdHlsZVwiLFxyXG4gICAgICAgICAgICAgICAgY2F0OiBcImVkZ2VcIixcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY3R4bWVudTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2xhc3M6IFwiY3MtbGluZS10aGlja25lc3NcIixcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwibGluZVRoaWNrbmVzc1wiLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogXCJlcXVhbFwiLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogXCJMaW5lIHRoaWNrbmVzc1wiLFxyXG4gICAgICAgICAgICAgICAgY2F0OiBcImVkZ2VcIixcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgY3R4bWVudTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgc3ViTWVudUl0ZW1zOiB7XHJcbiAgICAgICAgICAgIGJvcmRlcjogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImNzLWJvcmRlci1ub25lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJib3JkZXJcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiBcImNzLW5vLWJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTm8gYm9yZGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImNzLWJvcmRlci1kYXNoZWRcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvcmRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwiYm94LXNlbGVjdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRGFzaGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIGJnOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3MtYmctdHJhbnNwYXJlbnRcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJnXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogXCJjcy10cmFuc3BhcmVudFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiVHJhbnNwYXJlbnRcIixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3MtYmctb3BhY2l0eS0wXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwiY3Mtb3BhY2l0eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiT3BhY2l0eSAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHJvdGF0ZTogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImNzLXJvdGF0ZS1yaWdodC00NVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicm90YXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogXCJyZWRvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSaWdodCA0NVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJjcy1yb3RhdGUtcmlnaHQtOTBcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJvdGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwicmVkb1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUmlnaHQgOTBcIixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3Mtcm90YXRlLWxlZnQtNDVcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJvdGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwidW5kb1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTGVmdCA0NVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJjcy1yb3RhdGUtbGVmdC05MFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicm90YXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogXCJ1bmRvXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJMZWZ0IDkwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHNoYXBlOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3Mtc2hhcGUtY2lyY2xlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzaGFwZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwiY2lyY2xlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJDaXJjbGVcIixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3Mtc2hhcGUtcGFyYWxsZWxvZ3JhbS1yaWdodFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2hhcGVcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiBcImNzLXBhcmFsbGVsb2dyYW0tcmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlBhcmFsbGVsb2dyYW0gcmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3Mtc2hhcGUtcGFyYWxsZWxvZ3JhbS1sZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzaGFwZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwiY3MtcGFyYWxsZWxvZ3JhbS1sZWZ0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJQYXJhbGxlbG9ncmFtIGxlZnRcIixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgaGlnaGxpZ2h0OiBbXSxcclxuICAgICAgICAgICAgZXh0cmE6IFtdLFxyXG4gICAgICAgICAgICBsaW5lVHlwZTogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImNzLWxpbmUtc3RyYWlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxpbmVUeXBlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogXCJtaW51c1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU3RyYWlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3MtbGluZS1lbGJvd1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibGluZVR5cGVcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiBcImNzLWVsYm93XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJFbGJvd1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBsaW5lU3R5bGU6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJjcy1saW5lLWRhc2hlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibGluZVN0eWxlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogXCJjcy1saW5lLWRhc2hlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRGFzaGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImNzLWxpbmUtZGFzaGVkLXJvdW5kXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsaW5lU3R5bGVcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiBcImNzLWxpbmUtZGFzaGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJEYXNoZWQgcm91bmRcIixcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3MtbGluZS1kb3R0ZWRcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxpbmVTdHlsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwiY3MtbGluZS1kb3R0ZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkRvdHRlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJjcy1saW5lLWRvdHRlZC1saW5lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsaW5lU3R5bGVcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiBcImNzLWRvdHRlZC1saW5lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJEb3R0ZWQgbGluZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBsaW5lVGhpY2tuZXNzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY3MtbGluZS10aGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibGluZVRoaWNrbmVzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IFwiY3MtdGhpY2tlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiVGhpY2tlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJjcy1saW5lLXRoaWNrZXJcIixcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxpbmVUaGlja25lc3NcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiBcImNzLXRoaWNrZXIrK1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiVGhpY2tlcisrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGN1c3RvbUljb25zOiBbXVxyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNzSWNvbnM6IEN1c3RvbUljb25bXSA9IFtcclxuICAgIC8vIEx1Y2lkZSBJY29uc1xyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiY3Mtbm8tYm9yZGVyXCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cImx1Y2lkZSBsdWNpZGUtbW91c2UtcG9pbnRlci1zcXVhcmUtZGFzaGVkXCI+PHBhdGggZD1cIk01IDNhMiAyIDAgMCAwLTIgMlwiLz48cGF0aCBkPVwiTTE5IDNhMiAyIDAgMCAxIDIgMlwiLz48cGF0aCBkPVwibTEyIDEyIDQgMTAgMS43LTQuM0wyMiAxNlpcIi8+PHBhdGggZD1cIk01IDIxYTIgMiAwIDAgMS0yLTJcIi8+PHBhdGggZD1cIk05IDNoMVwiLz48cGF0aCBkPVwiTTkgMjFoMlwiLz48cGF0aCBkPVwiTTE0IDNoMVwiLz48cGF0aCBkPVwiTTMgOXYxXCIvPjxwYXRoIGQ9XCJNMjEgOXYyXCIvPjxwYXRoIGQ9XCJNMyAxNHYxXCIvPjwvc3ZnPmBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy10aGlja2VyXCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cImx1Y2lkZSBsdWNpZGUtdGFsbHktMlwiPjxwYXRoIGQ9XCJNNCA0djE2XCIvPjxwYXRoIGQ9XCJNOSA0djE2XCIvPjwvc3ZnPmBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy10aGlja2VyKytcIixcclxuICAgICAgICBzdmdDb250ZW50OiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwibHVjaWRlIGx1Y2lkZS10YWxseS0zXCI+PHBhdGggZD1cIk00IDR2MTZcIi8+PHBhdGggZD1cIk05IDR2MTZcIi8+PHBhdGggZD1cIk0xNCA0djE2XCIvPjwvc3ZnPmBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy1jaXJjbGUtZGFzaGVkXCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjFcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBjbGFzcz1cImx1Y2lkZSBsdWNpZGUtY2lyY2xlLWRhc2hlZFwiPjxwYXRoIGQ9XCJNMTAuMSAyLjE4YTkuOTMgOS45MyAwIDAgMSAzLjggMFwiLz48cGF0aCBkPVwiTTE3LjYgMy43MWE5Ljk1IDkuOTUgMCAwIDEgMi42OSAyLjdcIi8+PHBhdGggZD1cIk0yMS44MiAxMC4xYTkuOTMgOS45MyAwIDAgMSAwIDMuOFwiLz48cGF0aCBkPVwiTTIwLjI5IDE3LjZhOS45NSA5Ljk1IDAgMCAxLTIuNyAyLjY5XCIvPjxwYXRoIGQ9XCJNMTMuOSAyMS44MmE5Ljk0IDkuOTQgMCAwIDEtMy44IDBcIi8+PHBhdGggZD1cIk02LjQgMjAuMjlhOS45NSA5Ljk1IDAgMCAxLTIuNjktMi43XCIvPjxwYXRoIGQ9XCJNMi4xOCAxMy45YTkuOTMgOS45MyAwIDAgMSAwLTMuOFwiLz48cGF0aCBkPVwiTTMuNzEgNi40YTkuOTUgOS45NSAwIDAgMSAyLjctMi42OVwiLz48L3N2Zz5gXHJcbiAgICB9LFxyXG4gICAgLy8gVGFibGVyIEljb25zXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy1iYWNrZ3JvdW5kXCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLXRhYmxlciBpY29uLXRhYmxlci1iYWNrZ3JvdW5kXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxwYXRoIGQ9XCJNNCA4bDQgLTRcIiAvPjxwYXRoIGQ9XCJNMTQgNGwtMTAgMTBcIiAvPjxwYXRoIGQ9XCJNNCAyMGwxNiAtMTZcIiAvPjxwYXRoIGQ9XCJNMjAgMTBsLTEwIDEwXCIgLz48cGF0aCBkPVwiTTIwIDE2bC00IDRcIiAvPjwvc3ZnPmBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy10cmFuc3BhcmVudFwiLFxyXG4gICAgICAgIHN2Z0NvbnRlbnQ6IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImljb24gaWNvbi10YWJsZXIgaWNvbi10YWJsZXItZHJvcGxldC1oYWxmLTJcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PHBhdGggZD1cIk03LjUwMiAxOS40MjNjMi42MDIgMi4xMDUgNi4zOTUgMi4xMDUgOC45OTYgMGMyLjYwMiAtMi4xMDUgMy4yNjIgLTUuNzA4IDEuNTY2IC04LjU0NmwtNC44OSAtNy4yNmMtLjQyIC0uNjI1IC0xLjI4NyAtLjgwMyAtMS45MzYgLS4zOTdhMS4zNzYgMS4zNzYgMCAwIDAgLS40MSAuMzk3bC00Ljg5MyA3LjI2Yy0xLjY5NSAyLjgzOCAtMS4wMzUgNi40NDEgMS41NjcgOC41NDZ6XCIgLz48cGF0aCBkPVwiTTUgMTRoMTRcIiAvPjwvc3ZnPmBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy1vcGFjaXR5XCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLXRhYmxlciBpY29uLXRhYmxlci1kcm9wbGV0XCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxwYXRoIGQ9XCJNNy41MDIgMTkuNDIzYzIuNjAyIDIuMTA1IDYuMzk1IDIuMTA1IDguOTk2IDBjMi42MDIgLTIuMTA1IDMuMjYyIC01LjcwOCAxLjU2NiAtOC41NDZsLTQuODkgLTcuMjZjLS40MiAtLjYyNSAtMS4yODcgLS44MDMgLTEuOTM2IC0uMzk3YTEuMzc2IDEuMzc2IDAgMCAwIC0uNDEgLjM5N2wtNC44OTMgNy4yNmMtMS42OTUgMi44MzggLTEuMDM1IDYuNDQxIDEuNTY3IDguNTQ2elwiIC8+PC9zdmc+YFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcImNzLWJvcmRlci1jb3JuZXItcGlsbFwiLFxyXG4gICAgICAgIHN2Z0NvbnRlbnQ6IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImljb24gaWNvbi10YWJsZXIgaWNvbi10YWJsZXItYm9yZGVyLWNvcm5lci1waWxsXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxwYXRoIGQ9XCJNNCAyMHYtNWMwIC02LjA3NSA0LjkyNSAtMTEgMTEgLTExaDVcIiAvPjwvc3ZnPmBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy1saW5lLXN0eWxlXCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLXRhYmxlciBpY29uLXRhYmxlci1ib3JkZXItc3R5bGUtMlwiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48cGF0aCBkPVwiTTQgMTh2LjAxXCIgLz48cGF0aCBkPVwiTTggMTh2LjAxXCIgLz48cGF0aCBkPVwiTTEyIDE4di4wMVwiIC8+PHBhdGggZD1cIk0xNiAxOHYuMDFcIiAvPjxwYXRoIGQ9XCJNMjAgMTh2LjAxXCIgLz48cGF0aCBkPVwiTTE4IDEyaDJcIiAvPjxwYXRoIGQ9XCJNMTEgMTJoMlwiIC8+PHBhdGggZD1cIk00IDEyaDJcIiAvPjxwYXRoIGQ9XCJNNCA2aDE2XCIgLz48L3N2Zz5gXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiY3MtbGluZS1kYXNoZWRcIixcclxuICAgICAgICBzdmdDb250ZW50OiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJpY29uIGljb24tdGFibGVyIGljb24tdGFibGVyLWxpbmUtZGFzaGVkXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxwYXRoIGQ9XCJNNSAxMmgyXCIgLz48cGF0aCBkPVwiTTE3IDEyaDJcIiAvPjxwYXRoIGQ9XCJNMTEgMTJoMlwiIC8+PC9zdmc+YFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiBcImNzLWxpbmUtZG90dGVkXCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvbiBpY29uLXRhYmxlciBpY29uLXRhYmxlci1saW5lLWRvdHRlZFwiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48cGF0aCBkPVwiTTQgMTJ2LjAxXCIgLz48cGF0aCBkPVwiTTggMTJ2LjAxXCIgLz48cGF0aCBkPVwiTTEyIDEydi4wMVwiIC8+PHBhdGggZD1cIk0xNiAxMnYuMDFcIiAvPjxwYXRoIGQ9XCJNMjAgMTJ2LjAxXCIgLz48L3N2Zz5gXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiY3MtZG90dGVkLWxpbmVcIixcclxuICAgICAgICBzdmdDb250ZW50OiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJpY29uIGljb24tdGFibGVyIGljb24tdGFibGVyLXNlcGFyYXRvclwiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48cGF0aCBkPVwiTTMgMTJsMCAuMDFcIiAvPjxwYXRoIGQ9XCJNNyAxMmwxMCAwXCIgLz48cGF0aCBkPVwiTTIxIDEybDAgLjAxXCIgLz48L3N2Zz5gXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiY3MtaW5wdXQtY2hlY2tcIixcclxuICAgICAgICBzdmdDb250ZW50OiBgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJpY29uIGljb24tdGFibGVyIGljb24tdGFibGVyLWlucHV0LWNoZWNrXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTTAgMGgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjxwYXRoIGQ9XCJNMjAgMTN2LTRhMiAyIDAgMCAwIC0yIC0yaC0xMmEyIDIgMCAwIDAgLTIgMnY1YTIgMiAwIDAgMCAyIDJoNlwiIC8+PHBhdGggZD1cIk0xNSAxOWwyIDJsNCAtNFwiIC8+PC9zdmc+YFxyXG4gICAgfSxcclxuICAgIC8vIEN1c3RvbSBJY29uc1xyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiY3Mtc3R5bGUtYm9yZGVyXCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggZD1cIk0xNiAySDhDNC42ODYyOSAyIDIgNC42ODYyOSAyIDhWMTZDMiAxOS4zMTM3IDQuNjg2MjkgMjIgOCAyMkgxNkMxOS4zMTM3IDIyIDIyIDE5LjMxMzcgMjIgMTZWOEMyMiA0LjY4NjI5IDE5LjMxMzcgMiAxNiAyWlwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZS1kYXNoYXJyYXk9XCIyIDJcIj48L3BhdGg+PHBhdGggZD1cIk0xNiA1SDhDNi4zNDMxNSA1IDUgNi4zNDMxNSA1IDhWMTZDNSAxNy42NTY5IDYuMzQzMTUgMTkgOCAxOUgxNkMxNy42NTY5IDE5IDE5IDE3LjY1NjkgMTkgMTZWOEMxOSA2LjM0MzE1IDE3LjY1NjkgNSAxNiA1WlwiPjwvcGF0aD48L3N2Zz5gXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiY3MtcGFyYWxsZWxvZ3JhbS1yaWdodFwiLFxyXG4gICAgICAgIHN2Z0NvbnRlbnQ6IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzcz1cImljb25cIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PHBhdGggZD1cIk00Ljg4NyAyMGgxMS44NjhjLjg5MyAwIDEuNjY0IC0uNjY1IDEuODQ3IC0xLjU5MmwyLjM1OCAtMTJjLjIxMiAtMS4wODEgLS40NDIgLTIuMTQgLTEuNDYyIC0yLjM2NmExLjc4NCAxLjc4NCAwIDAgMCAtLjM4NSAtLjA0MmgtMTEuODY4Yy0uODkzIDAgLTEuNjY0IC42NjUgLTEuODQ3IDEuNTkybC0yLjM1OCAxMmMtLjIxMiAxLjA4MSAuNDQyIDIuMTQgMS40NjIgMi4zNjZjLjEyNyAuMDI4IC4yNTYgLjA0MiAuMzg1IC4wNDJ6XCIgLz48L3N2Zz5gXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6IFwiY3MtcGFyYWxsZWxvZ3JhbS1sZWZ0XCIsXHJcbiAgICAgICAgc3ZnQ29udGVudDogYDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaWNvblwiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48cGF0aCBkPVwiTSAxOS4xMTMsMjAgSCA3LjI0NSBDIDYuMzUyLDIwIDUuNTgxLDE5LjMzNSA1LjM5OCwxOC40MDggTCAzLjA0LDYuNDA4IEMgMi44MjgsNS4zMjcgMy40ODIsNC4yNjggNC41MDIsNC4wNDIgQSAxLjc4NCwxLjc4NCAwIDAgMSA0Ljg4Nyw0IGggMTEuODY4IGMgMC44OTMsMCAxLjY2NCwwLjY2NSAxLjg0NywxLjU5MiBsIDIuMzU4LDEyIGMgMC4yMTIsMS4wODEgLTAuNDQyLDIuMTQgLTEuNDYyLDIuMzY2IEMgMTkuMzcxLDE5Ljk4NiAxOS4yNDIsMjAgMTkuMTEzLDIwIFpcIiAvPjwvc3ZnPmBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy1lbGJvd1wiLFxyXG4gICAgICAgIHN2Z0NvbnRlbnQ6IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PHBhdGggZD1cIk0zIDE3bDYgLTZsNCA0bDggLThcIiAvPjwvc3ZnPmBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogXCJjcy1iYWRnZS1jY1wiLFxyXG4gICAgICAgIHN2Z0NvbnRlbnQ6IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggZD1cIk0xIDE1VjlDMSA1LjY4NjI5IDMuNjg2MjkgMyA3IDNIMTdDMjAuMzEzNyAzIDIzIDUuNjg2MjkgMjMgOVYxNUMyMyAxOC4zMTM3IDIwLjMxMzcgMjEgMTcgMjFIN0MzLjY4NjI5IDIxIDEgMTguMzEzNyAxIDE1WlwiPjwvcGF0aD48cGF0aCBkPVwiTTEwLjUgMTBMMTAuMzI4NCA5LjgyODQzQzkuNzk3OTkgOS4yOTc5OSA5LjA3ODU3IDkgOC4zMjg0MyA5VjlDNi43NjYzMyA5IDUuNSAxMC4yNjYzIDUuNSAxMS44Mjg0VjEyLjE3MTZDNS41IDEzLjczMzcgNi43NjYzMyAxNSA4LjMyODQzIDE1VjE1QzkuMDc4NTcgMTUgOS43OTc5OSAxNC43MDIgMTAuMzI4NCAxNC4xNzE2TDEwLjUgMTRcIj48L3BhdGg+PHBhdGggZD1cIk0xOC41IDEwTDE4LjMyODQgOS44Mjg0M0MxNy43OTggOS4yOTc5OSAxNy4wNzg2IDkgMTYuMzI4NCA5VjlDMTQuNzY2MyA5IDEzLjUgMTAuMjY2MyAxMy41IDExLjgyODRWMTIuMTcxNkMxMy41IDEzLjczMzcgMTQuNzY2MyAxNSAxNi4zMjg0IDE1VjE1QzE3LjA3ODYgMTUgMTcuNzk4IDE0LjcwMiAxOC4zMjg0IDE0LjE3MTZMMTguNSAxNFwiPjwvcGF0aD48L3N2Zz5gXHJcbiAgICB9LFxyXG4gICAgLy97bmFtZTogXCJ4eHhcIiwgc3ZnQ29udGVudDogYHl5eWB9LFxyXG5dO1xyXG4iLCAiaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlLCBNb2RhbCwgZ2V0SWNvbklkcywgc2V0SWNvbiwgcmVtb3ZlSWNvbiwgc2V0VG9vbHRpcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IENhbnZhc1N0eWxlTWVudVBsdWdpbiwgeyBkZWZhdWx0U2V0dGluZ3MsIHNhdmVkU2V0dGluZ3MsIGNzSWNvbkxpc3QgfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IHNvcnRCeVByb3BlcnR5LCByZW5hbWVLZXksIGdldEZpbGVzSW5EaXJlY3RvcnkgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5cclxuaW50ZXJmYWNlIE1lbnVJdGVtVHlwZUNoYW5nZWQge1xyXG4gICAgb2xkVHlwZTogc3RyaW5nO1xyXG4gICAgbmV3VHlwZTogc3RyaW5nO1xyXG59XHJcblxyXG5jbGFzcyBDYW52YXNTdHlsZU1lbnVTZXR0aW5nIGV4dGVuZHMgU2V0dGluZyB7XHJcbiAgICBzZXR0aW5nczogW10gfCB7fTtcclxuICAgIGtleTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXNTdHlsZU1lbnVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IENhbnZhc1N0eWxlTWVudVBsdWdpbjtcclxuICAgIG1lbnVJdGVtc0NvbnRhaW5lckVsOiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHN1Yk1lbnVJdGVtc0NvbnRhaW5lckVsOiBIVE1MRGl2RWxlbWVudDtcclxuICAgIGN1c3RvbUljb25zQ29udGFpbmVyRWw6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgY29uZmlnVGFiQ29udGFpbmVyRWw6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgbWVudUl0ZW1zVGFiQ29udGFpbmVyRWw6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgY3VzdG9tSWNvbnNUYWJDb250YWluZXJFbDogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcmV2aW91c0NvbmZpZzogc3RyaW5nO1xyXG5cclxuICAgIGRldk1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIG1lbnVJdGVtVHlwZUNoYW5nZWQ6IE1lbnVJdGVtVHlwZUNoYW5nZWQgPSB7IG9sZFR5cGU6IFwiXCIsIG5ld1R5cGU6IFwiXCIgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDYW52YXNTdHlsZU1lbnVQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29uZmlncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpZ3M7XHJcbiAgICAgICAgY29uc3QgY3VycmVudENvbmZpZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRDb25maWc7XHJcbiAgICAgICAgY29uc3QgY29uZmlnID0gY29uZmlnc1tjdXJyZW50Q29uZmlnXTtcclxuXHJcbiAgICAgICAgY29uc3QgZGVmYXVsdENvbmZpZ3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZmF1bHRTZXR0aW5ncykpO1xyXG4gICAgICAgIGNvbnN0IHNhdmVkQ29uZmlncyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2F2ZWRTZXR0aW5ncykpO1xyXG5cclxuICAgICAgICBjb25zdCB2YXVsdERpciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuYmFzZVBhdGg7XHJcbiAgICAgICAgY29uc3QgcGx1Z2luRGlyID0gdGhpcy5wbHVnaW4ubWFuaWZlc3QuZGlyO1xyXG4gICAgICAgIGNvbnN0IHBhY2thZ2VzRm9sZGVyID0gcGF0aC5qb2luKHZhdWx0RGlyLCBwbHVnaW5EaXIsICdwYWNrYWdlcycpO1xyXG5cclxuICAgICAgICAvLyBzZXR0aW5ncyBoZWFkZXJcclxuICAgICAgICB0aGlzLnNldHRpbmdzSGVhZGVyQ29udGFpbmVyRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoe1xyXG4gICAgICAgICAgICBjbHM6IFwic2V0dGluZ3MtaGVhZGVyLWNvbnRhaW5lclwiLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdHlsZSBQYWNrIENvbmZpZ1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuc2V0dGluZ3NIZWFkZXJDb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJTdHlsZSBQYWNrYWdlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiTWFuYWdlIGluc3RhbGxlZCBzdHlsZSBwYWNrYWdlIGFuZCBicm93c2UgY29tbXVuaXR5IHN0eWxlIHBhY2thZ2VzLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignTmV3IFBhY2thZ2UgTmFtZScpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNhdmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIlNhdmUgYXMgbmV3IHBhY2thZ2VcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUHJldmlvdXNJY29ucyhjdXJyZW50Q29uZmlnLCBzYXZlZENvbmZpZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWNrYWdlTmFtZSA9IHRoaXMuc2V0dGluZ3NIZWFkZXJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFja2FnZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUFzTmV3UGFja2FnZShjb25maWcsIHBhY2thZ2VOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BhY2thZ2Ugc3VjY2Vzc2Z1bGx5IHNhdmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJyb3RhdGUtY2N3XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJSZXN0b3JlIHRoZSBjdXJyZW50IHBhY2thZ2UgZGVmYXVsdHNcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUHJldmlvdXNJY29ucyhjdXJyZW50Q29uZmlnLCBzYXZlZENvbmZpZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvbmZpZyBpbiBzYXZlZENvbmZpZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3NbY3VycmVudENvbmZpZ10gPSBzYXZlZENvbmZpZ3NbY3VycmVudENvbmZpZ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWdzW2N1cnJlbnRDb25maWddID0gZGVmYXVsdENvbmZpZ3NbY3VycmVudENvbmZpZ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyQ3VzdG9tSWNvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucGF0Y2hDYW52YXNNZW51KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNvbmZpZ3MpLmZvckVhY2goKGNvbmZpZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gY29uZmlnc1tjb25maWddO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihjb25maWcsIGdyb3VwLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZShjdXJyZW50Q29uZmlnKTtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUHJldmlvdXNJY29ucyhjdXJyZW50Q29uZmlnLCBzYXZlZENvbmZpZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRDb25maWcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckN1c3RvbUljb25zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucGF0Y2hDYW52YXNNZW51KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJmb2xkZXItb3BlblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiT3BlbiBwYWNrYWdlcyBmb2xkZXJcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZXhlYyB9ID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5ta2RpcihwYWNrYWdlc0ZvbGRlciwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIuY29kZSA9PT0gJ0VFWElTVCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlYyhgc3RhcnQgZXhwbG9yZXIgJHtwYWNrYWdlc0ZvbGRlcn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIHN0eWxlIHBhY2thZ2VzIGZvbGRlcjonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlYyhgc3RhcnQgZXhwbG9yZXIgJHtwYWNrYWdlc0ZvbGRlcn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwicmVmcmVzaC1jd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiUmVsb2FkIHBhY2thZ2VzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcy5ta2RpcihwYWNrYWdlc0ZvbGRlciwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIuY29kZSA9PT0gJ0VFWElTVCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIHN0eWxlIHBhY2thZ2VzIGZvbGRlcjogJHtlcnJ9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWNrYWdlRmlsZXMgPSBnZXRGaWxlc0luRGlyZWN0b3J5KHBhY2thZ2VzRm9sZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhY2thZ2VGaWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFja2FnZUZpbGVzLmZvckVhY2gocGFja2FnZUZpbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhY2thZ2VGaWxlUGF0aCA9IHBhdGguam9pbihwYWNrYWdlc0ZvbGRlciwgcGFja2FnZUZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbXBvcnRlZFBhY2thZ2UgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcy5yZWFkRmlsZShwYWNrYWdlRmlsZVBhdGgsICd1dGYtOCcsIGFzeW5jIChlcnIsIGNvbnRlbnRBc3luYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRQYWNrYWdlID0gSlNPTi5wYXJzZShjb250ZW50QXN5bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbXBvcnRlZENvbmZpZyA9IE9iamVjdC5rZXlzKGltcG9ydGVkUGFja2FnZSlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGltcG9ydGVkQ29uZmlnIGluIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpZ3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maWdzID0geyAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maWdzLCAuLi5pbXBvcnRlZFBhY2thZ2UgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNhdmVkQ29uZmlncyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoeyAuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5zYXZlZENvbmZpZ3MsIC4uLmltcG9ydGVkUGFja2FnZSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVkU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnUmVsb2FkZWQgc3R5bGUgcGFja2FnZXMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInVwbG9hZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiRXhwb3J0IHBhY2thZ2VcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLm1rZGlyKHBhY2thZ2VzRm9sZGVyLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5jb2RlID09PSAnRUVYSVNUJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgc3R5bGUgcGFja2FnZXMgZm9sZGVyOiAke2Vycn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cG9ydGVkUGFja2FnZSA9IHtbY3VycmVudENvbmZpZ106IGNvbmZpZ307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShleHBvcnRlZFBhY2thZ2UsIG51bGwsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWNrYWdlRmlsZSA9IGAke2N1cnJlbnRDb25maWd9Lmpzb25gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWNrYWdlRmlsZVBhdGggPSBwYXRoLmpvaW4ocGFja2FnZXNGb2xkZXIsIHBhY2thZ2VGaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnMud3JpdGVGaWxlKHBhY2thZ2VGaWxlUGF0aCwganNvblN0cmluZywgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHdyaXRpbmcgSlNPTiBmaWxlOiAke2Vycn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnUGFja2FnZSBzdWNjZXNzZnVsbHkgZXhwb3J0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwidHJhc2hcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIkRlbGV0ZSBwYWNrYWdlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVByZXZpb3VzSWNvbnMoY3VycmVudENvbmZpZywgc2F2ZWRDb25maWdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb25maWcgaW4gc2F2ZWRDb25maWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKGN1cnJlbnRDb25maWcgIT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucGx1Z2luLnNldHRpbmdzLnNhdmVkQ29uZmlnc1tjdXJyZW50Q29uZmlnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25maWdzW2N1cnJlbnRDb25maWddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VycmVudENvbmZpZyA9ICdkZWZhdWx0JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJDdXN0b21JY29ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucGF0Y2hDYW52YXNNZW51KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb25maWcgaW4gc2F2ZWRDb25maWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKGN1cnJlbnRDb25maWcgIT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwibW9kLXdhcm5pbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLy8uYWRkQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgIC8vICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAvLyAgICAgICAgLnNldEJ1dHRvblRleHQoXCJNYW5hZ2VcIilcclxuICAgICAgICAgICAgLy8gICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcclxuICAgICAgICAgICAgLy8gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vKTtcclxuXHJcbiAgICAgICAgLy8gY29uZmlnIHRhYlxyXG4gICAgICAgIHRoaXMuY29uZmlnVGFiQ29udGFpbmVyRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoe1xyXG4gICAgICAgICAgICBjbHM6IFwiY29uZmlnLXRhYi1jb250YWluZXJcIixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb25maWdUYWJDb250YWluZXJFbClcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNldHRpbmdzLTJcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUljb25zVGFiQ29udGFpbmVyRWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21JY29uc1RhYkNvbnRhaW5lckVsLnJlbW92ZUNsYXNzKFwiYWN0aXZlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnVJdGVtc1RhYkNvbnRhaW5lckVsLmFkZENsYXNzKFwiYWN0aXZlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnVGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5jdXN0b20taWNvbnMtdGFiLmFjdGl2ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnVGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5jdXN0b20taWNvbnMtdGFiLmFjdGl2ZWRcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJtZW51LWl0ZW1zLXRhYlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwiYWN0aXZlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLnNldEF0dHIoXCJkYXRhLWxhYmVsXCIsIFwiTWVudSBJdGVtc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJzaGFwZXNcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1lbnVJdGVtc1RhYkNvbnRhaW5lckVsLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zVGFiQ29udGFpbmVyRWwucmVtb3ZlQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tSWNvbnNUYWJDb250YWluZXJFbC5hZGRDbGFzcyhcImFjdGl2ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ1RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1pdGVtcy10YWIuYWN0aXZlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdUYWJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtaXRlbXMtdGFiLmFjdGl2ZWRcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJjdXN0b20taWNvbnMtdGFiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuc2V0QXR0cihcImRhdGEtbGFiZWxcIiwgXCJDdXN0b20gSWNvbnNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAvLyBNZW51IEl0ZW1zIENvbmZpZ1xyXG4gICAgICAgIHRoaXMubWVudUl0ZW1zVGFiQ29udGFpbmVyRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoe1xyXG4gICAgICAgICAgICBjbHM6IFwic2V0dGluZy10YWItY29udGFpbmVyIG1lbnUtaXRlbXMtdGFiLWNvbnRhaW5lciBhY3RpdmVkXCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMubWVudUl0ZW1zVGFiQ29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTWVudSBJdGVtc1wiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNldCBtZW51IGl0ZW1zIGNvbmZpZy5cIilcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNoZXZyb25zLXVwLWRvd25cIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIkV4cGFuZCBhbGxcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5tZW51SXRlbXMuZm9yRWFjaChtZW51SXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbnVJdGVtLmV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0uZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJjaGV2cm9ucy1kb3duLXVwXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJDb2xsYXBzZSBBbGxcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5tZW51SXRlbXMuZm9yRWFjaChtZW51SXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVudUl0ZW0uZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51SXRlbS5leHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQWRkIE1lbnUgSXRlbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld01lbnVJdGVtU2V0dGluZ0NvbnRhaW5lckVsLmFkZENsYXNzKFwiYWRkLXNldHRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5tZW51SXRlbXNDb250YWluZXJFbCA9IHRoaXMubWVudUl0ZW1zVGFiQ29udGFpbmVyRWwuY3JlYXRlRGl2KHtcclxuICAgICAgICAgICAgY2xzOiBcInNldHRpbmctaXRlbS1jb250YWluZXIgbWVudS1pdGVtcy1jb250YWluZXJcIixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbWVudUl0ZW0gb2YgY29uZmlnLm1lbnVJdGVtcykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlck1lbnVJdGVtc1NldHRpbmcoXHJcbiAgICAgICAgICAgICAgICBjb25maWcsXHJcbiAgICAgICAgICAgICAgICBtZW51SXRlbSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5tZW51SXRlbXNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld01lbnVJdGVtU2V0dGluZ0NvbnRhaW5lckVsID0gdGhpcy5tZW51SXRlbXNDb250YWluZXJFbC5jcmVhdGVEaXYoe1xyXG4gICAgICAgICAgICBjbHM6IFwic2V0dGluZy1pdGVtLWNvbnRhaW5lciBuZXctbWVudS1pdGVtLXNldHRpbmctY29udGFpbmVyXCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYnVpbGROZXdNZW51SXRlbVNldHRpbmcobmV3TWVudUl0ZW1TZXR0aW5nQ29udGFpbmVyRWwsIGFzeW5jIChtZW51SXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBjb25maWcubWVudUl0ZW1zLnB1c2gobWVudUl0ZW0pO1xyXG4gICAgICAgICAgICBjb25maWcubWVudUl0ZW1zID0gc29ydEJ5UHJvcGVydHkoY29uZmlnLm1lbnVJdGVtcywgJ2NhdCcpXHJcbiAgICAgICAgICAgIGlmICghT2JqZWN0LmtleXMoY29uZmlnLnN1Yk1lbnVJdGVtcykuY29udGFpbnMobWVudUl0ZW0udHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5zdWJNZW51SXRlbXNbbWVudUl0ZW0udHlwZV0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4ucGF0Y2hDYW52YXNNZW51KHRydWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmUtZHJhdy5cclxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEN1c3RvbSBJY29ucyBDb25maWdcclxuICAgICAgICB0aGlzLmN1c3RvbUljb25zVGFiQ29udGFpbmVyRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoe1xyXG4gICAgICAgICAgICBjbHM6IFwic2V0dGluZy10YWItY29udGFpbmVyIGN1c3RvbS1pY29ucy10YWItY29udGFpbmVyXCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY3VzdG9tSWNvbnNUYWJDb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gSWNvbnNcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJBZGQgY3VzdG9tIGljb25zLlwiKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkFkZCBDdXN0b20gSWNvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcIm1vZC1jdGFcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0N1c3RvbUljb25TZXR0aW5nQ29udGFpbmVyRWwuYWRkQ2xhc3MoXCJhZGQtc2V0dGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5jdXN0b21JY29uc0NvbnRhaW5lckVsID0gdGhpcy5jdXN0b21JY29uc1RhYkNvbnRhaW5lckVsLmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgIGNsczogXCJzZXR0aW5nLWl0ZW0tY29udGFpbmVyIGN1c3RvbS1pY29ucy1jb250YWluZXJcIixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uZmlnLmN1c3RvbUljb25zLmZvckVhY2goaWNvbiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ3VzdG9tSWNvbnNTZXR0aW5nKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLFxyXG4gICAgICAgICAgICAgICAgaWNvblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdDdXN0b21JY29uU2V0dGluZ0NvbnRhaW5lckVsID0gdGhpcy5jdXN0b21JY29uc0NvbnRhaW5lckVsLmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgIGNsczogXCJzZXR0aW5nLWl0ZW0tY29udGFpbmVyIG5ldy1jdXN0b20taWNvbi1zZXR0aW5nLWNvbnRhaW5lclwiLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ1aWxkTmV3SWNvblNldHRpbmcobmV3Q3VzdG9tSWNvblNldHRpbmdDb250YWluZXJFbCwgYXN5bmMgKGljb24pID0+IHtcclxuICAgICAgICAgICAgY29uZmlnLmN1c3RvbUljb25zLnB1c2goaWNvbik7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckN1c3RvbUljb25zKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZS1kcmF3LlxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5tZW51SXRlbXNUYWJDb250YWluZXJFbC5yZW1vdmVDbGFzcyhcImFjdGl2ZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tSWNvbnNUYWJDb250YWluZXJFbC5hZGRDbGFzcyhcImFjdGl2ZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnVGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5tZW51LWl0ZW1zLXRhYi5hY3RpdmVkXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlZFwiKTtcclxuICAgICAgICAgICAgdGhpcy5jb25maWdUYWJDb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLmN1c3RvbS1pY29ucy10YWJcIikuYWRkQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlck1lbnVJdGVtc1NldHRpbmcoY29uZmlnLCBtZW51SXRlbTogTWVudUl0ZW0sIHNldHRpbmdzOiBNZW51SXRlbSkge1xyXG4gICAgICAgIGNvbnN0IGNscyA9IG1lbnVJdGVtLmNsYXNzO1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBtZW51SXRlbS50eXBlO1xyXG4gICAgICAgIGNvbnN0IGljb24gPSBtZW51SXRlbS5pY29uO1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBtZW51SXRlbS5uYW1lO1xyXG4gICAgICAgIGNvbnN0IGNhdCA9IG1lbnVJdGVtLmNhdDtcclxuICAgICAgICBjb25zdCBzZWxlY3RvciA9IG1lbnVJdGVtLnNlbGVjdG9yO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gY29uZmlnLm1lbnVJdGVtcy5pbmRleE9mKG1lbnVJdGVtKTtcclxuICAgICAgICBpZiAodGhpcy5kZXZNb2RlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSB0aGlzLm1lbnVJdGVtVHlwZUNoYW5nZWQubmV3VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgcmVuYW1lS2V5KGNvbmZpZy5zdWJNZW51SXRlbXMsIHRoaXMubWVudUl0ZW1UeXBlQ2hhbmdlZC5vbGRUeXBlLCB0aGlzLm1lbnVJdGVtVHlwZUNoYW5nZWQubmV3VHlwZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzdWJNZW51SXRlbXMgPSBjb25maWcuc3ViTWVudUl0ZW1zW3R5cGVdO1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgQ2FudmFzU3R5bGVNZW51U2V0dGluZyh0aGlzLm1lbnVJdGVtc0NvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY2hldnJvbi1yaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uZXhwYW5kZWQgPSAhY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uZXhwYW5kZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zZXRJY29uKFwiY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctZXhwYW5kZWQtZmFsc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1leHBhbmRlZC10cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LnNldEljb24oXCJjaGV2cm9uLXJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctZXhwYW5kZWQtdHJ1ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWV4cGFuZGVkLWZhbHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJNZW51SXRlbXMubGVuZ3RoID09PSAwKSBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJub3N1YlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1leHBhbmRlZC10cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5tZW51SXRlbXNbaW5kZXhdLmV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwucmVtb3ZlQ2xhc3MoXCJzZXR0aW5nLWV4cGFuZGVkLXRydWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWV4cGFuZGVkLWZhbHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Iuc2V0SWNvbihcImNoZXZyb24tcmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBjYi5zZXRJY29uKFwiY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFNlbGVjdEljb25Nb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIGNvbXBvbmVudCwgJ21lbnVJdGVtJywgY29uZmlnLCBpbmRleCkub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0NTUyBDbGFzcycpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoY2xzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5tZW51SXRlbXNbaW5kZXhdLmNsYXNzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1R5cGUnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHR5cGUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lbnVJdGVtc1tpbmRleF0udHlwZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRldk1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnN1Yk1lbnVJdGVtc1t0eXBlXS5mb3JFYWNoKHN1Yk1lbnVJdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnVJdGVtLnR5cGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVudUl0ZW1UeXBlQ2hhbmdlZCA9IHtvbGRUeXBlOiB0eXBlLCBuZXdUeXBlOiB2YWx1ZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnBhdGNoQ2FudmFzTWVudSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAuaW5wdXRFbC5hZGRDbGFzcyhcImRpc2FibGVkXCIpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ05hbWUnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKG5hbWUpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lbnVJdGVtc1tpbmRleF0ubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImdpdC1jb21taXQtaG9yaXpvbnRhbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiRm9yIGNvbm5lY3Rpb24gbGluZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGV2TW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4bWVudSA9IHNldHRpbmcuY29tcG9uZW50cy5maW5kKG9iaiA9PiBvYmouZXh0cmFTZXR0aW5nc0VsPy5jbGFzc0xpc3QuY29udGFpbnMoXCJzZXR0aW5nLWN0eG1lbnUtY2hlY2tcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maWcubWVudUl0ZW1zW2luZGV4XS5jYXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcubWVudUl0ZW1zW2luZGV4XS5jYXQgPSAnZWRnZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctZWRnZS1jaGVja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1lZGdlLWNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4bWVudS5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uY2F0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctZWRnZS1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWVkZ2UtY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4bWVudS5leHRyYVNldHRpbmdzRWwucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcInNldHRpbmctZWRnZS1jaGVja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5tZW51SXRlbXNbaW5kZXhdLmNhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLnJlbW92ZUNsYXNzKFwic2V0dGluZy1lZGdlLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1lZGdlLWNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5tZW51SXRlbXNbaW5kZXhdLmN0eG1lbnUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY3MtYmFkZ2UtY2NcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIlVzZSBjc3NjbGFzc2VzIHN0eWxpbmdcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRldk1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcubWVudUl0ZW1zW2luZGV4XS5zZWxlY3RvciA9ICdjYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctY2MtY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcInNldHRpbmctY2MtY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uc2VsZWN0b3IgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLnJlbW92ZUNsYXNzKFwic2V0dGluZy1jYy1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWNjLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jYy1jaGVja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5tZW51SXRlbXNbaW5kZXhdLnNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwucmVtb3ZlQ2xhc3MoXCJzZXR0aW5nLWNjLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jYy1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY3MtaW5wdXQtY2hlY2tcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcChcIlNob3cgaW4gY29udGV4dCBtZW51XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IGVkZ2UgPSBzZXR0aW5nLmNvbXBvbmVudHMuZmluZChvYmogPT4gb2JqLmV4dHJhU2V0dGluZ3NFbD8uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2V0dGluZy1lZGdlLWNoZWNrXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uY3R4bWVudSA9ICFjb25maWcubWVudUl0ZW1zW2luZGV4XS5jdHhtZW51O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uY3R4bWVudSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctY3R4bWVudS1jaGVja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWN0eG1lbnUtY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZWRnZS5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwucmVtb3ZlQ2xhc3MoXCJzZXR0aW5nLWN0eG1lbnUtY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWN0eG1lbnUtY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VkZ2UuZXh0cmFTZXR0aW5nc0VsLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJNZW51SXRlbXMubGVuZ3RoID09PSAwKSBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJub3N1YlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jdHhtZW51LWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uY3R4bWVudSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLnJlbW92ZUNsYXNzKFwic2V0dGluZy1jdHhtZW51LWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jdHhtZW51LWNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5tZW51SXRlbXNbaW5kZXhdLmNhdCA9PT0gJ2VkZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInBsdXMtY2lyY2xlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJBZGQgc3ViIG1lbnUgaXRlbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maWcubWVudUl0ZW1zW2luZGV4XS5leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lbnVJdGVtc1tpbmRleF0uZXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZy5jb21wb25lbnRzWzBdLmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctZXhwYW5kZWQtZmFsc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLmNvbXBvbmVudHNbMF0uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1leHBhbmRlZC10cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZy5jb21wb25lbnRzWzBdLnNldEljb24oXCJjaGV2cm9uLWRvd25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdWJNZW51SXRlbVNldHRpbmdDb250YWluZXJFbC5hZGRDbGFzcyhcImFkZC1zZXR0aW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N1Yk1lbnVJdGVtU2V0dGluZ0NvbnRhaW5lckVsLmFkZENsYXNzKFwiYWRkLXNldHRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiYXJyb3ctdXBcIilcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVNldHRpbmcoc2V0dGluZywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWl0ZW0tY29udHJvbGxlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJhcnJvdy1kb3duXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVTZXR0aW5nKHNldHRpbmcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWl0ZW0tY29udHJvbGxlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3gnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1lbnVJdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29uZmlnLnN1Yk1lbnVJdGVtc1t0eXBlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAoc3ViTWVudUl0ZW1zLmxlbmd0aCA9PT0gMCkgZGVsZXRlIGNvbmZpZy5zdWJNZW51SXRlbXNbdHlwZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5wYXRjaENhbnZhc01lbnUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJtb2Qtd2FybmluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKGNvbmZpZy5tZW51SXRlbXNbaW5kZXhdLmVuYWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5tZW51SXRlbXNbaW5kZXhdLmVuYWJsZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChtbjogQ2FudmFzU3R5bGVNZW51U2V0dGluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgbW4uc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICAgICAgICAgIG1uLnNldHRpbmdFbC5hZGRDbGFzcyhcIm1lbnUtaXRlbS1zZXR0aW5nXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJNZW51SXRlbXNDb250YWluZXJFbCA9IHNldHRpbmcuc2V0dGluZ0VsLmNyZWF0ZURpdih7XHJcbiAgICAgICAgICAgIGNsczogYHNldHRpbmctaXRlbS1jb250YWluZXIgc3VibWVudS1pdGVtcy1jb250YWluZXIgJHt0eXBlfS1pdGVtcy1jb250YWluZXJgLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBzdWJNZW51SXRlbSBvZiBzdWJNZW51SXRlbXMpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJTdWJNZW51SXRlbXNTZXR0aW5nKFxyXG4gICAgICAgICAgICAgICAgY29uZmlnLFxyXG4gICAgICAgICAgICAgICAgc3ViTWVudUl0ZW0sXHJcbiAgICAgICAgICAgICAgICBzdWJNZW51SXRlbXNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld1N1Yk1lbnVJdGVtU2V0dGluZ0NvbnRhaW5lckVsID0gdGhpcy5zdWJNZW51SXRlbXNDb250YWluZXJFbC5jcmVhdGVEaXYoe1xyXG4gICAgICAgICAgICBjbHM6IFwic2V0dGluZy1pdGVtLWNvbnRhaW5lciBuZXctc3VibWVudS1pdGVtLXNldHRpbmctY29udGFpbmVyXCIsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYnVpbGROZXdTdWJNZW51SXRlbVNldHRpbmcobmV3U3ViTWVudUl0ZW1TZXR0aW5nQ29udGFpbmVyRWwsIHR5cGUsIGFzeW5jIChzdWJNZW51SXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBzdWJNZW51SXRlbXMucHVzaChzdWJNZW51SXRlbSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5wYXRjaENhbnZhc01lbnUodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZS1kcmF3LlxyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNldHRpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU3ViTWVudUl0ZW1zU2V0dGluZyhjb25maWcsIHN1Yk1lbnVJdGVtOiBTdWJNZW51SXRlbSwgc2V0dGluZ3M6IFN1Yk1lbnVJdGVtKSB7XHJcbiAgICAgICAgY29uc3QgY2xzID0gc3ViTWVudUl0ZW0uY2xhc3M7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IHN1Yk1lbnVJdGVtLnR5cGU7XHJcbiAgICAgICAgY29uc3QgaWNvbiA9IHN1Yk1lbnVJdGVtLmljb247XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHN1Yk1lbnVJdGVtLm5hbWU7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSBzdWJNZW51SXRlbS5zZWxlY3RvcjtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHNldHRpbmdzLmluZGV4T2Yoc3ViTWVudUl0ZW0pO1xyXG4gICAgICAgIGNvbnN0IHN1Yk1lbnVJdGVtcyA9IGNvbmZpZy5zdWJNZW51SXRlbXNbdHlwZV07XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZyA9IG5ldyBDYW52YXNTdHlsZU1lbnVTZXR0aW5nKHRoaXMuc3ViTWVudUl0ZW1zQ29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJncmlwLXZlcnRpY2FsXCIpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFNlbGVjdEljb25Nb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIGNvbXBvbmVudCwgJ3N1Yk1lbnVJdGVtJywgc3ViTWVudUl0ZW1zLCBpbmRleCkub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0NTUyBDbGFzcycpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoY2xzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Yk1lbnVJdGVtc1tpbmRleF0uY2xhc3MgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0eXBlKVxyXG4gICAgICAgICAgICAgICAgLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAuaW5wdXRFbC5hZGRDbGFzcyhcImhpZGRlblwiKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdOYW1lJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShuYW1lKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Yk1lbnVJdGVtc1tpbmRleF0ubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNzLWJhZGdlLWNjXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJVc2UgY3NzY2xhc3NlcyBzdHlsaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXZNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Yk1lbnVJdGVtc1tpbmRleF0uc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51SXRlbXNbaW5kZXhdLnNlbGVjdG9yID0gJ2NjJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLnJlbW92ZUNsYXNzKFwic2V0dGluZy1jYy1jaGVja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jYy1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51SXRlbXNbaW5kZXhdLnNlbGVjdG9yID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctY2MtY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jYy1jaGVja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcInNldHRpbmctY2MtY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJNZW51SXRlbXNbaW5kZXhdLnNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwucmVtb3ZlQ2xhc3MoXCJzZXR0aW5nLWNjLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jYy1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImFycm93LXVwXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVTZXR0aW5nKHNldHRpbmcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1pdGVtLWNvbnRyb2xsZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiYXJyb3ctZG93blwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlU2V0dGluZyhzZXR0aW5nLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1pdGVtLWNvbnRyb2xsZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd4JylcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnVJdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucGF0Y2hDYW52YXNNZW51KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwibW9kLXdhcm5pbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzdWJNZW51SXRlbXNbaW5kZXhdLmVuYWJsZSlcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnVJdGVtc1tpbmRleF0uZW5hYmxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKG1uOiBDYW52YXNTdHlsZU1lbnVTZXR0aW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBtbi5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgbW4uc2V0dGluZ0VsLmFkZENsYXNzKFwic3VibWVudS1pdGVtLXNldHRpbmdcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gc2V0dGluZztcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJDdXN0b21JY29uc1NldHRpbmcoY29uZmlnLCBpY29uOiBDdXN0b21JY29uKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IGljb24ubmFtZTtcclxuICAgICAgICBjb25zdCBzdmdDb250ZW50ID0gaWNvbi5zdmdDb250ZW50LnJlcGxhY2UoL15gfGAkL2csICcnKTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IGNvbmZpZy5jdXN0b21JY29ucy5pbmRleE9mKGljb24pO1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgQ2FudmFzU3R5bGVNZW51U2V0dGluZyh0aGlzLmN1c3RvbUljb25zQ29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24obmFtZSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignSWNvbiBOYW1lJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShuYW1lKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jdXN0b21JY29uc1tpbmRleF0ubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdTVkcgQ29udGVudCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc3ZnQ29udGVudClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuY3VzdG9tSWNvbnNbaW5kZXhdLnN2Z0NvbnRlbnQgPSBgJHt2YWx1ZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyQ3VzdG9tSWNvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd4JylcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jdXN0b21JY29ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSWNvbihuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVudUl0ZW1zVGFiQ29udGFpbmVyRWwucmVtb3ZlQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUljb25zVGFiQ29udGFpbmVyRWwuYWRkQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ1RhYkNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1pdGVtcy10YWIuYWN0aXZlZFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnVGFiQ29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5jdXN0b20taWNvbnMtdGFiXCIpLmFkZENsYXNzKFwiYWN0aXZlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwibW9kLXdhcm5pbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiBzZXR0aW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkTmV3TWVudUl0ZW1TZXR0aW5nKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgb25TdWJtaXQ6IChtZW51SXRlbTogTWVudUl0ZW0pID0+IHZvaWQpIHtcclxuICAgICAgICBjb25zdCBtZW51SXRlbTogTWVudUl0ZW0gPSB7XHJcbiAgICAgICAgICAgIGNsYXNzOiAnJyxcclxuICAgICAgICAgICAgdHlwZTogJycsXHJcbiAgICAgICAgICAgIGljb246ICcnLFxyXG4gICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgY2F0OiAnJyxcclxuICAgICAgICAgICAgc2VsZWN0b3I6ICcnLFxyXG4gICAgICAgICAgICBjdHhtZW51OiBmYWxzZSxcclxuICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigncGx1cycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN1Ym1pdChtZW51SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcIm1vZC1jdGFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbignY3MtY2lyY2xlLWRhc2hlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IChpY29uTmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51SXRlbS5pY29uID0gaWNvbk5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTZWxlY3RJY29uTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBjb21wb25lbnQsICdhZGROZXcnLCBudWxsLCBudWxsLCBjYWxsYmFjaykub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJpY29uLXNlbGVjdG9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdDU1MgQ2xhc3MnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKCcnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtLmNsYXNzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1R5cGUnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKCcnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtLnR5cGUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignTmFtZScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoJycpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0ubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImdpdC1jb21taXQtaG9yaXpvbnRhbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiRm9yIGNvbm5lY3Rpb24gbGluZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2MgPSBzZXR0aW5nLmNvbXBvbmVudHMuZmluZChvYmogPT4gb2JqLmV4dHJhU2V0dGluZ3NFbD8uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2V0dGluZy1jYy1jaGVja1wiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVudUl0ZW0uY2F0ICYmIGNjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51SXRlbS5jYXQgPSAnZWRnZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLnJlbW92ZUNsYXNzKFwic2V0dGluZy1lZGdlLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcInNldHRpbmctZWRnZS1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51SXRlbS5jYXQgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwucmVtb3ZlQ2xhc3MoXCJzZXR0aW5nLWVkZ2UtY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWVkZ2UtY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2MpIGNjLmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcInNldHRpbmctZWRnZS1jaGVja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnVJdGVtLmNhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLnJlbW92ZUNsYXNzKFwic2V0dGluZy1lZGdlLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1lZGdlLWNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNzLWJhZGdlLWNjXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJVc2UgY3NzY2xhc3NlcyBzdHlsaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc2V0dGluZy5jb21wb25lbnRzLmZpbmQob2JqID0+IG9iai5leHRyYVNldHRpbmdzRWw/LmNsYXNzTGlzdC5jb250YWlucyhcInNldHRpbmctZWRnZS1jaGVja1wiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVudUl0ZW0uc2VsZWN0b3IgJiYgZWRnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW0uc2VsZWN0b3IgPSAnY2MnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctY2MtY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jYy1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRnZS5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVJdGVtLnNlbGVjdG9yID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLnJlbW92ZUNsYXNzKFwic2V0dGluZy1jYy1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcInNldHRpbmctY2MtY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZSkgZWRnZS5leHRyYVNldHRpbmdzRWwucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWNjLWNoZWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVudUl0ZW0uc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5yZW1vdmVDbGFzcyhcInNldHRpbmctY2MtY2hlY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJzZXR0aW5nLWNjLWNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PlxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3gnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZy5zZXR0aW5nRWwucGFyZW50RWxlbWVudC5yZW1vdmVDbGFzcyhcImFkZC1zZXR0aW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYi5leHRyYVNldHRpbmdzRWwuYWRkQ2xhc3MoXCJtb2Qtd2FybmluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnRvZ2dsZUVsLmFkZENsYXNzKFwiaGlkZGVuXCIpXHJcbiAgICAgICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIHNldHRpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGROZXdTdWJNZW51SXRlbVNldHRpbmcoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCB0eXBlOiBzdHJpbmcsIG9uU3VibWl0OiAoc3ViTWVudUl0ZW06IFN1Yk1lbnVJdGVtKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3Qgc3ViTWVudUl0ZW06IFN1Yk1lbnVJdGVtID0ge1xyXG4gICAgICAgICAgICBjbGFzczogJycsXHJcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgIGljb246ICcnLFxyXG4gICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgc2VsZWN0b3I6ICcnLFxyXG4gICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdwbHVzJylcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VibWl0KHN1Yk1lbnVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwibW9kLWN0YVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oKGNvbXBvbmVudCkgPT5cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdjcy1jaXJjbGUtZGFzaGVkJylcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKGljb25OYW1lOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk1lbnVJdGVtLmljb24gPSBpY29uTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFNlbGVjdEljb25Nb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIGNvbXBvbmVudCwgJ2FkZE5ldycsIG51bGwsIG51bGwsIGNhbGxiYWNrKS5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImljb24tc2VsZWN0b3JcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0NTUyBDbGFzcycpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoJycpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViTWVudUl0ZW0uY2xhc3MgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0eXBlKVxyXG4gICAgICAgICAgICAgICAgLnNldERpc2FibGVkKHRydWUpXHJcbiAgICAgICAgICAgICAgICAuaW5wdXRFbC5hZGRDbGFzcyhcImhpZGRlblwiKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignTmFtZScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoJycpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViTWVudUl0ZW0ubmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hZGRFeHRyYUJ1dHRvbigoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNzLWJhZGdlLWNjXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJVc2UgY3NzY2xhc3NlcyBzdHlsaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Yk1lbnVJdGVtLnNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJNZW51SXRlbS5zZWxlY3RvciA9ICdjYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwic2V0dGluZy1jYy1jaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViTWVudUl0ZW0uc2VsZWN0b3IgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5leHRyYVNldHRpbmdzRWwucmVtb3ZlQ2xhc3MoXCJzZXR0aW5nLWNjLWNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigneCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnNldHRpbmdFbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNsYXNzKFwiYWRkLXNldHRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcIm1vZC13YXJuaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAudG9nZ2xlRWwuYWRkQ2xhc3MoXCJoaWRkZW5cIilcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICByZXR1cm4gc2V0dGluZztcclxuICAgIH1cclxuXHJcbiAgICBidWlsZE5ld0ljb25TZXR0aW5nKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgb25TdWJtaXQ6IChpY29uOiBDdXN0b21JY29uKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3QgaWNvbjogQ3VzdG9tSWNvbiA9IHtcclxuICAgICAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgICAgIHN2Z0NvbnRlbnQ6IGBgLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigncGx1cycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN1Ym1pdChpY29uKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNiID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2IuZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKFwibW9kLWN0YVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignSWNvbiBOYW1lJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSgnJylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uLm5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignU1ZHIENvbnRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKGBgKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb24uc3ZnQ29udGVudCA9IGAke3ZhbHVlfWA7XHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChjb21wb25lbnQpID0+XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigneCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLnNldHRpbmdFbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNsYXNzKFwiYWRkLXNldHRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcyhcIm1vZC13YXJuaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiBzZXR0aW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVBc05ld1BhY2thZ2UoY29uZmlnLCBwYWNrYWdlTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlnc1twYWNrYWdlTmFtZV0gPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHBhY2thZ2VOYW1lLFxyXG4gICAgICAgICAgICBtZW51SXRlbXM6IFtdLFxyXG4gICAgICAgICAgICBzdWJNZW51SXRlbXM6IHt9LFxyXG4gICAgICAgICAgICBjdXN0b21JY29uczogW10sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2F2ZWRDb25maWdzW3BhY2thZ2VOYW1lXSA9IHtcclxuICAgICAgICAgICAgbmFtZTogcGFja2FnZU5hbWUsXHJcbiAgICAgICAgICAgIG1lbnVJdGVtczogW10sXHJcbiAgICAgICAgICAgIHN1Yk1lbnVJdGVtczoge30sXHJcbiAgICAgICAgICAgIGN1c3RvbUljb25zOiBbXSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maWdzW3BhY2thZ2VOYW1lXS5tZW51SXRlbXMgPSBjb25maWcubWVudUl0ZW1zO1xyXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpZ3NbcGFja2FnZU5hbWVdLnN1Yk1lbnVJdGVtcyA9IGNvbmZpZy5zdWJNZW51SXRlbXM7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlnc1twYWNrYWdlTmFtZV0uY3VzdG9tSWNvbnMgPSBjb25maWcuY3VzdG9tSWNvbnM7XHJcblxyXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNhdmVkQ29uZmlnc1twYWNrYWdlTmFtZV0ubWVudUl0ZW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25maWcubWVudUl0ZW1zKSk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2F2ZWRDb25maWdzW3BhY2thZ2VOYW1lXS5zdWJNZW51SXRlbXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbmZpZy5zdWJNZW51SXRlbXMpKTtcclxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zYXZlZENvbmZpZ3NbcGFja2FnZU5hbWVdLmN1c3RvbUljb25zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25maWcuY3VzdG9tSWNvbnMpKTtcclxuXHJcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VycmVudENvbmZpZyA9IHBhY2thZ2VOYW1lO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luLnNhdmVkU2V0dGluZ3MoKTtcclxuICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckN1c3RvbUljb25zKCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4ucGF0Y2hDYW52YXNNZW51KHRydWUpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1vdmVTZXR0aW5nKHNldHRpbmc6IENhbnZhc1N0eWxlTWVudVNldHRpbmcsIGlzTW92ZURvd246IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHNldHRpbmcuc2V0dGluZ3M7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ0VsID0gc2V0dGluZy5zZXR0aW5nRWw7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRFbCA9IHNldHRpbmdFbC5wYXJlbnRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcmVudEVsID09IG51bGwpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gQXJyYXkuZnJvbShwYXJlbnRFbC5jaGlsZHJlbikuaW5kZXhPZihzZXR0aW5nRWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzTW92ZURvd24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSBzZXR0aW5ncy5sZW5ndGggLSAxKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgcGFyZW50RWwuaW5zZXJ0QWZ0ZXIoc2V0dGluZ0VsLCBzZXR0aW5nRWwubmV4dEVsZW1lbnRTaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLnNwbGljZShpbmRleCArIDEsIDAsIHNldHRpbmdzLnNwbGljZShpbmRleCwgMSlbMF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDw9IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBwYXJlbnRFbC5pbnNlcnRCZWZvcmUoc2V0dGluZ0VsLCBzZXR0aW5nRWwucHJldmlvdXNFbGVtZW50U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5zcGxpY2UoaW5kZXggLSAxLCAwLCBzZXR0aW5ncy5zcGxpY2UoaW5kZXgsIDEpWzBdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnBhdGNoQ2FudmFzTWVudSgpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlUHJldmlvdXNJY29ucyhjdXJyZW50Q29uZmlnOiBzdHJpbmcsIHNhdmVkQ29uZmlncykge1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzQ29uZmlnID0gY3VycmVudENvbmZpZy5zbGljZSgpO1xyXG4gICAgICAgIGxldCBwcmV2aW91c0ljb25zID0gW107XHJcbiAgICAgICAgaWYgKGN1cnJlbnRDb25maWcgaW4gc2F2ZWRDb25maWdzKSB7XHJcbiAgICAgICAgICAgIHByZXZpb3VzSWNvbnMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zYXZlZENvbmZpZ3NbcHJldmlvdXNDb25maWddLmN1c3RvbUljb25zLm1hcChpY29uID0+IGljb24ubmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJldmlvdXNJY29ucyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpZ3NbcHJldmlvdXNDb25maWddLmN1c3RvbUljb25zLm1hcChpY29uID0+IGljb24ubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByZXZpb3VzSWNvbnMuZm9yRWFjaCgoaWNvbikgPT4ge1xyXG4gICAgICAgICAgICByZW1vdmVJY29uKGljb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTZWxlY3RJY29uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDYW52YXNTdHlsZU1lbnVQbHVnaW4sIGNvbXBvbmVudDogSFRNTEVsZW1lbnQsIGNvbnRhaW5lcjogc3RyaW5nLCBjb25maWcsIGluZGV4LCBjYWxsYmFjazogKGljb25OYW1lOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4pIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGljb25MaXN0ID0gY29udGVudEVsLmNyZWF0ZURpdignaWNvbi1saXN0LWNvbnRhaW5lcicsIChlbCkgPT4ge1xyXG4gICAgICAgICAgICBlbC5jcmVhdGVEaXYoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnY2xpY2thYmxlLWljb24gY3MtaWNvbnMgYWN0aXZlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS1sYWJlbCc6ICdjc0ljb25zJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihpdGVtLCBcInNoYXBlc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLm9uQ2xpY2tFdmVudCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5xdWVyeVNlbGVjdG9yKFwiLmJ1aWx0aW4taWNvbnMuYWN0aXZlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvcihcIi5idWlsdGluLWljb25zLmFjdGl2ZWRcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZENsYXNzKFwiYWN0aXZlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIuYnVpbHRpbi1pY29ucy1jb250YWluZXIuYWN0aXZlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5idWlsdGluLWljb25zLWNvbnRhaW5lci5hY3RpdmVkXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5jcy1pY29ucy1jb250YWluZXJcIikuYWRkQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIkN1c3RvbSBJY29uc1wiLCBjbHM6ICdpY29uLWxpc3QtbmFtZScgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGVsLmNyZWF0ZURpdihcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdjbGlja2FibGUtaWNvbiBidWlsdGluLWljb25zJyxcclxuICAgICAgICAgICAgICAgICAgICBhdHRyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLWxhYmVsJzogJ2J1aWx0LWluIEljb25zJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihpdGVtLCBcImJsb2Nrc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLm9uQ2xpY2tFdmVudCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5xdWVyeVNlbGVjdG9yKFwiLmNzLWljb25zLmFjdGl2ZWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoXCIuY3MtaWNvbnMuYWN0aXZlZFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5jcy1pY29ucy1jb250YWluZXIuYWN0aXZlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5jcy1pY29ucy1jb250YWluZXIuYWN0aXZlZFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIuYnVpbHRpbi1pY29ucy1jb250YWluZXJcIikuYWRkQ2xhc3MoXCJhY3RpdmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIkJ1aWx0LWluIEljb25zXCIsIGNsczogJ2ljb24tbGlzdC1uYW1lJyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY3NJY29ucyA9IHRoaXMuY3JlYXRlSWNvbkNvbnRhaW5lcignY3MtaWNvbnMtY29udGFpbmVyIGFjdGl2ZWQnLCBjc0ljb25MaXN0KTtcclxuICAgICAgICBjb25zdCBidWlsdEluSWNvbnMgPSB0aGlzLmNyZWF0ZUljb25Db250YWluZXIoJ2J1aWx0aW4taWNvbnMtY29udGFpbmVyJywgZ2V0SWNvbklkcygpLmZpbHRlcihpdGVtID0+ICFjc0ljb25MaXN0LmluY2x1ZGVzKGl0ZW0pKSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlSWNvbkNvbnRhaW5lcihjb250YWluZXJJZDogc3RyaW5nLCBpY29uTGlzdDogc3RyaW5nW10pIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoY29udGFpbmVySWQsIChlbCkgPT4ge1xyXG4gICAgICAgICAgICBpY29uTGlzdC5mb3JFYWNoKChpY29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbC5jcmVhdGVEaXYoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdjbGlja2FibGUtaWNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLWljb24nOiBpY29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihpdGVtLCBpY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VG9vbHRpcChpdGVtLCBpY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrRXZlbnQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyID09PSAnbWVudUl0ZW0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcubWVudUl0ZW1zW3RoaXMuaW5kZXhdLmljb24gPSBpY29uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyID09PSAnc3ViTWVudUl0ZW0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWdbdGhpcy5pbmRleF0uaWNvbiA9IGljb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXIgPT09ICdhZGROZXcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jYWxsYmFjayhpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc2V0SWNvbihpY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgICB9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQTJGOzs7QUNBcEYsZ0JBQWdCLEtBQUssV0FBVztBQUNuQyxRQUFNLFdBQVcsT0FBTyxLQUFLLFNBQVMsRUFBRSxJQUFJLFNBQU8sUUFBUSxLQUFLLEtBQUssVUFBVSxJQUFJLENBQUM7QUFDcEYsU0FBTyxTQUFTLFdBQVcsSUFBSSxTQUFTLEtBQUssV0FBWTtBQUFFLGFBQVMsUUFBUSxPQUFLLEVBQUUsQ0FBQztBQUFBLEVBQUc7QUFDM0Y7QUFDQSxpQkFBaUIsS0FBSyxRQUFRLGVBQWU7QUFDekMsUUFBTSxXQUFXLElBQUksU0FBUyxTQUFTLElBQUksZUFBZSxNQUFNO0FBQ2hFLE1BQUksVUFBVSxjQUFjLFFBQVE7QUFHcEMsTUFBSTtBQUNBLFdBQU8sZUFBZSxTQUFTLFFBQVE7QUFDM0MsU0FBTyxlQUFlLFNBQVMsT0FBTztBQUN0QyxNQUFJLFVBQVU7QUFFZCxTQUFPO0FBQ1Asc0JBQW9CLE1BQU07QUFF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QUEsUUFDTCxVQUFVO0FBQUEsUUFDVixTQUFTO0FBQUEsUUFDVCxRQUFRO0FBQUEsTUFDWjtBQUFBLE1BQ0E7QUFBQSxRQUNJLE9BQU87QUFBQSxRQUNQLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLEtBQUs7QUFBQSxRQUNMLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxNQUNaO0FBQUEsTUFDQTtBQUFBLFFBQ0ksT0FBTztBQUFBLFFBQ1AsTUFBTTtBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sS0FBSztBQUFBLFFBQ0wsVUFBVTtBQUFBLFFBQ1YsU0FBUztBQUFBLFFBQ1QsUUFBUTtBQUFBLE1BQ1o7QUFBQSxNQUNBO0FBQUEsUUFDSSxPQUFPO0FBQUEsUUFDUCxNQUFNO0FBQUEsUUFDTixNQUFNO0FBQUEsUUFDTixNQUFNO0FBQUEsUUFDTixLQUFLO0FBQUEsUUFDTCxVQUFVO0FBQUEsUUFDVixTQUFTO0FBQUEsUUFDVCxRQUFRO0FBQUEsTUFDWjtBQUFBLE1BQ0E7QUFBQSxRQUNJLE9BQU87QUFBQSxRQUNQLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLEtBQUs7QUFBQSxRQUNMLFVBQVU7QUFBQSxRQUNWLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxNQUNaO0FBQUEsTUFDQTtBQUFBLFFBQ0ksT0FBTztBQUFBLFFBQ1AsTUFBTTtBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sS0FBSztBQUFBLFFBQ0wsVUFBVTtBQUFBLFFBQ1YsU0FBUztBQUFBLFFBQ1QsUUFBUTtBQUFBLE1BQ1o7QUFBQSxNQUNBO0FBQUEsUUFDSSxPQUFPO0FBQUEsUUFDUCxNQUFNO0FBQUEsUUFDTixNQUFNO0FBQUEsUUFDTixNQUFNO0FBQUEsUUFDTixLQUFLO0FBQUEsUUFDTCxVQUFVO0FBQUEsUUFDVixTQUFTO0FBQUEsUUFDVCxRQUFRO0FBQUEsTUFDWjtBQUFBLElBQ0o7QUFBQSxJQUNBLGNBQWM7QUFBQSxNQUNWLFFBQVE7QUFBQSxRQUNKO0FBQUEsVUFDSSxPQUFPO0FBQUEsVUFDUCxNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixVQUFVO0FBQUEsVUFDVixRQUFRO0FBQUEsUUFDWjtBQUFBLFFBQ0E7QUFBQSxVQUNJLE9BQU87QUFBQSxVQUNQLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLFVBQVU7QUFBQSxVQUNWLFFBQVE7QUFBQSxRQUNaO0FBQUEsTUFDSjtBQUFBLE1BQ0EsSUFBSTtBQUFBLFFBQ0E7QUFBQSxVQUNJLE9BQU87QUFBQSxVQUNQLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLFVBQVU7QUFBQSxVQUNWLFFBQVE7QUFBQSxRQUNaO0FBQUEsUUFDQTtBQUFBLFVBQ0ksT0FBTztBQUFBLFVBQ1AsTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sVUFBVTtBQUFBLFVBQ1YsUUFBUTtBQUFBLFFBQ1o7QUFBQSxNQUNKO0FBQUEsTUFDQSxRQUFRO0FBQUEsUUFDSjtBQUFBLFVBQ0ksT0FBTztBQUFBLFVBQ1AsTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sVUFBVTtBQUFBLFVBQ1YsUUFBUTtBQUFBLFFBQ1o7QUFBQSxRQUNBO0FBQUEsVUFDSSxPQUFPO0FBQUEsVUFDUCxNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixVQUFVO0FBQUEsVUFDVixRQUFRO0FBQUEsUUFDWjtBQUFBLFFBQ0E7QUFBQSxVQUNJLE9BQU87QUFBQSxVQUNQLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLFVBQVU7QUFBQSxVQUNWLFFBQVE7QUFBQSxRQUNaO0FBQUEsUUFDQTtBQUFBLFVBQ0ksT0FBTztBQUFBLFVBQ1AsTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sVUFBVTtBQUFBLFVBQ1YsUUFBUTtBQUFBLFFBQ1o7QUFBQSxNQUNKO0FBQUEsTUFDQSxPQUFPO0FBQUEsUUFDSDtBQUFBLFVBQ0ksT0FBTztBQUFBLFVBQ1AsTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVBQ04sVUFBVTtBQUFBLFVBQ1YsUUFBUTtBQUFBLFFBQ1o7QUFBQSxRQUNBO0FBQUEsVUFDSSxPQUFPO0FBQUEsVUFDUCxNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixVQUFVO0FBQUEsVUFDVixRQUFRO0FBQUEsUUFDWjtBQUFBLFFBQ0E7QUFBQSxVQUNJLE9BQU87QUFBQSxVQUNQLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLFVBQVU7QUFBQSxVQUNWLFFBQVE7QUFBQSxRQUNaO0FBQUEsTUFDSjtBQUFBLE1BQ0EsV0FBVyxDQUFDO0FBQUEsTUFDWixPQUFPLENBQUM7QUFBQSxNQUNSLFVBQVU7QUFBQSxRQUNOO0FBQUEsVUFDSSxPQUFPO0FBQUEsVUFDUCxNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixVQUFVO0FBQUEsVUFDVixRQUFRO0FBQUEsUUFDWjtBQUFBLFFBQ0E7QUFBQSxVQUNJLE9BQU87QUFBQSxVQUNQLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLFVBQVU7QUFBQSxVQUNWLFFBQVE7QUFBQSxRQUNaO0FBQUEsTUFDSjtBQUFBLE1BQ0EsV0FBVztBQUFBLFFBQ1A7QUFBQSxVQUNJLE9BQU87QUFBQSxVQUNQLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLFVBQVU7QUFBQSxVQUNWLFFBQVE7QUFBQSxRQUNaO0FBQUEsUUFDQTtBQUFBLFVBQ0ksT0FBTztBQUFBLFVBQ1AsTUFBTTtBQUFBLFVBQ04sTUFBTTtBQUFBLFVB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
