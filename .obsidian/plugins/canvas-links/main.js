/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => CanvasLinksPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var FILE_VIEW = "file-view";
var CANVAS_VIEW = "canvas-view";
var ALL_VIEW = "all-view";
var CanvasLinksPlugin = class extends import_obsidian.Plugin {
  onload() {
    this.registerView(FILE_VIEW, (leaf) => new FileView(leaf));
    this.registerView(CANVAS_VIEW, (leaf) => new CanvasView(leaf));
    this.addCommand({
      id: ALL_VIEW,
      name: "Enable plugin",
      callback: () => {
        this.onloadFileView();
        this.onloadCanvasView();
      }
    });
  }
  async onloadFileView() {
    if (this.app.workspace.getLeavesOfType(FILE_VIEW).length == 0) {
      await this.app.workspace.getRightLeaf(false).setViewState({
        type: FILE_VIEW,
        active: true
      });
    }
  }
  async onloadCanvasView() {
    if (this.app.workspace.getLeavesOfType(CANVAS_VIEW).length == 0) {
      await this.app.workspace.getRightLeaf(false).setViewState({
        type: CANVAS_VIEW,
        active: true
      });
    }
  }
  onunload() {
  }
};
var FileView = class extends import_obsidian.ItemView {
  constructor(leaf) {
    super(leaf);
  }
  getViewType() {
    return FILE_VIEW;
  }
  getDisplayText() {
    return "Files";
  }
  async onOpen() {
    this.icon = "chevron-right-square";
    this.getFiles().then((notes) => {
      renderView(notes, "Files", this.containerEl);
    });
    this.registerEvent(this.app.workspace.on("file-open", () => {
      this.getFiles().then((notes) => {
        renderView(notes, "Files", this.containerEl);
      });
    }));
  }
  async getFiles() {
    const activeCanvas = this.app.workspace.getActiveFile();
    if (activeCanvas == null || "canvas" != activeCanvas.extension) {
      return [];
    }
    let canvasContent = "";
    await this.app.vault.cachedRead(activeCanvas).then((content) => {
      canvasContent = content;
    });
    const nodes = JSON.parse(canvasContent).nodes;
    if (nodes == null) {
      return [];
    }
    const filePaths = [];
    for (const node of nodes) {
      if ("file" == node.type) {
        filePaths.push(node.file);
      }
    }
    const files = [];
    for (const filePath of filePaths) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file != null) {
        files.push(file);
      }
    }
    return files;
  }
  async onClose() {
  }
};
var CanvasView = class extends import_obsidian.ItemView {
  constructor(leaf) {
    super(leaf);
  }
  getViewType() {
    return CANVAS_VIEW;
  }
  getDisplayText() {
    return "Canvas";
  }
  async onOpen() {
    this.icon = "chevron-left-square";
    this.getCanvas().then((canvas) => {
      renderView(canvas, "Canvases", this.containerEl);
    });
    this.registerEvent(this.app.workspace.on("file-open", () => {
      this.getCanvas().then((canvas) => {
        renderView(canvas, "Canvases", this.containerEl);
      });
    }));
  }
  async getCanvas() {
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile == null) {
      return [];
    }
    const canvas = [];
    const all = this.app.vault.getFiles();
    for (const file of all) {
      if ("canvas" == file.extension) {
        canvas.push(file);
      }
    }
    const canvasContent = /* @__PURE__ */ new Map();
    for (const file of canvas) {
      await this.app.vault.cachedRead(file).then((content) => {
        canvasContent.set(file, content);
      });
    }
    const canvasEmebeded = [];
    for (const [file, content] of canvasContent) {
      const nodes = JSON.parse(content).nodes;
      if (nodes == null) {
        continue;
      }
      for (const node of nodes) {
        if ("file" == node.type && activeFile.path == node.file) {
          canvasEmebeded.push(file);
        }
      }
    }
    return canvasEmebeded;
  }
  async onClose() {
  }
};
function renderView(files, text, container) {
  container.empty();
  const pane = container.createDiv({
    cls: "outgoing-link-pane node-insert-event",
    attr: { "style": "position: relative;" }
  });
  const header = pane.createDiv({
    cls: "tree-item-self is-clickable",
    attr: {
      "aria-label": "Click to collapse",
      "aria-label-position": "right"
    }
  });
  header.createSpan({ cls: "tree-item-icon collapse-icon" });
  header.createDiv({
    cls: "tree-item-inner",
    text
  });
  header.createDiv({ cls: "tree-item-flair-outer" }, (el) => {
    el.createSpan({
      cls: "tree-item-flair",
      text: files.length.toString()
    });
  });
  const content = pane.createDiv({ cls: "search-result-container" });
  content.createDiv({
    attr: {
      "style": "width: 1px; height: 0.1px; margin-bottom: 0px;"
    }
  });
  for (const file of files) {
    content.createDiv({
      cls: "tree-item-self is-clickable outgoing-link-item",
      attr: { "draggable": true }
    }, (el) => {
      el.createSpan({ cls: "tree-item-icon" }, (el2) => {
        (0, import_obsidian.setIcon)(el2, "link");
      });
      el.createDiv({
        cls: "tree-item-inner",
        text: file.name.substring(0, file.name.lastIndexOf("."))
      }).addEventListener("click", () => {
        this.app.workspace.openLinkText("", file.path);
      });
    });
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgSXRlbVZpZXcsIFBsdWdpbiwgVEFic3RyYWN0RmlsZSwgVEZpbGUsIFdvcmtzcGFjZUxlYWYsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5cbmNvbnN0IEZJTEVfVklFVzogc3RyaW5nID0gXCJmaWxlLXZpZXdcIlxuY29uc3QgQ0FOVkFTX1ZJRVc6IHN0cmluZyA9IFwiY2FudmFzLXZpZXdcIlxuY29uc3QgQUxMX1ZJRVc6IHN0cmluZyA9IFwiYWxsLXZpZXdcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXNMaW5rc1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cbiAgICBvbmxvYWQoKTogdm9pZCB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdsb2FkIHBsdWdpbicpIC8vIGVuYWJsZSBwbHVnaW5cblxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhGSUxFX1ZJRVcsIChsZWFmKSA9PiBuZXcgRmlsZVZpZXcobGVhZikpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhDQU5WQVNfVklFVywgKGxlYWYpID0+IG5ldyBDYW52YXNWaWV3KGxlYWYpKTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IEFMTF9WSUVXLFxuICAgICAgICAgICAgbmFtZTogJ0VuYWJsZSBwbHVnaW4nLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ubG9hZEZpbGVWaWV3KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmxvYWRDYW52YXNWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIG9ubG9hZEZpbGVWaWV3KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShGSUxFX1ZJRVcpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKS5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IEZJTEVfVklFVyxcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICB9KTsgLy8gdmlldyNvbk9wZW4oKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgb25sb2FkQ2FudmFzVmlldygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoQ0FOVkFTX1ZJRVcpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKS5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IENBTlZBU19WSUVXLFxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pOyAvLyB2aWV3I29uT3BlbigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3VubG9hZCBwbHVnaW4nKTsgLy8gZGlzYWJsZSBwbHVnaW5cbiAgICB9XG59XG5cbmNsYXNzIEZpbGVWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZikge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gRklMRV9WSUVXO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIkZpbGVzXCI7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmljb24gPSAnY2hldnJvbi1yaWdodC1zcXVhcmUnXG5cbiAgICAgICAgdGhpcy5nZXRGaWxlcygpLnRoZW4oKG5vdGVzKSA9PiB7XG4gICAgICAgICAgICByZW5kZXJWaWV3KG5vdGVzLCAnRmlsZXMnLCB0aGlzLmNvbnRhaW5lckVsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRGaWxlcygpLnRoZW4oKG5vdGVzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyVmlldyhub3RlcywgJ0ZpbGVzJywgdGhpcy5jb250YWluZXJFbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEZpbGVzKCk6IFByb21pc2U8VEFic3RyYWN0RmlsZVtdPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUNhbnZhczogVEZpbGUgfCBudWxsID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKGFjdGl2ZUNhbnZhcyA9PSBudWxsIHx8ICdjYW52YXMnICE9IGFjdGl2ZUNhbnZhcy5leHRlbnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjYW52YXNDb250ZW50ID0gJyc7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoYWN0aXZlQ2FudmFzKS50aGVuKChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNhbnZhc0NvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBub2Rlczogbm9kZVtdID0gSlNPTi5wYXJzZShjYW52YXNDb250ZW50KS5ub2RlcztcbiAgICAgICAgaWYgKG5vZGVzID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlUGF0aHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xuICAgICAgICAgICAgaWYgKCdmaWxlJyA9PSBub2RlLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChub2RlLmZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc3QgZmlsZXM6IFRGaWxlW10gPSBbXTtcbiAgICAgICAgLy8gY29uc3QgYWxsOiBURmlsZVtdID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgLy8gZm9yIChjb25zdCBmaWxlIG9mIGFsbCkge1xuICAgICAgICAvLyAgICAgaWYgKGZpbGVQYXRocy5jb250YWlucyhmaWxlLnBhdGgpKSB7XG4gICAgICAgIC8vICAgICAgICAgZmlsZXMucHVzaChmaWxlKTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfVxuICAgICAgICBjb25zdCBmaWxlczogVEFic3RyYWN0RmlsZVtdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgZmlsZVBhdGhzKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZpbGVzO1xuICAgIH1cblxuICAgIGFzeW5jIG9uQ2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjbG9zZSB2aWV3Jyk7XG4gICAgfVxufVxuXG5jbGFzcyBDYW52YXNWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZikge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gQ0FOVkFTX1ZJRVc7XG4gICAgfVxuXG4gICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiQ2FudmFzXCI7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnb3BlbiB2aWV3Jyk7XG5cbiAgICAgICAgdGhpcy5pY29uID0gJ2NoZXZyb24tbGVmdC1zcXVhcmUnXG5cbiAgICAgICAgdGhpcy5nZXRDYW52YXMoKS50aGVuKChjYW52YXMpID0+IHtcbiAgICAgICAgICAgIHJlbmRlclZpZXcoY2FudmFzLCAnQ2FudmFzZXMnLCB0aGlzLmNvbnRhaW5lckVsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRDYW52YXMoKS50aGVuKChjYW52YXMpID0+IHtcbiAgICAgICAgICAgICAgICByZW5kZXJWaWV3KGNhbnZhcywgJ0NhbnZhc2VzJywgdGhpcy5jb250YWluZXJFbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldENhbnZhcygpOiBQcm9taXNlPFRGaWxlW10+IHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZTogVEZpbGUgfCBudWxsID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKGFjdGl2ZUZpbGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FudmFzOiBURmlsZVtdID0gW107XG4gICAgICAgIGNvbnN0IGFsbDogVEZpbGVbXSA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhbGwpIHtcbiAgICAgICAgICAgIGlmICgnY2FudmFzJyA9PSBmaWxlLmV4dGVuc2lvbikge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5wdXNoKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FudmFzQ29udGVudDogTWFwPFRGaWxlLCBzdHJpbmc+ID0gbmV3IE1hcDxURmlsZSwgc3RyaW5nPigpO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgY2FudmFzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpLnRoZW4oKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGNhbnZhc0NvbnRlbnQuc2V0KGZpbGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYW52YXNFbWViZWRlZDogVEZpbGVbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFtmaWxlLCBjb250ZW50XSBvZiBjYW52YXNDb250ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBub2Rlczogbm9kZVtdID0gSlNPTi5wYXJzZShjb250ZW50KS5ub2RlcztcbiAgICAgICAgICAgIGlmIChub2RlcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoJ2ZpbGUnID09IG5vZGUudHlwZSAmJiBhY3RpdmVGaWxlLnBhdGggPT0gbm9kZS5maWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc0VtZWJlZGVkLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbnZhc0VtZWJlZGVkO1xuICAgIH1cblxuICAgIGFzeW5jIG9uQ2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjbG9zZSB2aWV3Jyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXJWaWV3KGZpbGVzOiBUQWJzdHJhY3RGaWxlW10sIHRleHQ6IHN0cmluZywgY29udGFpbmVyOiBFbGVtZW50KTogdm9pZCB7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICBjb25zdCBwYW5lOiBIVE1MRGl2RWxlbWVudCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6ICdvdXRnb2luZy1saW5rLXBhbmUgbm9kZS1pbnNlcnQtZXZlbnQnLFxuICAgICAgICBhdHRyOiB7ICdzdHlsZSc6ICdwb3NpdGlvbjogcmVsYXRpdmU7JyB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgaGVhZGVyOiBIVE1MRGl2RWxlbWVudCA9IHBhbmUuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiAndHJlZS1pdGVtLXNlbGYgaXMtY2xpY2thYmxlJyxcbiAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiAnQ2xpY2sgdG8gY29sbGFwc2UnLFxuICAgICAgICAgICAgJ2FyaWEtbGFiZWwtcG9zaXRpb24nOiAncmlnaHQnXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IGNsczogJ3RyZWUtaXRlbS1pY29uIGNvbGxhcHNlLWljb24nIH0pO1xuICAgIGhlYWRlci5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6ICd0cmVlLWl0ZW0taW5uZXInLFxuICAgICAgICB0ZXh0OiB0ZXh0XG4gICAgfSk7XG4gICAgaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ3RyZWUtaXRlbS1mbGFpci1vdXRlcicgfSwgKGVsKSA9PiB7XG4gICAgICAgIGVsLmNyZWF0ZVNwYW4oe1xuICAgICAgICAgICAgY2xzOiAndHJlZS1pdGVtLWZsYWlyJyxcbiAgICAgICAgICAgIHRleHQ6IGZpbGVzLmxlbmd0aC50b1N0cmluZygpXG4gICAgICAgIH0pXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb250ZW50OiBIVE1MRGl2RWxlbWVudCA9IHBhbmUuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLXJlc3VsdC1jb250YWluZXInIH0pO1xuICAgIGNvbnRlbnQuY3JlYXRlRGl2KHtcbiAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgJ3N0eWxlJzogJ3dpZHRoOiAxcHg7IGhlaWdodDogMC4xcHg7IG1hcmdpbi1ib3R0b206IDBweDsnXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgY29udGVudC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiAndHJlZS1pdGVtLXNlbGYgaXMtY2xpY2thYmxlIG91dGdvaW5nLWxpbmstaXRlbScsXG4gICAgICAgICAgICBhdHRyOiB7ICdkcmFnZ2FibGUnOiB0cnVlIH1cbiAgICAgICAgfSwgKGVsKSA9PiB7XG4gICAgICAgICAgICBlbC5jcmVhdGVTcGFuKHsgY2xzOiAndHJlZS1pdGVtLWljb24nIH0sIChlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldEljb24oZWwsICdsaW5rJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICAgICAgY2xzOiAndHJlZS1pdGVtLWlubmVyJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBmaWxlLm5hbWUuc3Vic3RyaW5nKDAsIGZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi5cIikpXG4gICAgICAgICAgICB9KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KCcnLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxudHlwZSBub2RlID0ge1xuICAgIHR5cGU6IHN0cmluZ1xuICAgIGZpbGU6IHN0cmluZ1xufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBK0U7QUFFL0UsSUFBTSxZQUFvQjtBQUMxQixJQUFNLGNBQXNCO0FBQzVCLElBQU0sV0FBbUI7QUFFekIsSUFBcUIsb0JBQXJCLGNBQStDLHVCQUFPO0FBQUEsRUFFbEQsU0FBZTtBQUdYLFNBQUssYUFBYSxXQUFXLENBQUMsU0FBUyxJQUFJLFNBQVMsSUFBSSxDQUFDO0FBQ3pELFNBQUssYUFBYSxhQUFhLENBQUMsU0FBUyxJQUFJLFdBQVcsSUFBSSxDQUFDO0FBRTdELFNBQUssV0FBVztBQUFBLE1BQ1osSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBQ1osYUFBSyxlQUFlO0FBQ3BCLGFBQUssaUJBQWlCO0FBQUEsTUFDMUI7QUFBQSxJQUNKLENBQUM7QUFBQSxFQUNMO0FBQUEsRUFFQSxNQUFNLGlCQUFnQztBQUNsQyxRQUFJLEtBQUssSUFBSSxVQUFVLGdCQUFnQixTQUFTLEVBQUUsVUFBVSxHQUFHO0FBQzNELFlBQU0sS0FBSyxJQUFJLFVBQVUsYUFBYSxLQUFLLEVBQUUsYUFBYTtBQUFBLFFBQ3RELE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxNQUNaLENBQUM7QUFBQSxJQUNMO0FBQUEsRUFDSjtBQUFBLEVBRUEsTUFBTSxtQkFBa0M7QUFDcEMsUUFBSSxLQUFLLElBQUksVUFBVSxnQkFBZ0IsV0FBVyxFQUFFLFVBQVUsR0FBRztBQUM3RCxZQUFNLEtBQUssSUFBSSxVQUFVLGFBQWEsS0FBSyxFQUFFLGFBQWE7QUFBQSxRQUN0RCxNQUFNO0FBQUEsUUFDTixRQUFRO0FBQUEsTUFDWixDQUFDO0FBQUEsSUFDTDtBQUFB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
