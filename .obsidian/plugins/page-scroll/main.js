/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PageScrollPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var PageScrollPlugin = class extends import_obsidian.Plugin {
  async onload() {
    this.addCommand({
      id: "page-scroll-down",
      name: "page-down",
      callback: () => this.scroll("down"),
      hotkeys: [{ key: "AudioVolumeDown", modifiers: [] }]
    });
    this.addCommand({
      id: "page-scroll-up",
      name: "page-up",
      callback: () => this.scroll("up"),
      hotkeys: [{ key: "AudioVolumeUp", modifiers: [] }]
    });
    this.addCommand({
      id: "page-scroll-top",
      name: "page-top",
      callback: () => this.scroll("top")
    });
    this.addCommand({
      id: "page-scroll-bottom",
      name: "page-bottom",
      callback: () => this.scroll("bottom")
    });
    if (this.app.isMobile) {
      this.registerButton("top", "\u21C8", 64, 2);
      this.registerButton("up", "\u2191", 56, 2);
      this.registerButton("down", "\u2193", 48, 2);
      this.registerButton("bottom", "\u21CA", 40, 2);
    } else {
      this.registerButton("top", "\u21C8", 16, 1);
      this.registerButton("up", "\u2191", 12, 1);
      this.registerButton("down", "\u2193", 8, 1);
      this.registerButton("bottom", "\u21CA", 4, 1);
    }
  }
  onunload() {
    this.clearButton();
  }
  currentView() {
    return this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
  }
  /** mode = top|bottom|up|down */
  scroll(mode) {
    var _a, _b, _c, _d, _e, _f;
    console.log("scroll", mode);
    let thisView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    let thisScrollObj = (thisView == null ? void 0 : thisView.getMode()) == "preview" ? (_b = (_a = thisView == null ? void 0 : thisView.previewMode) == null ? void 0 : _a.renderer) == null ? void 0 : _b.previewEl : (_d = (_c = thisView == null ? void 0 : thisView.editMode) == null ? void 0 : _c.cm) == null ? void 0 : _d.scrollDOM;
    if (!thisScrollObj) {
      try {
        thisScrollObj = (_f = (_e = this.app.workspace.getActiveFileView()) == null ? void 0 : _e.containerEl) == null ? void 0 : _f.children[1];
        if (!thisScrollObj) {
          console.error("scroll failed ==> scrollObj is missing");
          return;
        }
      } catch (e) {
        console.error("scroll failed ==> ", e);
        return;
      }
    }
    let range = thisScrollObj.clientHeight - 60;
    switch (mode) {
      case "up":
        thisScrollObj.scrollBy(0, -range);
        break;
      case "down":
        thisScrollObj.scrollBy(0, range);
        break;
      case "top":
        thisScrollObj.scroll(0, 0);
        break;
      case "bottom":
        thisScrollObj.scroll(0, thisScrollObj.scrollHeight);
        break;
    }
  }
  /** 创建按钮 */
  registerButton(mode, name, offsetBottom, offsetRight) {
    let self = this;
    let buttonId = mode + "TriskiPageBtn";
    if (!document.getElementById(buttonId)) {
      let button = document.createElement("button");
      button.id = buttonId;
      button.style = `position: absolute; bottom: ${offsetBottom}%; right: ${offsetRight}%; background-color: transparent; width: 27px; border-color: black;`;
      button.onclick = () => self.scroll(mode);
      button.setText(name);
      document.body.appendChild(button);
    }
  }
  /** 删除按钮 */
  clearButton() {
    var _a, _b, _c, _d;
    (_a = document.getElementById("upTriskiPageBtn")) == null ? void 0 : _a.remove();
    (_b = document.getElementById("downTriskiPageBtn")) == null ? void 0 : _b.remove();
    (_c = document.getElementById("topTriskiPageBtn")) == null ? void 0 : _c.remove();
    (_d = document.getElementById("bottomTriskiPageBtn")) == null ? void 0 : _d.remove();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgTWFya2Rvd25WaWV3LCBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnZVNjcm9sbFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAvKiBcdTU0N0RcdTRFRTQgKi9cblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJwYWdlLXNjcm9sbC1kb3duXCIsXG4gICAgICBuYW1lOiBcInBhZ2UtZG93blwiLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuc2Nyb2xsKFwiZG93blwiKSxcbiAgICAgIGhvdGtleXM6IFt7IGtleTogXCJBdWRpb1ZvbHVtZURvd25cIiwgbW9kaWZpZXJzOiBbXSB9XSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJwYWdlLXNjcm9sbC11cFwiLFxuICAgICAgbmFtZTogXCJwYWdlLXVwXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zY3JvbGwoXCJ1cFwiKSxcbiAgICAgIGhvdGtleXM6IFt7IGtleTogXCJBdWRpb1ZvbHVtZVVwXCIsIG1vZGlmaWVyczogW10gfV0sXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwicGFnZS1zY3JvbGwtdG9wXCIsXG4gICAgICBuYW1lOiBcInBhZ2UtdG9wXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zY3JvbGwoXCJ0b3BcIiksXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6IFwicGFnZS1zY3JvbGwtYm90dG9tXCIsXG4gICAgICBuYW1lOiBcInBhZ2UtYm90dG9tXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zY3JvbGwoXCJib3R0b21cIiksXG4gICAgfSk7XG5cbiAgICAvKiBcdTYzMDlcdTk0QUVcdUZGMENcdTc5RkJcdTUyQThcdTdBRUZcdTU0OENcdTY4NENcdTk3NjJcdTdBRUZcdTRGNERcdTdGNkVcdTRFMERcdTU0MEMgKi9cbiAgICBpZiAodGhpcy5hcHAuaXNNb2JpbGUpIHtcbiAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24oXCJ0b3BcIiwgXCJcdTIxQzhcIiwgNjQsIDIpO1xuICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbihcInVwXCIsIFwiXHUyMTkxXCIsIDU2LCAyKTtcbiAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24oXCJkb3duXCIsIFwiXHUyMTkzXCIsIDQ4LCAyKTtcbiAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24oXCJib3R0b21cIiwgXCJcdTIxQ0FcIiwgNDAsIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKFwidG9wXCIsIFwiXHUyMUM4XCIsIDE2LCAxKTtcbiAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24oXCJ1cFwiLCBcIlx1MjE5MVwiLCAxMiwgMSk7XG4gICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKFwiZG93blwiLCBcIlx1MjE5M1wiLCA4LCAxKTtcbiAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24oXCJib3R0b21cIiwgXCJcdTIxQ0FcIiwgNCwgMSk7XG4gICAgfVxuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5jbGVhckJ1dHRvbigpO1xuICB9XG5cbiAgY3VycmVudFZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gIH1cblxuICAvKiogbW9kZSA9IHRvcHxib3R0b218dXB8ZG93biAqL1xuICBzY3JvbGwobW9kZTogc3RyaW5nKSB7XG4gICAgY29uc29sZS5sb2coXCJzY3JvbGxcIiwgbW9kZSk7XG4gICAgbGV0IHRoaXNWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBsZXQgdGhpc1Njcm9sbE9iaiA9XG4gICAgICB0aGlzVmlldz8uZ2V0TW9kZSgpID09IFwicHJldmlld1wiXG4gICAgICAgID8gdGhpc1ZpZXc/LnByZXZpZXdNb2RlPy5yZW5kZXJlcj8ucHJldmlld0VsXG4gICAgICAgIDogdGhpc1ZpZXc/LmVkaXRNb2RlPy5jbT8uc2Nyb2xsRE9NO1xuICAgIGlmICghdGhpc1Njcm9sbE9iaikge1xuICAgICAgLy8gZm9yIFRleHRGaWxlVmlld1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpc1Njcm9sbE9iaiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlVmlldygpPy5jb250YWluZXJFbD8uY2hpbGRyZW5bMV1cbiAgICAgICAgaWYgKCF0aGlzU2Nyb2xsT2JqKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcInNjcm9sbCBmYWlsZWQgPT0+IHNjcm9sbE9iaiBpcyBtaXNzaW5nXCIpO1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcInNjcm9sbCBmYWlsZWQgPT0+IFwiLCBlKTtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICAgIGxldCByYW5nZSA9IHRoaXNTY3JvbGxPYmouY2xpZW50SGVpZ2h0IC0gNjA7XG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlIFwidXBcIjpcbiAgICAgICAgdGhpc1Njcm9sbE9iai5zY3JvbGxCeSgwLCAtcmFuZ2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkb3duXCI6XG4gICAgICAgIHRoaXNTY3JvbGxPYmouc2Nyb2xsQnkoMCwgcmFuZ2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ0b3BcIjpcbiAgICAgICAgdGhpc1Njcm9sbE9iai5zY3JvbGwoMCwgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImJvdHRvbVwiOlxuICAgICAgICB0aGlzU2Nyb2xsT2JqLnNjcm9sbCgwLCB0aGlzU2Nyb2xsT2JqLnNjcm9sbEhlaWdodCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBcdTUyMUJcdTVFRkFcdTYzMDlcdTk0QUUgKi9cbiAgcmVnaXN0ZXJCdXR0b24oXG4gICAgbW9kZTogc3RyaW5nLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBvZmZzZXRCb3R0b206IG51bWJlcixcbiAgICBvZmZzZXRSaWdodDogbnVtYmVyXG4gICkge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQgYnV0dG9uSWQgPSBtb2RlICsgXCJUcmlza2lQYWdlQnRuXCI7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCkpIHtcbiAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgYnV0dG9uLmlkID0gYnV0dG9uSWQ7XG4gICAgICBidXR0b24uc3R5bGUgPSBgcG9zaXRpb246IGFic29sdXRlOyBib3R0b206ICR7b2Zmc2V0Qm90dG9tfSU7IHJpZ2h0OiAke29mZnNldFJpZ2h0fSU7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyB3aWR0aDogMjdweDsgYm9yZGVyLWNvbG9yOiBibGFjaztgO1xuICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBzZWxmLnNjcm9sbChtb2RlKTtcblx0ICAgIGJ1dHRvbi5zZXRUZXh0KG5hbWUpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUUgKi9cbiAgY2xlYXJCdXR0b24oKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1cFRyaXNraVBhZ2VCdG5cIik/LnJlbW92ZSgpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG93blRyaXNraVBhZ2VCdG5cIik/LnJlbW92ZSgpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9wVHJpc2tpUGFnZUJ0blwiKT8ucmVtb3ZlKCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib3R0b21Ucmlza2lQYWdlQnRuXCIpPy5yZW1vdmUoKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFxQztBQUVyQyxJQUFxQixtQkFBckIsY0FBOEMsdUJBQU87QUFBQSxFQUNuRCxNQUFNLFNBQVM7QUFHYixTQUFLLFdBQVc7QUFBQSxNQUNkLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTSxLQUFLLE9BQU8sTUFBTTtBQUFBLE1BQ2xDLFNBQVMsQ0FBQyxFQUFFLEtBQUssbUJBQW1CLFdBQVcsQ0FBQyxFQUFFLENBQUM7QUFBQSxJQUNyRCxDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDZCxJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU0sS0FBSyxPQUFPLElBQUk7QUFBQSxNQUNoQyxTQUFTLENBQUMsRUFBRSxLQUFLLGlCQUFpQixXQUFXLENBQUMsRUFBRSxDQUFDO0FBQUEsSUFDbkQsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNLEtBQUssT0FBTyxLQUFLO0FBQUEsSUFDbkMsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2QsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNLEtBQUssT0FBTyxRQUFRO0FBQUEsSUFDdEMsQ0FBQztBQUdELFFBQUksS0FBSyxJQUFJLFVBQVU7QUFDckIsV0FBSyxlQUFlLE9BQU8sVUFBSyxJQUFJLENBQUM7QUFDckMsV0FBSyxlQUFlLE1BQU0sVUFBSyxJQUFJLENBQUM7QUFDcEMsV0FBSyxlQUFlLFFBQVEsVUFBSyxJQUFJLENBQUM7QUFDdEMsV0FBSyxlQUFlLFVBQVUsVUFBSyxJQUFJLENBQUM7QUFBQSxJQUMxQyxPQUFPO0FBQ0wsV0FBSyxlQUFlLE9BQU8sVUFBSyxJQUFJLENBQUM7QUFDckMsV0FBSyxlQUFlLE1BQU0sVUFBSyxJQUFJLENBQUM7QUFDcEMsV0FBSyxlQUFlLFFBQVEsVUFBSyxHQUFHLENBQUM7QUFDckMsV0FBSyxlQUFlLFVBQVUsVUFBSyxHQUFHLENBQUM7QUFBQSxJQUN6QztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFdBQVc7QUFDVCxTQUFLLFlBQVk7QUFBQSxFQUNuQjtBQUFBLEVBRUEsY0FBYztBQUNaLFdBQU8sS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDRCQUFZO0FBQUEsRUFDNUQ7QUFBQTtBQUFBLEVBR0EsT0FBTyxNQUFjO0FBdkR2QjtBQXdESSxZQUFRLElBQUksVUFBVSxJQUFJO0FBQzFCLFFBQUksV0FBVyxLQUFLLElBQUksVUFBVSxvQkFBb0IsNEJBQVk7QUFDbEUsUUFBSSxpQkFDRixxQ0FBVSxjQUFhLGFBQ25CLGdEQUFVLGdCQUFWLG1CQUF1QixhQUF2QixtQkFBaUMsYUFDakMsZ0RBQVUsYUFBVixtQkFBb0IsT0FBcEIsbUJBQXdCO0FBQzlCLFFBQUksQ0FBQyxlQUFlO0FBRWxCLFVBQUk7QUFDRix5QkFBZ0IsZ0JBQUssSUFBSSxVQUFVLGtCQUFrQixNQUFyQyxtQkFBd0MsZ0JBQXhDLG1CQUFxRCxTQUFTO0FBQzlFLFlBQUksQ0FBQyxlQUFlO0FBQ2xCLGtCQUFRLE1BQU0sd0NBQXdDO0FBQ3REO0FBQUEsUUFDRjtBQUFBLE1BQ0YsU0FBUSxHQUFOO0FBQ0EsZ0JBQVEsTUFBTSxzQkFBc0IsQ0FBQztBQUNyQztBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBQ0EsUUFBSSxRQUFRLGNBQWMsZUFBZTtBQUN6QyxZQUFRLE1BQU07QUFBQSxNQUNaLEtBQUs7QUFDSCxzQkFBYyxTQUFTLEdBQUcsQ0FBQyxLQUFLO0FBQ2hDO0FBQUEsTUFDRixLQUFLO0FBQ0gsc0JBQWMsU0FBUyxHQUFHLEtBQUs7QUFDL0I7QUFBQSxNQUNGLEtBQUs7QUFDSCxzQkFBYyxPQUFPLEdBQUcsQ0FBQztBQUN6QjtBQUFBLE1BQ0YsS0FBSztBQUNILHNCQUFjLE9BQU8sR0FBRyxjQUFjLFlBQVk7QUFDbEQ7QUFBQSxJQUNKO0FBQUEsRUFDRjtBQUFBO0FBQUEsRUFHQSxlQUNFLE1BQ0EsTUFDQSxjQUNBLGFBQ0E7QUFDQSxRQUFJLE9BQU87QUFDWCxRQUFJLFdBQVcsT0FBTztBQUN0QixRQUFJLENBQUMsU0FBUyxlQUFlLFFBQVEsR0FBRztBQUN0QyxVQUFJLFNBQVMsU0FBUyxjQUFjLFFBQVE7QUFDNUMsYUFBTyxLQUFLO0FBQ1osYUFBTyxRQUFRLCtCQUErQix5QkFBeUI7QUFDdkUsYUFBTyxVQUFVLE1BQU0sS0FBSyxPQUFPLElBQUk7QUFDeEMsYUFBTyxRQUFRLElBQUk7QUFDbEIsZUFBUyxLQUFLLFlBQVksTUFBTTtBQUFBLElBQ2xDO0FBQUEsRUFDRjtBQUFBO0FBQUEsRUFHQSxjQUFjO0FBaEhoQjtBQWlISSxtQkFBUyxlQUFlLGlCQUFpQixNQUF6QyxtQkFBNEM7QUFDNUMsbUJBQVMsZUFBZSxtQkFBbUIsTUFBM0MsbUJBQThDO0FBQzlDLG1CQUFTLGVBQWUsa0JBQWtCLE1BQTFDLG1CQUE2QztBQUM3QyxtQkFBUyxlQUFlLHFCQUFxQixNQUE3QyxtQkFBZ0Q7QUFBQSxFQUNsRDtBQUNGOyIsCiAgIm5hbWVzIjogW10KfQo=
